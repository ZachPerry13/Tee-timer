"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[805],{77567:(gt,Pe,h)=>{h.r(Pe),h.d(Pe,{AuthModule:()=>Fo});var be=h(44268),ee=h(92348),d=h(52870),ue=h(43754),e=h(63815),pe=h(46396);let ht=(()=>{class r{constructor(t,i){this.http=t,this.baseConfigService=i,this.baseUrl=ee.c.onlineApi,this.baseConfigService.isReady?this.baseUrl=this.baseConfigService.serverSettings.onlineApi:this.baseConfigService.settingsLoaded$.subscribe(n=>this.baseUrl=this.baseConfigService.serverSettings.onlineApi)}resetPassword(t){return this.http.post(`${this.baseUrl}/resetpassword`,t).pipe((0,d.T)(i=>i))}checkResetPasswordUrlExpired(t){return this.http.post(`${this.baseUrl}/IsResetPasswordExpired`,{url:t.url}).pipe((0,d.T)(i=>i))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(pe.Qq),e.KVO(ue.t))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var a=h(65185),Ie=h(59453),re=h(21090),S=h(50275),ye=h(62630),P=h(83769),w=h(83841),j=h(64431),ae=h(58794),F=h(60509),Y=h(23164),$e=(()=>{return(r=$e||($e={}))[r.Success=1]="Success",r[r.Error=2]="Error",r[r.Failure=3]="Failure",$e;var r})(),ge=h(8086),b=h(74259),Ne=h(12896),U=h(72102),z=h(75764);const ft=[Ie.Zm.ResetPassword,Ie.Zm.CheckResetPasswordUrlExpire],_t=[re.qh.ResetPasswordSuccess,re.qh.ResetPasswordFailure,re.qh.CheckResetPasswordUrlExpireSuccess,re.qh.CheckResetPasswordUrlExpireFailure,re.qh.CheckResetPasswordUrlExpireNotify];let Ct=(()=>{class r{constructor(t,i,n,p,y){this.actions$=t,this.resetPasswordService=i,this.dialog=n,this.router=p,this.translate=y,this.showSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...ft),(0,d.T)(()=>new Y.f9))),this.hideSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(..._t),(0,d.T)(()=>new Y.wg))),this.checkResetPasswordUrlExpired$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(Ie.Zm.CheckResetPasswordUrlExpire),(0,d.T)(C=>C.payload),(0,ye.p)(C=>this.resetPasswordService.checkResetPasswordUrlExpired(C).pipe((0,d.T)(l=>l.status===$e.Success?new re.mz(Object.assign(Object.assign({},l),{data:Object.assign(Object.assign({},l.data),{encryptedEmail:C.email,encryptedUsername:C.username})})):new re.yV(l.message)),(0,P.W)(l=>(0,F.of)(new re.pB(l))))))),this.notifymessage$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(re.qh.CheckResetPasswordUrlExpireNotify),(0,d.T)(C=>C.payload),(0,w.M)(C=>{this.dialog.open(ge.z,{data:{header:this.translate.instant("dialog.information"),details:C}})}),(0,w.M)(()=>this.router.navigate(["auth/verify-email"]))),{dispatch:!1}),this.resetPassword$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(Ie.Zm.ResetPassword),(0,d.T)(C=>C.payload),(0,j.Z)(C=>this.resetPasswordService.resetPassword(C).pipe((0,ae.n)(l=>[new re.ct(l),new S.az({userName:b.H.decodeBase64(C.encryptedUsername),email:C.email,password:C.newPassword})]),(0,P.W)(l=>(0,F.of)(new re.Fm(l)))))))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(a.En),e.KVO(ht),e.KVO(Ne.bZ),e.KVO(U.Ix),e.KVO(z.c$))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac}),r})();var T=h(20811),m=h(30519),g=h(75403),B=h(29182),M=h(87783),De=h(32713),je=h(86537),Re=h(99987),Xe=h(50395),Ve=h(28437),A=h(53034),ce=h(10876),vt=h(51004);let bt=(()=>{class r extends vt.r{static create(t,i=null){return i&&!t?Object.assign({},i):new r(t,null!=i?i:this.defaultValue).value}}return r.defaultValue={classCode:"",email:"",email_verified:"",is_pskuser:!1,first_name:"",last_name:"",name:"",prefered_username:"",sub:"",unique_name:"",init:"",mobile_phone:"",birthdate:"",carrier_id:"",sex:"",house_no:"",street:"",city:"",state:"",country:"",zip:"",home_course:"",acct:"",golferId:0,player_id:0,dependent_id:0,store_id:0,store_card_key:"",store_card_num:"",card_expire:"",store_card_token:"",store_card_token_padss:"",member_group_ids:"",memberClassCode:{requireCreditCardByClass:0,requireCreditCardOnline:!1,requireCCMoreXDailyBooking:0},photo:"",username:"",login_method:""},r})(),he=(()=>{class r{constructor(t,i,n){this._http=t,this.baseConfigService=i,this.oauthService=n,this.baseUrl=ee.c.onlineApi,window.addEventListener("storage",p=>this.syncTabs(p)),this.baseConfigService.isReady?(this.baseUrl=this.baseConfigService.serverSettings.onlineApi,this.referencesBaseUrl=this.baseConfigService.serverSettings.referencesApi):this.baseConfigService.settingsLoaded$.subscribe(()=>{this.baseUrl=this.baseConfigService.serverSettings.onlineApi,this.referencesBaseUrl=this.baseConfigService.serverSettings.referencesApi})}syncTabs(t){if("authEvent"===t.key){const i=JSON.parse(t.newValue);("login"===i.event||"logout"===i.event)&&window.location.reload()}}verifyUser(t){return this._http.post(`${this.baseUrl}/VerifyUser`,t,{observe:"response"}).pipe((0,d.T)(i=>{const n=i.headers.get("Location");return Object.assign(Object.assign({},i.body),{model:t,location:n})}))}getIdMeMessageLogin(){return this._http.get(`${this.referencesBaseUrl}/IdMeLoginMessageDetail`).pipe((0,d.T)(t=>t))}register(t){return this._http.post(`${this.baseUrl}/Register`,t).pipe((0,d.T)(i=>i.content))}getGolferId(t,i,n){return this._http.get(`${this.baseUrl}/GolferId/Acct/${t}/PlayerId/${i}/DependentId/${n}`).pipe((0,w.M)(p=>{const y=JSON.parse(localStorage.getItem("id_token_claims_obj"));y&&(y.golferId=p,localStorage.setItem("id_token_claims_obj",JSON.stringify(y)))}),(0,d.T)(p=>p))}getUserInformation(t,i,n){let p=new pe.Nl;return p=p.append("acct",t),p=p.append("playerId",i.toString()),p=p.append("dependentId",n.toString()),this._http.get(`${this.baseUrl}/GetUserInformation`,{params:p}).pipe((0,d.T)(y=>bt.create(y)),(0,w.M)(y=>{const C=JSON.parse(localStorage.getItem("id_token_claims_obj"));C&&(C.golferId=y.golferId||0,C.memberClassCode=y.memberClassCode,localStorage.setItem("id_token_claims_obj",JSON.stringify(C)))}))}getWelcomeScreenBannerImage(){return this._http.get(`${this.baseUrl}/WelcomeScreenBannerImage`).pipe(t=>t)}registerSSO(t){return this._http.post(`${this.baseUrl}/RegisterMemberSSO`,t).pipe((0,d.T)(i=>i))}updateHitCount(t){return this._http.put(`${this.referencesBaseUrl.replace("/v1/references","/v2")}/Affiliates/HitCount`,t).pipe(i=>i)}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(pe.Qq),e.KVO(ue.t),e.KVO(Re.TC))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var N=h(68173),oe=h(34429),K=h(62444),xe=h(11389),q=h(56233),fe=h(12874),x=h(58344),ne=h(95641),Be=h(1048),ze=h(18583),Q=h(50513),Te=h(5696);let Oe=(()=>{class r{constructor(t){this.elementRef=t,this.focus=!0}ngOnInit(){this.focus&&this.elementRef.nativeElement.focus()}set appAutofocus(t){this.focus=!1!==t}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(e.aKT))},r.\u0275dir=e.FsC({type:r,selectors:[["","appAutofocus",""]],inputs:{appAutofocus:"appAutofocus"}}),r})();var _e=h(29608),It=h(79699),Ae=h(48537),Je=h(57882);function yt(r,o){if(1&r&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.nrm(3,"img",20),e.nI1(4,"image64"),e.k0s()()()),2&r){const t=e.XpG();e.R7$(3),e.Y8G("src",e.bMT(4,1,t.welcomeScreenBannerImage),e.B4B)}}function Rt(r,o){if(1&r&&(e.j41(0,"div",21)(1,"div",22),e.nrm(2,"img",23),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.logoSrc,e.B4B)}}function Tt(r,o){1&r&&(e.j41(0,"div",24),e.EFF(1,"\xa0"),e.k0s())}function Et(r,o){if(1&r&&(e.nrm(0,"div",30),e.nI1(1,"safeHtml"),e.nI1(2,"async")),2&r){const t=e.XpG(2);e.Y8G("innerHTML",e.bMT(1,1,e.bMT(2,3,t.idMeLoginMessage$)),e.npT)}}function St(r,o){1&r&&(e.j41(0,"p",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"verifyEmailForm.clickIdMe"),"! "))}function wt(r,o){1&r&&(e.j41(0,"p",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"registerForm.welcome"),"! "))}function Ft(r,o){1&r&&(e.j41(0,"p",33),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"verifyEmailForm.clickIdMe")," "))}function Mt(r,o){if(1&r&&(e.j41(0,"div",25),e.DNE(1,Et,3,5,"div",26),e.nI1(2,"async"),e.DNE(3,St,3,3,"p",27),e.DNE(4,wt,3,3,"p",28),e.DNE(5,Ft,3,3,"p",29),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",e.bMT(2,4,t.idMeLoginMessage$)),e.R7$(2),e.Y8G("ngIf",!t.isMobile),e.R7$(1),e.Y8G("ngIf",t.isMobile),e.R7$(1),e.Y8G("ngIf",t.isMobile)}}const kt=function(r){return{"text-center":r}};function Pt(r,o){if(1&r&&(e.j41(0,"div",25)(1,"p",34),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngClass",e.eq3(4,kt,t.isMobile)),e.R7$(1),e.SpI(" ",e.bMT(3,2,t.welcomeMessage)," ")}}function $t(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"email.emailAddressInvalid"),". "))}function xt(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"form.required"),". "))}function Ot(r,o){if(1&r&&(e.qex(0),e.j41(1,"p",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-form-field",39),e.nrm(5,"input",40),e.nI1(6,"translate"),e.DNE(7,$t,3,3,"mat-error",12),e.DNE(8,xt,3,3,"mat-error",12),e.k0s(),e.bVm()),2&r){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,4,"email.email")),e.R7$(3),e.FS9("placeholder",e.bMT(6,6,"email.email")),e.R7$(2),e.Y8G("ngIf",t.form.get("email").hasError("email")||t.form.get("email").hasError("pattern")),e.R7$(1),e.Y8G("ngIf",t.form.get("email").hasError("required"))}}function At(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"form.required"),". "))}function Gt(r,o){if(1&r&&(e.j41(0,"p",38),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",39),e.nrm(4,"input",41),e.nI1(5,"translate"),e.DNE(6,At,3,3,"mat-error",12),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.SpI(" ",e.bMT(2,3,"username.username")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,5,"username.username")),e.R7$(2),e.Y8G("ngIf",t.form.get("username").hasError("required"))}}function Lt(r,o){if(1&r&&(e.j41(0,"div",35),e.DNE(1,Ot,9,8,"ng-container",36),e.DNE(2,Gt,7,7,"ng-template",null,37,e.C5r),e.k0s()),2&r){const t=e.sdS(3),i=e.XpG();e.R7$(1),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.loginMethod)===i.LoginMethod.Email)("ngIfElse",t)}}function Ut(r,o){if(1&r&&(e.j41(0,"button",42),e.EFF(1),e.nI1(2,"uppercase"),e.nI1(3,"translate"),e.k0s()),2&r){const t=e.XpG();e.Y8G("disabled",!t.form.valid),e.R7$(1),e.SpI(" ",e.bMT(2,2,e.bMT(3,4,"form.next"))," ")}}function Nt(r,o){1&r&&(e.j41(0,"div"),e.nrm(1,"mat-divider",43),e.k0s())}function Dt(r,o){if(1&r){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){return e.eBV(t),e.XpG().onClickGuestCheckout()}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"guestForm.guestCheckout")," "))}function jt(r,o){if(1&r){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){return e.eBV(t),e.XpG().onCllickGoogleLogin()}),e.nrm(1,"img",46),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&r&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"verifyEmailForm.loginGoogle")," "))}function Vt(r,o){if(1&r){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){return e.eBV(t),e.XpG().onClickFacebookLogin()}),e.nrm(1,"img",47),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&r&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"verifyEmailForm.loginFacebook")," "))}function Bt(r,o){if(1&r){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){return e.eBV(t),e.XpG().onClickIDmeLogin()}),e.nrm(1,"img",49),e.k0s()}}function Ht(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",50)(1,"p",51),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"a",52),e.bIt("click",function(){return e.eBV(t),e.XpG().onClickSignup()}),e.EFF(5),e.nI1(6,"translate"),e.k0s()()()}2&r&&(e.R7$(2),e.SpI(" ",e.bMT(3,2,"verifyEmailForm.dontHaveAcct")," "),e.R7$(3),e.JRh(e.bMT(6,4,"verifyEmailForm.signUp")))}let Ke=(()=>{class r{constructor(t,i,n,p,y,C,l,_,R,L){this.store=t,this.oauthService=i,this.service=n,this.sessionService=p,this.router=y,this.authService=C,this.titleService=l,this.activatedRoute=_,this._document=L,this.isPageAlive=!0,this.logoSrc="",this.isMobile=!1,this.isTeetimeSelected$=this.store.pipe((0,g.Lt)(De.Rt)),this.isGroupTeetimeSelected$=this.store.pipe((0,g.Lt)(je.KUu)),this.idMeLoginMessage$=this.store.pipe((0,g.Lt)(M.jS)),this.LoginMethod=q.x,R.observe([oe.Rp.Handset]).subscribe(I=>{this.isMobile=I.matches}),this.oauthService.configure(Xe.a),this.oauthService.loadDiscoveryDocument()}ngOnInit(){this.store.pipe((0,K.v)(()=>this.isPageAlive),(0,g.Lt)(B.N3)).subscribe(t=>{t&&(this.reservationOptions=t,t.enableIdmeAuthentication&&this.store.dispatch(new S.Uy),this.setPageTitle(t),this.initForm(),this.setupWelcomeMessage(),setTimeout(()=>this.setScrollTo(),300))}),this.store.dispatch(new S.vC),this.store.dispatch(new A.Ph),this.verifyTeetime()}setScrollTo(){let t=document.getElementById("page-wrapper");t||(t=this._document.getElementById("#page-wrapper")),null==t||t.scrollTo({top:-1}),null==t||t.scrollIntoView({block:"start"})}setupWelcomeMessage(){this.welcomeMessage=this.reservationOptions.loginMethod===q.x.Email?"verifyEmailForm.enterEmail":"verifyEmailForm.enterUsername";const t=this.activatedRoute.snapshot.queryParamMap.get("returnUrl");if(t){const i=decodeURIComponent(t),[n]=i.split("?");n===ne.C.CancelBookingRoute&&(this.welcomeMessage=this.reservationOptions.loginMethod===q.x.Email?"verifyEmailForm.enterEmailCancelBooking":"verifyEmailForm.enterUsernameCancelBooking")}}initForm(){this.form=new m.gE(this.reservationOptions.loginMethod===q.x.Email?{email:new m.MJ("",[m.k0.email,m.k0.required,m.k0.pattern(fe.R.Email)])}:{username:new m.MJ("",[m.k0.required])})}ngOnDestroy(){this.store.dispatch(new A.VJ)}ngAfterViewInit(){this.getWelcomeScreenBannerImage(),setTimeout(()=>this.setScrollTo())}submit(){this.store.dispatch(new S.EP(this.form.value))}onCllickGoogleLogin(){this.store.dispatch(new Y.f9),this.store.dispatch(new ce._j),this.service.googleAuthorize()}onClickFacebookLogin(){this.store.dispatch(new Y.f9),this.store.dispatch(new ce._j),this.service.facebookAuthorize()}onCllickAppleLogin(){this.store.dispatch(new Y.f9),this.store.dispatch(new ce._j),this.service.appleAuthorize()}onClickIDmeLogin(){this.store.dispatch(new Y.f9),this.store.dispatch(new ce._j),this.service.idmeAuthorize()}onClickGuestCheckout(){this.store.dispatch(new S.KO)}setPageTitle(t){t.pageTitle&&this.titleService.setTitle(t.pageTitle)}verifyTeetime(){const t=this.sessionService.getItem(N.L.LockedTeesheetIds),i=t?t.value:null,n=decodeURIComponent(this.router.url),p=+b.H.getQueryParamFromMalformedURL(n,x.u.Id),y=+b.H.getQueryParamFromMalformedURL(n,x.u.NumberOfPlayer);if(p&&(null===i||"object"!=typeof i||0===i.length||i.some(C=>C<=0))){const C=b.H.getQueryParamFromMalformedURL(n,x.u.Id).split(",");this.sessionService.setItem(N.L.LockedTeesheetIds,C.map(l=>+l),N.L.LockedTeesheetsTimeoutInMinutes),this.store.dispatch(new S.nu({teetimeId:p,numberOfPlayer:y}))}}getWelcomeScreenBannerImage(){this.authService.getWelcomeScreenBannerImage().pipe((0,xe.s)(1)).subscribe(t=>{this.welcomeScreenBannerImage=t,this.logoSrc="assets/images/cps_logo_large_transparent.png"})}onClickSignup(){this.store.dispatch(new S.Hx)}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il),e.rXU(Re.TC),e.rXU(Ve.H),e.rXU(Be.Q),e.rXU(U.Ix),e.rXU(he),e.rXU(ze.hE),e.rXU(U.nX),e.rXU(oe.QP),e.rXU(T.qQ))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-verify-email"]],decls:25,vars:22,consts:[[1,"container"],["class","img-container",4,"ngIf","ngIfElse"],["logo",""],[1,"login-side"],["style","margin-top: 1vh",4,"ngIf"],[1,"login-side-container"],["style","margin-bottom: 30px",4,"ngIf","ngIfElse"],["defaultWelcome",""],[2,"padding-top","0px"],[1,"form",3,"formGroup","submit"],["style","margin-bottom: 10px",4,"ngIf"],["mat-raised-button","","type","submit","color","accent",3,"disabled",4,"ngIf"],[4,"ngIf"],["mat-stroked-button","","class","guestcheckout-btn m-t-10 event-wrapper","routerLinkActive","router-link-active",3,"click",4,"ngIf"],["type","button","mat-stroked-button","","style","border: 1px solid #dfe1e2 !important","class","m-t-10",3,"click",4,"ngIf"],["type","button","mat-flat-button","","style","width: 100%; padding: 0; margin: 0","class","m-t-10","color","transparent",3,"click",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"img-container"],[1,"img"],[1,"img-content"],[3,"src"],[1,"logo-side"],[1,"logo-side-container"],[1,"logoimg",3,"src"],[2,"margin-top","1vh"],[2,"margin-bottom","30px"],["class","title-text",3,"innerHTML",4,"ngIf"],["class","title-text","style","color: #656363",4,"ngIf"],["class","title-text text-center","style","font-size: 15px; font-weight: normal",4,"ngIf"],["class","title-text text-center",4,"ngIf"],[1,"title-text",3,"innerHTML"],[1,"title-text",2,"color","#656363"],[1,"title-text","text-center",2,"font-size","15px","font-weight","normal"],[1,"title-text","text-center"],[1,"title-text",3,"ngClass"],[2,"margin-bottom","10px"],[4,"ngIf","ngIfElse"],["usernameForm",""],[2,"margin-bottom","5px"],["appearance","outline"],["appAutofocus","","matInput","","name","email","formControlName","email","type","email","autofocus","",3,"placeholder"],["appAutofocus","","matInput","","name","username","formControlName","username","type","username","autofocus","",3,"placeholder"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[2,"margin-top","10px","margin-bottom","10px"],["mat-stroked-button","","routerLinkActive","router-link-active",1,"guestcheckout-btn","m-t-10","event-wrapper",3,"click"],["type","button","mat-stroked-button","",1,"m-t-10",2,"border","1px solid #dfe1e2 !important",3,"click"],["src","assets/images/icons/gg2.png",1,"iconbtn"],["src","assets/images/icons/fb2.png",1,"iconbtn"],["type","button","mat-flat-button","","color","transparent",1,"m-t-10",2,"width","100%","padding","0","margin","0",3,"click"],["src","assets/images/icons/idme-verify.png","width","100%"],[1,"text-center"],[2,"color","#b6b6b6"],["routerLinkActive","router-link-active",1,"event-wrapper",2,"cursor","pointer","color","var(--primary-color)",3,"routerLink","click"]],template:function(t,i){if(1&t&&(e.j41(0,"div",0),e.DNE(1,yt,5,3,"div",1),e.DNE(2,Rt,3,1,"ng-template",null,2,e.C5r),e.j41(4,"div",3),e.DNE(5,Tt,2,0,"div",4),e.j41(6,"div",5),e.DNE(7,Mt,6,6,"div",6),e.DNE(8,Pt,4,6,"ng-template",null,7,e.C5r),e.j41(10,"div",8)(11,"form",9),e.bIt("submit",function(){return i.submit()}),e.DNE(12,Lt,4,2,"div",10),e.j41(13,"div"),e.DNE(14,Ut,4,6,"button",11),e.DNE(15,Nt,2,0,"div",12),e.nI1(16,"async"),e.nI1(17,"async"),e.DNE(18,Dt,3,3,"button",13),e.nI1(19,"async"),e.nI1(20,"async"),e.DNE(21,jt,4,3,"button",14),e.DNE(22,Vt,4,3,"button",14),e.DNE(23,Bt,2,0,"button",15),e.k0s(),e.DNE(24,Ht,7,6,"div",16),e.k0s()()()()()),2&t){const n=e.sdS(3),p=e.sdS(9);e.R7$(1),e.Y8G("ngIf",i.welcomeScreenBannerImage)("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",i.isMobile),e.R7$(2),e.Y8G("ngIf",null==i.reservationOptions?null:i.reservationOptions.enableIdmeAuthentication)("ngIfElse",p),e.R7$(4),e.Y8G("formGroup",i.form),e.R7$(1),e.Y8G("ngIf",!(null!=i.reservationOptions&&i.reservationOptions.enableIdmeAuthentication)),e.R7$(2),e.Y8G("ngIf",!(null!=i.reservationOptions&&i.reservationOptions.enableIdmeAuthentication)),e.R7$(1),e.Y8G("ngIf",((null==i.reservationOptions?null:i.reservationOptions.enableFacebookAuthentication)||(null==i.reservationOptions?null:i.reservationOptions.enableGoogleAuthentication)||(null==i.reservationOptions?null:i.reservationOptions.enableGuestCheckout)&&(e.bMT(16,14,i.isTeetimeSelected$)||e.bMT(17,16,i.isGroupTeetimeSelected$)))&&!(null!=i.reservationOptions&&i.reservationOptions.enableIdmeAuthentication)),e.R7$(3),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.enableGuestCheckout)&&(null==i.reservationOptions?null:i.reservationOptions.allowNewCustomerRegistration)&&(e.bMT(19,18,i.isTeetimeSelected$)||e.bMT(20,20,i.isGroupTeetimeSelected$))),e.R7$(3),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.enableGoogleAuthentication)&&!(null!=i.reservationOptions&&i.reservationOptions.enableIdmeAuthentication)),e.R7$(1),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.enableFacebookAuthentication)&&!(null!=i.reservationOptions&&i.reservationOptions.enableIdmeAuthentication)),e.R7$(1),e.Y8G("ngIf",null==i.reservationOptions?null:i.reservationOptions.enableIdmeAuthentication),e.R7$(1),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.allowNewCustomerRegistration)&&!(null!=i.reservationOptions&&i.reservationOptions.enableIdmeAuthentication))}},directives:[T.bT,T.YU,m.qT,m.cb,m.j4,Q.rl,Te.fg,m.me,Oe,m.BC,m.JD,Q.TL,_e.$z,It.q,U.wQ,U.$T],pipes:[Ae.A,Je.$,T.Jj,z.D9,T.Pc],styles:[".page-content{padding:0!important}.login-side-container[_ngcontent-%COMP%]{max-width:350px;margin:0 auto;margin-top:10vh}.login-side[_ngcontent-%COMP%]{width:60%;float:right;background-color:#fff;min-height:calc(100vh - 8em)}.logo-side-container[_ngcontent-%COMP%]{max-width:150px;margin:0 auto;margin-top:calc(50vh - 8em);padding-right:262px}.logo-side[_ngcontent-%COMP%]{width:40%;float:left;min-height:calc(100vh - 10em)}.title-text[_ngcontent-%COMP%]{font-size:23px;font-weight:700;margin-top:0;margin-bottom:0}.guestcheckout-btn[_ngcontent-%COMP%]{border-color:var(--primary-color);color:var(--primary-color);background-color:#fff}button[_ngcontent-%COMP%]{border-radius:8px;font-weight:700;width:100%;padding:5px;margin-bottom:10px}.iconbtn[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:3px;width:30px;height:30px}.logoimg[_ngcontent-%COMP%]{height:60px}  .login-side .mat-form-field-appearance-outline .mat-form-field-outline{color:#ccc!important;opacity:.5!important;border-width:thin;border-radius:.5em!important}  .login-side .mat-form-field-outline-start{border-radius:8px 0 0 8px!important;min-width:28px!important}  .login-side .mat-form-field-outline-end{border-radius:0 8px 8px 0!important}.mat-input-element[_ngcontent-%COMP%]{font-size:14px!important;height:100%}  .login-side .mat-form-field-appearance-outline .mat-form-field-infix{padding:.8em 0!important;margin-top:-.5em}@media screen and (max-width: 768px){.logo-side[_ngcontent-%COMP%]{display:none}.login-side[_ngcontent-%COMP%]{width:100%}.login-side-container[_ngcontent-%COMP%]{margin-top:10vh}.img-container[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 480px){.login-side-container[_ngcontent-%COMP%]{width:100%;margin-top:5vh;padding:10px}.title-text[_ngcontent-%COMP%]{font-size:20px}.img-container[_ngcontent-%COMP%]{display:none}}.img-container[_ngcontent-%COMP%]{height:calc(100vh - 8em);position:relative;width:40%;float:left}.img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]{display:contents}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}"]}),r})();var Yt=h(57527),O=h(75137),J=h(3126);function qt(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"password.emailRequired")," "))}const Xt=function(){return["/auth/login"]};let Qe=(()=>{class r{constructor(t){this.store=t,this.formForgotPassword=new m.gE({email:new m.MJ("",m.k0.required)}),this.email$=this.store.pipe((0,g.Lt)(O.kb)).subscribe(i=>this.formForgotPassword.patchValue({email:i}))}ngOnInit(){this.store.dispatch(new A.Ph)}ngOnDestroy(){this.store.dispatch(new A.VJ)}onSubmittedForgotPassword(){this.formForgotPassword.valid&&this.store.dispatch(new S.XC(Object.assign(Object.assign({},this.formForgotPassword.value),{url:Yt.A.getBaseUri()+ne.C.ResetPasswordRoute})))}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-forgot-password"]],decls:26,vars:18,consts:[[1,"card-container","text-center"],[1,"text-center","p-20","p-b-0"],[1,"example-form",3,"formGroup","ngSubmit"],["cellspacing","0",1,"full-width","p-l-20","p-r-20"],[1,"example-full-width"],["matInput","","formControlName","email",3,"placeholder"],[4,"ngIf"],[1,"mainboxsection"],["mat-raised-button","","color","accent",2,"width","100%","padding","10px"],[2,"float","right","cursor","pointer",3,"routerLink"]],template:function(t,i){1&t&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"mat-card-content")(6,"form",2),e.bIt("ngSubmit",function(){return i.onSubmittedForgotPassword()}),e.j41(7,"table",3)(8,"tr")(9,"td")(10,"mat-form-field",4),e.nrm(11,"input",5),e.nI1(12,"translate"),e.DNE(13,qt,3,3,"mat-error",6),e.k0s()()(),e.j41(14,"tr")(15,"td"),e.nrm(16,"br"),e.j41(17,"div",7)(18,"button",8),e.EFF(19),e.nI1(20,"uppercase"),e.nI1(21,"translate"),e.k0s()(),e.nrm(22,"br"),e.j41(23,"a",9),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,7,"password.passwordRecovery")),e.R7$(3),e.Y8G("formGroup",i.formForgotPassword),e.R7$(5),e.FS9("placeholder",e.bMT(12,9,"email.exampleEmail")),e.R7$(2),e.Y8G("ngIf",i.formForgotPassword.get("email").hasError("required")),e.R7$(6),e.SpI(" ",e.bMT(20,11,e.bMT(21,13,"password.sendPasswordRecovery"))," "),e.R7$(4),e.Y8G("routerLink",e.lJ4(17,Xt)),e.R7$(1),e.JRh(e.bMT(25,15,"form.cancel")))},directives:[J.RN,J.MM,J.dh,J.m2,m.qT,m.cb,m.j4,Q.rl,Te.fg,m.me,m.BC,m.JD,T.bT,Q.TL,_e.$z,U.$T],pipes:[z.D9,T.Pc],styles:[".card-container[_ngcontent-%COMP%]{max-width:450px;margin:20px auto 0;padding:20px}.full-width[_ngcontent-%COMP%]{width:100%}"]}),r})();var V=h(66831),zt=h(14040),Me=h(74938),We=h(20683),Ge=h(64678),Jt=h(25929),Le=h(2376),Ee=h(96410),Se=h(71540),Ze=h(48882),te=h(61360),ke=h(18634),Kt=h(47834),Qt=h(88481),Wt=h(93723);let Zt=(()=>{class r{constructor(t){this.translate=t,this.colors=["#c47a7a","#c3c47a","#7ac4a4"]}static measureStrength(t){let i=0;const n={};for(let C=0;C<t.length;C++)n[t[C]]=(n[t[C]]||0)+1,i+=5/n[t[C]];const p={digits:/\d/.test(t),lower:/[a-z]/.test(t),upper:/[A-Z]/.test(t),nonWords:/\W/.test(t),specialChar:/[!-\/:-@[-`{-~]/.test(t)};let y=0;for(const C in p)p.hasOwnProperty(C)&&(y+=p[C]?1:0);return i+=10*(y-1),Math.trunc(i)}getColor(t){let i=0;return this.strengthLabel="Weak",t>40?(i=2,this.strengthLabel="Strong"):t>30&&(i=1,this.strengthLabel="Great"),this.strengthLabelColor=this.colors[i],{idx:i+1,col:this.colors[i]}}ngOnChanges(t){const i=t.passwordToCheck.currentValue;if(this.setBarColors(5,"#DDD"),i){const n=this.getColor(r.measureStrength(i));this.setBarColors(n.idx,n.col)}}setBarColors(t,i){for(let n=0;n<t;n++)this["bar"+n]=i}getPasswrdTextStrength(){if(this.translate&&this.strengthLabel)return this.translate.instant(`password.${this.strengthLabel.toLowerCase()}`)}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(z.c$))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-passoword-strength-bar"]],inputs:{passwordToCheck:"passwordToCheck",barLabel:"barLabel"},features:[e.OA$],decls:8,vars:9,consts:[["id","strength"],["strength",""],["id","strengthBar"],[1,"point"],[1,"strengthLabel"]],template:function(t,i){1&t&&(e.j41(0,"div",0,1)(2,"ul",2),e.nrm(3,"li",3)(4,"li",3)(5,"li",3),e.k0s(),e.j41(6,"small",4),e.EFF(7),e.k0s()()),2&t&&(e.R7$(3),e.xc7("background-color",i.bar0),e.R7$(1),e.xc7("background-color",i.bar1),e.R7$(1),e.xc7("background-color",i.bar2),e.R7$(1),e.xc7("color",i.strengthLabelColor),e.R7$(1),e.JRh(i.getPasswrdTextStrength()))},styles:["ul#strengthBar[_ngcontent-%COMP%]{display:inline;list-style:none;margin:0;padding:0}.point[_ngcontent-%COMP%]:last{margin:0!important}.point[_ngcontent-%COMP%]{background:#DDD;border-radius:2px;display:inline-block;height:3px;margin-right:4px;width:70px}.strengthLabel[_ngcontent-%COMP%]{float:right;margin-top:5px}"]}),r})();var He=h(77106),Ye=h(42489);const er=["mobilePhoneInput"],tr=["emailInput"],rr=["usernameInput"];function ir(r,o){if(1&r&&(e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.nrm(3,"img",25),e.nI1(4,"image64"),e.k0s()()()),2&r){const t=e.XpG();e.R7$(3),e.Y8G("src",e.bMT(4,1,t.welcomeScreenBannerImage),e.B4B)}}function or(r,o){if(1&r&&(e.j41(0,"div",26)(1,"div",27),e.nrm(2,"img",28),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.logoSrc,e.B4B)}}function nr(r,o){1&r&&(e.j41(0,"div",29),e.EFF(1,"\xa0"),e.k0s())}function sr(r,o){1&r&&(e.j41(0,"p",30),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"registerForm.welcome"),"! "))}function ar(r,o){1&r&&(e.j41(0,"p",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"registerForm.createAnAccount")," "))}function cr(r,o){1&r&&(e.j41(0,"p",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"registerForm.welcome"),"! "))}function lr(r,o){1&r&&(e.j41(0,"p",33),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"registerForm.createAnAccount")," "))}function mr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function pr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"email.emailAddressInvalid"),". "))}function dr(r,o){if(1&r&&(e.qex(0),e.j41(1,"p",34),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-form-field",35),e.nrm(5,"input",36,37),e.nI1(7,"translate"),e.DNE(8,mr,3,3,"mat-error",14),e.DNE(9,pr,3,3,"mat-error",14),e.k0s(),e.bVm()),2&r){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,4,"email.email")),e.R7$(3),e.FS9("placeholder",e.bMT(7,6,"email.email")),e.R7$(3),e.Y8G("ngIf",t.formCreateAccount.get("email").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("email").hasError("email")||t.formCreateAccount.get("email").hasError("pattern"))}}function ur(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function gr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"email.emailAddressInvalid"),". "))}function hr(r,o){if(1&r&&(e.qex(0),e.j41(1,"p",34),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-form-field",38),e.nrm(5,"input",39),e.nI1(6,"translate"),e.DNE(7,ur,3,3,"mat-error",14),e.DNE(8,gr,3,3,"mat-error",14),e.k0s(),e.bVm()),2&r){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,4,"email.email")),e.R7$(3),e.FS9("placeholder",e.bMT(6,6,"email.email")),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("email").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("email").hasError("email")||t.formCreateAccount.get("email").hasError("pattern"))}}function fr(r,o){1&r&&(e.qex(0),e.nrm(1,"input",42,43),e.nI1(3,"translate"),e.bVm()),2&r&&(e.R7$(1),e.FS9("placeholder",e.bMT(3,1,"username.username")))}function _r(r,o){1&r&&(e.nrm(0,"input",44),e.nI1(1,"translate")),2&r&&e.FS9("placeholder",e.bMT(1,1,"username.username"))}function Cr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"username.usernameEnterInvalid"),". "))}function vr(r,o){if(1&r&&(e.qex(0),e.j41(1,"p",34),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-form-field",35),e.DNE(5,fr,4,3,"ng-container",40),e.DNE(6,_r,2,3,"ng-template",null,41,e.C5r),e.DNE(8,Cr,3,3,"mat-error",14),e.k0s(),e.bVm()),2&r){const t=e.sdS(7),i=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,4,"username.username")," "),e.R7$(3),e.Y8G("ngIf",!i.isUsernameReadOnly)("ngIfElse",t),e.R7$(3),e.Y8G("ngIf",i.formCreateAccount.get("username").hasError("username"))}}function br(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Ir(r,o){if(1&r){const t=e.RV6();e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35)(4,"input",45),e.bIt("input",function(n){return e.eBV(t),e.XpG().onInputFirstName(n)}),e.nI1(5,"translate"),e.k0s(),e.DNE(6,br,3,3,"mat-error",14),e.k0s()}if(2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,5,"name.firstName")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,7,"name.firstName")),e.Y8G("required",t.reservationOptions.isRequiredFirstName)("appAutofocus",t.isEmailReadOnly||t.isUsernameReadOnly),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("firstName").hasError("required"))}}function yr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Rr(r,o){if(1&r){const t=e.RV6();e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35)(4,"input",46),e.bIt("input",function(n){return e.eBV(t),e.XpG().onInputLastName(n)}),e.nI1(5,"translate"),e.k0s(),e.DNE(6,yr,3,3,"mat-error",14),e.k0s()}if(2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,4,"name.lastName")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,6,"name.lastName")),e.Y8G("required",t.reservationOptions.isRequiredLastName),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("lastName").hasError("required"))}}const Tr=function(){return{number:10}};function Er(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.i5U(2,1,"form.minLength",e.lJ4(4,Tr))," "))}function Sr(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.requireUpperLowerLetter")," "))}function wr(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.requireNumeric")," "))}function Fr(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.requireSpecialChar")," "))}function Mr(r,o){if(1&r&&(e.DNE(0,Sr,3,3,"div",14),e.DNE(1,wr,3,3,"div",14),e.DNE(2,Fr,3,3,"div",14)),2&r){const t=e.XpG(3);let i,n,p;e.Y8G("ngIf",!(null!=(i=t.formCreateAccount.get("registerPassword").getError("requirePattern"))&&i.alphabetLower&&null!=(i=t.formCreateAccount.get("registerPassword").getError("requirePattern"))&&i.alphabetUpper)),e.R7$(1),e.Y8G("ngIf",!(null!=(n=t.formCreateAccount.get("registerPassword").getError("requirePattern"))&&n.numeric)),e.R7$(1),e.Y8G("ngIf",!(null!=(p=t.formCreateAccount.get("registerPassword").getError("requirePattern"))&&p.specialChar))}}function kr(r,o){if(1&r&&(e.j41(0,"mat-error",51),e.DNE(1,Er,3,5,"div",14),e.DNE(2,Mr,3,3,"ng-template",15),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("registerPassword").hasError("minlength")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("registerPassword").hasError("requirePattern"))}}function Pr(r,o){if(1&r){const t=e.RV6();e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35)(4,"input",47),e.bIt("ngModelChange",function(n){return e.eBV(t),e.XpG().password=n}),e.nI1(5,"translate"),e.k0s(),e.j41(6,"mat-icon",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return n.isPasswordTextFieldType=!n.isPasswordTextFieldType}),e.EFF(7),e.k0s()(),e.DNE(8,kr,3,2,"mat-error",49),e.nrm(9,"app-passoword-strength-bar",50)}if(2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,8,"password.password")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,10,"password.password")),e.Y8G("type",t.isPasswordTextFieldType?"text":"password")("ngModel",t.password),e.R7$(3),e.SpI(" ",t.isPasswordTextFieldType?"visibility_off":"visibility",""),e.R7$(1),e.Y8G("ngIf",!t.formCreateAccount.get("registerPassword").valid),e.R7$(1),e.Y8G("passwordToCheck",t.password)("barLabel",t.barLabel)}}function $r(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"password.passwordNotMatch")))}function xr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"password.passwordNotMatch")))}function Or(r,o){if(1&r){const t=e.RV6();e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35),e.nrm(4,"input",52),e.nI1(5,"translate"),e.j41(6,"mat-icon",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return n.isConfirmPasswordTextFieldType=!n.isConfirmPasswordTextFieldType}),e.EFF(7),e.k0s(),e.DNE(8,$r,3,3,"mat-error",14),e.DNE(9,xr,3,3,"mat-error",14),e.k0s()}if(2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,6,"password.confirmPassword")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,8,"password.confirmPassword")),e.Y8G("type",t.isConfirmPasswordTextFieldType?"text":"password"),e.R7$(3),e.SpI(" ",t.isConfirmPasswordTextFieldType?"visibility_off":"visibility",""),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("registerConfirmPassword").hasError("minlength")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("registerConfirmPassword").hasError("equalValue"))}}function Ar(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Gr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"date.birthDateInvalid"),"."))}function Lr(r,o){if(1&r){const t=e.RV6();e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35)(4,"input",53),e.bIt("focus",function(){return e.eBV(t),e.sdS(7).open()}),e.k0s(),e.nrm(5,"mat-datepicker-toggle",54)(6,"mat-datepicker",55,56),e.DNE(8,Ar,3,3,"mat-error",14),e.DNE(9,Gr,3,3,"mat-error",14),e.k0s()}if(2&r){const t=e.sdS(7),i=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,10,"date.birthDate")," "),e.R7$(3),e.FS9("placeholder",i.getDateFormatString()),e.Y8G("matDatepicker",t)("required",i.reservationOptions.isRequiredBirthDate)("value",i.birthDate)("max",i.today),e.R7$(1),e.Y8G("for",t),e.R7$(1),e.Y8G("startAt",i.startBirthDate),e.R7$(2),e.Y8G("ngIf",i.formCreateAccount.get("birthDate").hasError("required")),e.R7$(1),e.Y8G("ngIf",!i.formCreateAccount.get("birthDate").valid&&!i.formCreateAccount.get("birthDate").hasError("required"))}}function Ur(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Nr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"phone.phoneNumberInvalid")," "))}function Dr(r,o){if(1&r&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35),e.nrm(4,"input",57,58),e.nI1(6,"translate"),e.DNE(7,Ur,3,3,"mat-error",14),e.DNE(8,Nr,3,3,"mat-error",14),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.JRh(e.bMT(2,5,"phone.phone")),e.R7$(3),e.FS9("placeholder",e.bMT(6,7,"phone.phonePlaceholder")),e.Y8G("required",null==t.reservationOptions?null:t.reservationOptions.isRequiredPhone),e.R7$(3),e.Y8G("ngIf",t.formCreateAccount.get("mobilePhone").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("mobilePhone").hasError("minlength")||t.formCreateAccount.get("mobilePhone").hasError("wrongNumber")||t.formCreateAccount.get("mobilePhone").hasError("pattern"))}}function jr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Vr(r,o){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translateTag"),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.SpI(" ",e.i5U(2,1,null==t.lookupAddressError?null:t.lookupAddressError.street,"address"),"")}}function Br(r,o){if(1&r&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35),e.nrm(4,"input",59),e.nI1(5,"translate"),e.DNE(6,jr,3,3,"mat-error",14),e.DNE(7,Vr,3,4,"mat-error",14),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,5,"address.address")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,7,"address.address")),e.Y8G("required",t.reservationOptions.isRequiredStreet),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("street").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("street").hasError("lookupError"))}}function Hr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Yr(r,o){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translateTag"),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.SpI("",e.i5U(2,1,null==t.lookupAddressError?null:t.lookupAddressError.city,"address")," ")}}function qr(r,o){if(1&r&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35),e.nrm(4,"input",60),e.nI1(5,"translate"),e.DNE(6,Hr,3,3,"mat-error",14),e.DNE(7,Yr,3,4,"mat-error",14),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.JRh(e.bMT(2,5,"address.city")),e.R7$(3),e.FS9("placeholder",e.bMT(5,7,"address.city")),e.Y8G("required",t.reservationOptions.isRequiredCity),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("city").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("city").hasError("lookupError"))}}function Xr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function zr(r,o){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translateTag"),e.k0s()),2&r){const t=e.XpG(3);e.R7$(1),e.SpI("",e.i5U(2,1,null==t.lookupAddressError?null:t.lookupAddressError.state,"address")," ")}}function Jr(r,o){if(1&r&&(e.j41(0,"mat-form-field",35),e.nrm(1,"input",62),e.nI1(2,"translate"),e.DNE(3,Xr,3,3,"mat-error",14),e.DNE(4,zr,3,4,"mat-error",14),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.FS9("placeholder",e.bMT(2,4,"address.state")),e.Y8G("required",t.reservationOptions.isRequiredZip),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("state").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("state").hasError("lookupError"))}}function Kr(r,o){if(1&r&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.DNE(3,Jr,5,6,"mat-form-field",61)),2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,2,"address.state")," "),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("state"))}}function Qr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Wr(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"address.postalInvalid")))}function Zr(r,o){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translateTag"),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.SpI(" ",e.i5U(2,1,null==t.lookupAddressError?null:t.lookupAddressError.zipCode,"address"),"")}}function ei(r,o){if(1&r&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",35),e.nrm(4,"input",63),e.nI1(5,"translate"),e.DNE(6,Qr,3,3,"mat-error",14),e.DNE(7,Wr,3,3,"mat-error",14),e.DNE(8,Zr,3,4,"mat-error",14),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,6,"address.postal")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,8,"address.postal")),e.Y8G("required",t.reservationOptions.isRequiredState),e.R7$(2),e.Y8G("ngIf",t.formCreateAccount.get("zipCode").hasError("required")),e.R7$(1),e.Y8G("ngIf",!t.formCreateAccount.get("zipCode").valid&&!t.formCreateAccount.get("zipCode").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateAccount.get("zipCode").hasError("lookupError"))}}function ti(r,o){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translateTag"),e.k0s()),2&r){const t=o.$implicit;e.R7$(1),e.SpI(" ",e.i5U(2,1,t,"error")," ")}}function ri(r,o){if(1&r&&(e.j41(0,"p",66),e.DNE(1,ti,3,4,"span",67),e.k0s()),2&r){const t=o.$implicit;e.R7$(1),e.Y8G("ngForOf",t)}}function ii(r,o){if(1&r&&(e.j41(0,"div",64),e.DNE(1,ri,2,1,"p",65),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.modelError)}}function oi(r,o){if(1&r&&(e.j41(0,"div",64),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",t.captchaErorMessage," ")}}function ni(r,o){if(1&r&&(e.j41(0,"a",68),e.nI1(1,"async"),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&r){const t=e.XpG();e.FS9("href",e.bMT(1,2,t.redirectPath$),e.B4B),e.R7$(2),e.JRh(e.bMT(3,4,"registerForm.login"))}}const si=function(){return["/auth/verify-email"]};function ai(r,o){1&r&&(e.j41(0,"a",69),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.Y8G("routerLink",e.lJ4(4,si)),e.R7$(1),e.JRh(e.bMT(2,2,"registerForm.login")))}let et=(()=>{class r{constructor(t,i,n,p,y,C,l,_){this.fb=t,this.datepipe=i,this.authService=n,this.dateAdapter=p,this.translate=C,this.store=l,this._document=_,this.DEBOUNCE_TIME=2e3,this.isAlive=!0,this.LoginMethod=q.x,this.page=1,this.startBirthDate=new Date,this.today=new Date,this.isMobile=!1,this.isEmailReadOnly=!1,this.isUsernameReadOnly=!1,this.countryCode="US",this._isRegisterSSO=!1,this.modelError=[],this.minPhoneNumberLength=9,this.back=new e.bkB,this.cityStateLookup=new e.bkB,this.zipCodeLookup=new e.bkB,this.addressValidate=new e.bkB,this.submittedCreateAccount=new e.bkB,this.isRegisterProcessStartedChange=new e.bkB,this.redirectPath$=this.store.pipe((0,g.Lt)(M.Mj)),y.observe([oe.Rp.Handset]).subscribe(R=>{this.isMobile=R.matches}),this.setDefaultStartViewBirthDate(),this.countryCode=this.translate.getDefaultLang().toUpperCase(),"EN"==this.countryCode&&(this.countryCode="US"),this.store.pipe((0,K.v)(()=>this.isAlive),(0,g.Lt)(M.iA)).subscribe(R=>{R.success?this.formCreateAccount.patchValue({mobilePhone:R.formatPhoneNumber}):(this.formCreateAccount.controls.mobilePhone.setErrors({wrongNumber:!0}),this.formCreateAccount.controls.mobilePhone.markAsTouched())})}get reservationOptions(){return this._reservationOptions}set reservationOptions(t){t&&(this._reservationOptions=t,this.initForm(),this.applyVisibleFormControls(),this.applyRequiredFormControls(),t.enableUspsApi&&(this.fetchCityStateLookup(),this.fetchZipCodeLookup(),this.fetchAddressLookup()),this.setDateFormat(),this.applyValidateFormControls(),setTimeout(()=>this.setScrollTo(),100))}set email(t){t&&(this.formCreateAccount.patchValue({email:t}),this.isEmailReadOnly=!0)}set username(t){t&&(this.formCreateAccount.patchValue({username:t}),this.isUsernameReadOnly=!0)}set first(t){t&&this.formCreateAccount.patchValue({firstName:t})}set last(t){t&&this.formCreateAccount.patchValue({lastName:t})}set lookupAddress(t){t.state&&this.formCreateAccount.patchValue({state:t.state}),t.city&&this.formCreateAccount.patchValue({city:t.city}),t.zip&&this.formCreateAccount.patchValue({zipCode:t.zip})}get lookupAddressError(){return this._lookupAddressError}set lookupAddressError(t){this._lookupAddressError=t,this.patchLookupAddressErrorToForm(t)}set pending(t){t?this.formCreateAccount.disable():this.formCreateAccount.enable()}set errorMessage(t){if(t){const i=[];if(t instanceof Error)i.push([t.message]);else for(const n in t)i.push(t[n]);this.modelError=i}}get isRegisterSSO(){return this._isRegisterSSO}set isRegisterSSO(t){this._isRegisterSSO=t,t&&(this.formCreateAccount.removeControl("username"),this.formCreateAccount.controls.email.setValidators([m.k0.required,m.k0.email,m.k0.pattern(fe.R.Email)]))}ngOnDestroy(){this.isAlive=!1}ngAfterViewInit(){this.getWelcomeScreenBannerImage(),setTimeout(()=>this.setScrollTo()),this.formatPhoneNumber(),this.inputClearErrorMessage()}setScrollTo(){let t=document.getElementById("page-wrapper");t||(t=this._document.getElementById("#page-wrapper")),null==t||t.scrollTo({top:-1}),null==t||t.scrollIntoView({block:"start"})}submitCreateAccount(){this.formCreateAccount.valid&&(this.modelError=[],this.formCreateAccount.get("birthDate")&&this.formCreateAccount.get("birthDate").value&&"string"!=typeof this.formCreateAccount.get("birthDate").value&&(this.birthDate=this.formCreateAccount.get("birthDate").value,this.birthDateFormat=this.birthDate.toLocaleDateString(),this.formCreateAccount.controls.birthDate.setValue(this.birthDateFormat)),this.submittedCreateAccount.emit(this.formCreateAccount.value))}clickNext(){this.page++,this.isRegisterProcessStartedChange.emit(!0)}clickPrevious(){this.page--,this.page<=1&&this.isRegisterProcessStartedChange.emit(!1)}onKeypressDay(t){if("-"===t.key||"e"===t.key||0===parseInt(t.target.value,10)&&0===parseInt(t.key,10)||parseInt(t.target.value+t.key,10)>31)return!1}onPasteDay(t){const i=t.clipboardData.getData("text");if("-"===i||"e"===i||0===parseInt(t.target.value,10)&&0===parseInt(t.key,10)||parseInt(i,10)>31)return!1}onKeypressYear(t){const i=(new Date).getFullYear();if("-"===t.key||"e"===t.key||0===parseInt(t.target.value+t.key,10)||parseInt(t.target.value+t.key,10)>i)return!1}onPasteYear(t){const i=(new Date).getFullYear(),n=t.clipboardData.getData("text");if("-"===n||"e"===n||0===parseInt(n,10)||parseInt(n,10)>i)return!1}onInputFirstName(t){t.target.value=t.target.value.replace(/(?:^|\s)\S/g,i=>i.toUpperCase())}onInputLastName(t){t.target.value=t.target.value.replace(/(?:^|\s)\S/g,i=>i.toUpperCase())}fetchCityStateLookup(){this.formCreateAccount.contains("zipCode")&&this.formCreateAccount.get("zipCode").valueChanges.pipe((0,Se.B)(this.DEBOUNCE_TIME),(0,Ze.F)(),(0,K.v)(()=>this.isAlive),(0,te.p)(()=>this.formCreateAccount.controls.zipCode.valid),(0,d.T)(t=>{5===t.length&&this.cityStateLookup.emit(t)}),(0,w.M)(()=>this.emitAddressValidate(this.formCreateAccount.controls.street.value))).subscribe()}fetchAddressLookup(){this.formCreateAccount.contains("street")&&this.formCreateAccount.get("street").valueChanges.pipe((0,Se.B)(this.DEBOUNCE_TIME),(0,Ze.F)(),(0,K.v)(()=>this.isAlive),(0,te.p)(()=>this.formCreateAccount.controls.street.valid),(0,w.M)(t=>{t&&t.length>0&&this.emitAddressValidate(t)})).subscribe()}emitAddressValidate(t){this.addressValidate.emit({address1:null,address2:t,city:this.formCreateAccount.get("city").value,state:this.formCreateAccount.get("state").value,zip5:this.formCreateAccount.get("zipCode").value,zip4:null})}fetchZipCodeLookup(){this.formCreateAccount.contains("street")&&this.formCreateAccount.get("street").valueChanges.pipe((0,Se.B)(this.DEBOUNCE_TIME),(0,K.v)(()=>this.isAlive),(0,d.T)(t=>{const i=this.formCreateAccount.get("zipCode").value,n=this.formCreateAccount.get("city").value,p=this.formCreateAccount.get("state").value;n&&p&&t&&!i&&this.zipCodeLookup.emit({address2:t,city:n,state:p})})).subscribe(),this.formCreateAccount.contains("city")&&this.formCreateAccount.get("city").valueChanges.pipe((0,Se.B)(this.DEBOUNCE_TIME),(0,K.v)(()=>this.isAlive),(0,d.T)(t=>{if(this.formCreateAccount.get("street").value&&this.formCreateAccount.get("state").value){const i=this.formCreateAccount.get("street").value,n=this.formCreateAccount.get("state").value,p=this.formCreateAccount.get("zipCode").value;i&&n&&t&&!p&&this.zipCodeLookup.emit({address2:i,city:t,state:n})}})).subscribe(),this.formCreateAccount.contains("state")&&this.formCreateAccount.get("state").valueChanges.pipe((0,Se.B)(1e3),(0,K.v)(()=>this.isAlive),(0,d.T)(t=>{if(this.formCreateAccount.get("city").value&&this.formCreateAccount.get("street").value){const i=this.formCreateAccount.get("street").value,n=this.formCreateAccount.get("city").value,p=this.formCreateAccount.get("zipCode").value;i&&n&&t&&!p&&this.zipCodeLookup.emit({address2:i,city:n,state:t})}})).subscribe()}initForm(){this.formCreateAccount=this.fb.group({username:[""],email:[this.email],firstName:[""],init:[""],lastName:[""],birthDate:[""],mobileCarrierId:[""],mobilePhone:[""],sex:[""],homeCourse:[""],registerPassword:["",[m.k0.required,m.k0.minLength(10),Le.x.validatePattern]],registerConfirmPassword:["",[m.k0.required,m.k0.minLength(10)]],houseNo:[""],street:[""],zipCode:[""],city:[""],state:[""],country:[""]},{validator:Le.x.equalValueValidator("registerPassword","registerConfirmPassword")}),this.reservationOptions.loginMethod===q.x.Email?this.formCreateAccount.addControl("email",new m.MJ("",[m.k0.email,m.k0.required])):this.formCreateAccount.addControl("username",new m.MJ("",[m.k0.required]))}applyVisibleFormControls(){this._reservationOptions.isHideFirstName&&!this._reservationOptions.isRequiredFirstName&&this.formCreateAccount.removeControl("firstName"),this._reservationOptions.isHideMiddleName&&!this._reservationOptions.isRequiredMiddleName&&this.formCreateAccount.removeControl("init"),this._reservationOptions.isHideLastName&&!this._reservationOptions.isRequiredLastName&&this.formCreateAccount.removeControl("lastName"),this._reservationOptions.isHidePhone&&!this._reservationOptions.isRequiredPhone&&this.formCreateAccount.removeControl("mobilePhone"),this._reservationOptions.isHideBirthDate&&!this._reservationOptions.isRequiredBirthDate&&this.formCreateAccount.removeControl("birthDate"),this._reservationOptions.isHideMobileCarrier&&!this._reservationOptions.isRequiredMobileCarrier&&this.formCreateAccount.removeControl("mobileCarrierId"),this._reservationOptions.isHideGender&&!this._reservationOptions.isRequiredGender&&this.formCreateAccount.removeControl("sex"),this._reservationOptions.isHideHouseNo&&!this._reservationOptions.isRequiredHouseNo&&this.formCreateAccount.removeControl("houseNo"),this._reservationOptions.enableUspsApi||(this._reservationOptions.isHideStreet&&!this._reservationOptions.isRequiredStreet&&this.formCreateAccount.removeControl("street"),this._reservationOptions.isHideCity&&!this._reservationOptions.isRequiredCity&&this.formCreateAccount.removeControl("city"),this._reservationOptions.isHideState&&!this._reservationOptions.isRequiredState&&this.formCreateAccount.removeControl("state"),this._reservationOptions.isHideZip&&!this._reservationOptions.isRequiredZip&&this.formCreateAccount.removeControl("zipCode")),this._reservationOptions.isHideCountry&&!this._reservationOptions.isRequiredCountry&&this.formCreateAccount.removeControl("country"),this._reservationOptions.isHideHomeCourse&&!this._reservationOptions.isRequiredHomeCourse&&this.formCreateAccount.removeControl("homeCourse")}applyRequiredFormControls(){this._reservationOptions.isRequiredFirstName&&this.formCreateAccount.controls.firstName.setValidators(m.k0.required),this._reservationOptions.isRequiredMiddleName&&this.formCreateAccount.controls.init.setValidators(m.k0.required),this._reservationOptions.isRequiredLastName&&this.formCreateAccount.controls.lastName.setValidators(m.k0.required),this._reservationOptions.isRequiredPhone&&this.formCreateAccount.controls.mobilePhone.setValidators([m.k0.required]),this._reservationOptions.isRequiredBirthDate&&this.formCreateAccount.controls.birthDate.setValidators(m.k0.required),this._reservationOptions.isRequiredMobileCarrier&&this.formCreateAccount.controls.mobileCarrierId.setValidators(m.k0.required),this._reservationOptions.isRequiredGender&&this.formCreateAccount.controls.sex.setValidators(m.k0.required),this._reservationOptions.isRequiredHouseNo&&this.formCreateAccount.controls.houseNo.setValidators(m.k0.required),this._reservationOptions.isRequiredStreet&&this.formCreateAccount.controls.street.setValidators(m.k0.required),this._reservationOptions.isRequiredCity&&this.formCreateAccount.controls.city.setValidators(m.k0.required),this._reservationOptions.isRequiredState&&this.formCreateAccount.controls.state.setValidators(m.k0.required),this._reservationOptions.isRequiredZip&&this.formCreateAccount.controls.zipCode.setValidators(m.k0.required),this._reservationOptions.isRequiredCountry&&this.formCreateAccount.controls.country.setValidators(m.k0.required),this._reservationOptions.isRequiredHomeCourse&&this.formCreateAccount.controls.homeCourse.setValidators(m.k0.required)}applyValidateFormControls(){this.reservationOptions.loginMethod===q.x.Email&&this.formCreateAccount.controls.email.addValidators(m.k0.pattern(fe.R.Email)),this.reservationOptions.isHidePhone||this.formCreateAccount.controls.mobilePhone.addValidators([m.k0.pattern(fe.R.PhoneNumber),m.k0.minLength(this.minPhoneNumberLength)]),this.reservationOptions.isHideBirthDate||this.formCreateAccount.controls.birthDate.addValidators(fe.R.BirthDate),this.formCreateAccount.updateValueAndValidity()}patchLookupAddressErrorToForm(t){this.formCreateAccount.contains("street")&&(t&&t.street?(this.formCreateAccount.controls.street.setErrors({lookupError:!0}),this.formCreateAccount.controls.street.markAsTouched()):this.formCreateAccount.controls.street.updateValueAndValidity()),t&&(this.formCreateAccount.contains("state")&&(t.state||t.street)&&(this.formCreateAccount.controls.state.setErrors({lookupError:!0}),this.formCreateAccount.controls.state.markAsTouched()),this.formCreateAccount.contains("city")&&(t.city||t.street)&&(this.formCreateAccount.controls.city.setErrors({lookupError:!0}),this.formCreateAccount.controls.city.markAsTouched()),this.formCreateAccount.contains("zipCode")&&(t.zip||t.street)&&(this.formCreateAccount.controls.zipCode.setErrors({lookupError:!0}),this.formCreateAccount.controls.zipCode.markAsTouched()))}setDefaultStartViewBirthDate(){this.startBirthDate.setFullYear(this.startBirthDate.getFullYear()-20)}getWelcomeScreenBannerImage(){this.authService.getWelcomeScreenBannerImage().pipe((0,xe.s)(1)).subscribe(t=>{this.welcomeScreenBannerImage=t,this.logoSrc="assets/images/cps_logo_large_transparent.png"})}setDateFormat(){switch(this._reservationOptions.dateFormat){case Ee.c.MDY:this.dateAdapter.setLocale("en-US");break;case Ee.c.DMY:this.dateAdapter.setLocale("en-GB");break;case Ee.c.YMD:this.dateAdapter.setLocale("en-CA");break;default:this.dateAdapter.setLocale("en-US")}}getDateFormatString(){switch(this._reservationOptions.dateFormat){case Ee.c.MDY:return"MM/DD/YYYY";case Ee.c.DMY:return"DD/MM/YYYY";case Ee.c.YMD:return"YYYY-MM-DD";default:return"MM/DD/YYYY"}}formatPhoneNumber(){this.mobilePhoneInputSource=(0,ke.R)(this.mobilePhoneInput.nativeElement,"keyup"),this.mobilePhoneInputSource.pipe((0,K.v)(()=>this.isAlive),(0,te.p)(()=>this.formCreateAccount.get("mobilePhone").value&&this.formCreateAccount.get("mobilePhone").value.length>=this.minPhoneNumberLength&&!this.formCreateAccount.get("mobilePhone").hasError("pattern")),(0,Se.B)(1e3)).subscribe(()=>{const t=Kt.Y.getCountryCode(this.formCreateAccount.get("mobilePhone").value,this.countryCode);this.store.dispatch(new V.WY({phoneNumber:this.formCreateAccount.get("mobilePhone").value,countryCode:t}))})}inputClearErrorMessage(){var t;this.inputSource=(0,ke.R)(this.reservationOptions.loginMethod===q.x.Email?this.emailInput.nativeElement:this.usernameInput.nativeElement,"keydown"),null===(t=this.inputSource)||void 0===t||t.pipe((0,K.v)(()=>this.isAlive),(0,te.p)(()=>this.modelError.length>0)).subscribe(()=>this.modelError=[])}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(m.ok),e.rXU(T.vh),e.rXU(he),e.rXU(Qt.MJ),e.rXU(oe.QP),e.rXU(z.c$),e.rXU(g.il),e.rXU(T.qQ))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register-form"]],viewQuery:function(t,i){if(1&t&&(e.GBs(er,5),e.GBs(tr,5),e.GBs(rr,5)),2&t){let n;e.mGM(n=e.lsd())&&(i.mobilePhoneInput=n.first),e.mGM(n=e.lsd())&&(i.emailInput=n.first),e.mGM(n=e.lsd())&&(i.usernameInput=n.first)}},inputs:{captchaErorMessage:"captchaErorMessage",reservationOptions:"reservationOptions",email:"email",username:"username",first:"first",last:"last",lookupAddress:"lookupAddress",lookupAddressError:"lookupAddressError",pending:"pending",errorMessage:"errorMessage",isMultiPage:"isMultiPage",isTeetimeSelected:"isTeetimeSelected",isGroupTeetimeSelected:"isGroupTeetimeSelected",isRegisterSSO:"isRegisterSSO",isRegisterProcessStarted:"isRegisterProcessStarted"},outputs:{back:"back",cityStateLookup:"cityStateLookup",zipCodeLookup:"zipCodeLookup",addressValidate:"addressValidate",submittedCreateAccount:"submittedCreateAccount",isRegisterProcessStartedChange:"isRegisterProcessStartedChange"},decls:42,vars:35,consts:[[1,"container"],["class","img-container",4,"ngIf","ngIfElse"],["logo",""],[1,"register-page","right-side"],["style","margin-top: 1vh",4,"ngIf"],[1,"right-side-container"],[2,"margin-bottom","20px"],["class","title-text","style","color: #656363; font-size: 16px",4,"ngIf"],["class","title-text",4,"ngIf"],["class","title-text text-center isMobile","style","font-size: 15px; font-weight: normal",4,"ngIf"],["class","title-text text-center isMobile",4,"ngIf"],[2,"padding-top","0px"],[1,"example-form",3,"formGroup"],[2,"margin-bottom","3em"],[4,"ngIf"],[3,"ngIf"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","accent",1,"event-wrapper",3,"click"],[1,"text-center",2,"color","#b6b6b6"],["style","cursor: pointer; color: var(--primary-color)",3,"href",4,"ngIf"],["routerLinkActive","router-link-active","style","cursor: pointer; color: var(--primary-color)","class","event-wrapper",3,"routerLink",4,"ngIf"],[1,"img-container"],[1,"img"],[1,"img-content"],[3,"src"],[1,"logo-side"],[1,"logo-side-container"],[1,"logoimg",3,"src"],[2,"margin-top","1vh"],[1,"title-text",2,"color","#656363","font-size","16px"],[1,"title-text"],[1,"title-text","text-center","isMobile",2,"font-size","15px","font-weight","normal"],[1,"title-text","text-center","isMobile"],[2,"margin-bottom","5px"],["appearance","outline"],["matInput","","formControlName","email","required","","appAutofocus","","autofocus","",3,"placeholder"],["emailInput",""],["appearance","none"],["matInput","","formControlName","email","required","","readonly","",3,"placeholder"],[4,"ngIf","ngIfElse"],["usernameReadonly",""],["matInput","","formControlName","username","required","","appAutofocus","","autofocus","",3,"placeholder"],["usernameInput",""],["matInput","","formControlName","username","required","","readonly","",3,"placeholder"],["matInput","","formControlName","firstName",3,"placeholder","required","appAutofocus","input"],["matInput","","formControlName","lastName",3,"placeholder","required","input"],["matInput","","formControlName","registerPassword","required","",3,"type","placeholder","ngModel","ngModelChange"],["matSuffix","",2,"color","#cccccc","cursor","pointer",3,"click"],["class","password-error",4,"ngIf"],[3,"passwordToCheck","barLabel"],[1,"password-error"],["matInput","","formControlName","registerConfirmPassword","required","",3,"type","placeholder"],["matInput","","formControlName","birthDate","readonly","",3,"matDatepicker","placeholder","required","value","max","focus"],["matSuffix","",3,"for"],[3,"startAt"],["picker",""],["matInput","","type","tel","formControlName","mobilePhone",3,"placeholder","required"],["mobilePhoneInput",""],["matInput","","formControlName","street",3,"placeholder","required"],["matInput","","formControlName","city",3,"placeholder","required"],["appearance","outline",4,"ngIf"],["matInput","","formControlName","state",3,"placeholder","required"],["matInput","","pattern","^(\\d{5})$|^([a-zA-Z]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$","formControlName","zipCode",3,"placeholder","required"],[1,"error-message"],["style","margin-top: 0rem",4,"ngFor","ngForOf"],[2,"margin-top","0rem"],[4,"ngFor","ngForOf"],[2,"cursor","pointer","color","var(--primary-color)",3,"href"],["routerLinkActive","router-link-active",1,"event-wrapper",2,"cursor","pointer","color","var(--primary-color)",3,"routerLink"]],template:function(t,i){if(1&t&&(e.j41(0,"div",0),e.DNE(1,ir,5,3,"div",1),e.DNE(2,or,3,1,"ng-template",null,2,e.C5r),e.j41(4,"div",3),e.DNE(5,nr,2,0,"div",4),e.j41(6,"div",5)(7,"div",6),e.DNE(8,sr,3,3,"p",7),e.DNE(9,ar,3,3,"p",8),e.DNE(10,cr,3,3,"p",9),e.DNE(11,lr,3,3,"p",10),e.k0s(),e.j41(12,"div",11)(13,"form",12)(14,"div",13),e.DNE(15,dr,10,8,"ng-container",14),e.DNE(16,hr,9,8,"ng-container",14),e.DNE(17,vr,9,6,"ng-container",14),e.DNE(18,Ir,7,9,"ng-template",15),e.DNE(19,Rr,7,8,"ng-template",15),e.DNE(20,Pr,10,12,"ng-template",15),e.DNE(21,Or,10,10,"ng-template",15),e.DNE(22,Lr,10,12,"ng-template",15),e.DNE(23,Dr,9,9,"ng-template",15),e.DNE(24,Br,8,9,"ng-template",15),e.DNE(25,qr,8,9,"ng-template",15),e.DNE(26,Kr,4,4,"ng-template",15),e.DNE(27,ei,9,10,"ng-template",15),e.k0s(),e.j41(28,"div",13),e.DNE(29,ii,2,1,"div",16),e.DNE(30,oi,2,1,"div",16),e.j41(31,"button",17),e.bIt("click",function(){return i.submitCreateAccount()}),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.j41(34,"button",18),e.bIt("click",function(){return i.back.emit()}),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.j41(37,"p",19),e.EFF(38),e.nI1(39,"translate"),e.DNE(40,ni,4,6,"a",20),e.DNE(41,ai,3,5,"a",21),e.k0s()()()()()()()),2&t){const n=e.sdS(3);e.R7$(1),e.Y8G("ngIf",i.welcomeScreenBannerImage)("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",i.isMobile),e.R7$(3),e.Y8G("ngIf",!i.isMobile),e.R7$(1),e.Y8G("ngIf",!i.isMobile),e.R7$(1),e.Y8G("ngIf",i.isMobile),e.R7$(1),e.Y8G("ngIf",i.isMobile),e.R7$(2),e.Y8G("formGroup",i.formCreateAccount),e.R7$(2),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.loginMethod)===i.LoginMethod.Email&&i.formCreateAccount.get("email")&&!i.isEmailReadOnly),e.R7$(1),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.loginMethod)===i.LoginMethod.Email&&i.formCreateAccount.get("email")&&i.isEmailReadOnly),e.R7$(1),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.loginMethod)===i.LoginMethod.Username&&i.formCreateAccount.get("username")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("firstName")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("lastName")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("registerPassword")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("registerConfirmPassword")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("birthDate")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("mobilePhone")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("street")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("city")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("state")),e.R7$(1),e.Y8G("ngIf",i.formCreateAccount.get("zipCode")),e.R7$(2),e.Y8G("ngIf",i.modelError.length>0),e.R7$(1),e.Y8G("ngIf",i.captchaErorMessage),e.R7$(1),e.Y8G("disabled",!i.formCreateAccount.valid),e.R7$(1),e.SpI(" ",e.bMT(33,29,"registerForm.createAccount")," "),e.R7$(3),e.SpI(" ",e.bMT(36,31,"form.back")," "),e.R7$(3),e.SpI(" ",e.bMT(39,33,"registerForm.alreadyHaveAccount"),"? "),e.R7$(2),e.Y8G("ngIf",i._isRegisterSSO),e.R7$(1),e.Y8G("ngIf",!i._isRegisterSSO)}},directives:[T.bT,m.qT,m.cb,m.j4,Q.rl,Te.fg,m.me,m.BC,m.JD,m.YS,Oe,Q.TL,Wt.An,Q.yw,Zt,He.bZ,He.bU,He.Vh,m.R_,T.Sq,_e.$z,U.$T,U.wQ],pipes:[Ae.A,z.D9,Ye.x,T.Jj],styles:[".page-content{padding:0!important}.right-side-container[_ngcontent-%COMP%]{max-width:350px;margin:0 auto;margin-top:4vh}.right-side[_ngcontent-%COMP%]{width:60%;float:right;background-color:#fff;min-height:calc(100vh - 8em)}.logo-side-container[_ngcontent-%COMP%]{max-width:150px;margin:0 auto;margin-top:calc(50vh - 8em);padding-right:262px}.logo-side[_ngcontent-%COMP%]{width:40%;float:left;min-height:calc(100vh - 10em)}.title-text[_ngcontent-%COMP%]{font-size:30px;font-weight:700;margin-top:0;margin-bottom:0}button[_ngcontent-%COMP%]{border-radius:8px;font-weight:700;width:100%;padding:5px;margin-bottom:10px}.logoimg[_ngcontent-%COMP%]{height:60px}  .register-page .mat-form-field-appearance-outline .mat-form-field-outline{color:#ccc!important;opacity:.5!important;border-width:thin;border-radius:.5em!important}  .register-page .mat-form-field-outline-start{border-radius:8px 0 0 8px!important;min-width:28px!important}  .register-page .mat-form-field-outline-end{border-radius:0 8px 8px 0!important}.mat-input-element[_ngcontent-%COMP%]{font-size:14px!important;height:100%}.mat-input-element[_ngcontent-%COMP%]:read-only{cursor:default;padding-left:.8em;color:#67757c}  .register-page .mat-form-field-appearance-outline .mat-form-field-infix{padding:.8em 0!important;margin-top:-.5em}@media screen and (max-width: 768px){.logo-side[_ngcontent-%COMP%]{display:none}.right-side[_ngcontent-%COMP%]{width:100%}.img-container[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 480px){.right-side-container[_ngcontent-%COMP%]{width:100%;margin-top:5vh;padding:10px}.title-text[_ngcontent-%COMP%]{font-size:26px}.img-container[_ngcontent-%COMP%]{display:none}}  .register-page .mat-form-field-wrapper{margin-bottom:-1em!important}.error-message[_ngcontent-%COMP%]{color:#e91e63;font-size:75%!important;padding:0 1em}  .register-page .mat-icon-button{left:8px}ul#strengthBar[_ngcontent-%COMP%]{display:inline;list-style:none;margin:0 0 0 15px;padding:0;vertical-align:2px}.img-container[_ngcontent-%COMP%]{height:calc(100vh - 8em);position:relative;width:40%;float:left}.img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]{display:contents}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}  .register-page .mat-datepicker-content .mat-calendar{height:auto!important;min-height:287px}"]}),r})();function li(r,o){if(1&r){const t=e.RV6();e.j41(0,"app-register-form",1),e.bIt("back",function(){return e.eBV(t),e.XpG().onBack()})("submittedCreateAccount",function(n){return e.eBV(t),e.XpG().onSubmitCreateAccount(n)})("addressValidate",function(n){return e.eBV(t),e.XpG().onAddressValidate(n)})("cityStateLookup",function(n){return e.eBV(t),e.XpG().onCityStateLookup(n)})("zipCodeLookup",function(n){return e.eBV(t),e.XpG().onZipCodeLookup(n)})("isRegisterProcessStartedChange",function(n){return e.eBV(t),e.XpG().isRegisterProcessStarted=n}),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.nI1(15,"async"),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("reservationOptions",e.bMT(1,15,t.reservationOptions$))("email",e.bMT(2,17,t.email$))("username",e.bMT(3,19,t.username$))("first",e.bMT(4,21,t.first$))("last",e.bMT(5,23,t.last$))("lookupAddress",e.bMT(6,25,t.lookupAddress$))("lookupAddressError",e.bMT(7,27,t.lookupAddressError$))("pending",e.bMT(8,29,t.pending$))("errorMessage",e.bMT(9,31,t.error$))("isMultiPage",t.isMobile||e.bMT(10,33,t.reservationOptions$)&&e.bMT(11,35,t.reservationOptions$).enableGuestCheckout&&(e.bMT(12,37,t.isTeetimeSelected$)||e.bMT(13,39,t.isGroupTeetimeSelected$)))("isTeetimeSelected",e.bMT(14,41,t.isTeetimeSelected$))("isGroupTeetimeSelected",e.bMT(15,43,t.isGroupTeetimeSelected$))("isRegisterProcessStarted",t.isRegisterProcessStarted)("isRegisterSSO",t.isRegisterSSO)("captchaErorMessage",t.captchaErorMessage)}}let tt=(()=>{class r{constructor(t,i,n,p,y,C,l,_,R){var L,I;this.store=t,this.storageService=i,this.router=n,this.storeConfiguration=p,this.storeSearchTeetime=y,this.storeTeetime=C,this.translate=l,this.commonService=_,this.isComponentAlive=!0,this.pending$=this.store.pipe((0,g.Lt)(M.wJ)),this.error$=this.store.pipe((0,g.Lt)(M.$h)),this.email$=this.store.pipe((0,g.Lt)(M.z)),this.username$=this.store.pipe((0,g.Lt)(M.lA)),this.first$=this.store.pipe((0,g.Lt)(M.rL)),this.last$=this.store.pipe((0,g.Lt)(M.Dd)),this.lookupAddress$=this.store.pipe((0,g.Lt)(M.pO)),this.lookupAddressError$=this.store.pipe((0,g.Lt)(M.nr)),this.reservationOptions$=this.storeConfiguration.pipe((0,g.Lt)(B.N3)),this.isTeetimeSelected$=this.storeSearchTeetime.pipe((0,g.Lt)(De.JT)).pipe((0,d.T)(s=>null!==s.selectedTeeSheetId)),this.isGroupTeetimeSelected$=this.storeTeetime.pipe((0,g.Lt)(je.bI)).pipe((0,d.T)(s=>null!==s.groupBookings.selectedTeeTimes)),this.isRegisterProcessStarted=!1,this.isMobile=!1,this.isRegisterSSO=!1,R.observe([oe.Rp.Handset]).subscribe(s=>{this.isMobile=s.matches});const E=location.search.substring(1),H=new URLSearchParams(E);if(H.get("returnPath")){const s=new URLSearchParams(decodeURIComponent(H.get("returnPath")));s.get("state")&&s.get("nonce")&&(null===(L=s.get("scope"))||void 0===L?void 0:L.includes("cpssso"))&&(null===(I=s.get("returnUrl"))||void 0===I?void 0:I.includes("cps_sso"))&&(this.store.dispatch(new V.R9(`${this.storageService.retrieve("authorityBaseUrl")}/Account/Login?${H.get("returnPath")}`)),this.isRegisterSSO=!0,this.router.navigate(["auth/register"]))}}ngOnInit(){this.reservationOptions$.pipe((0,K.v)(()=>this.isComponentAlive)).subscribe(t=>{this.reservationOption=t,this.reservationOption.captchaOnBoarding&&setGoogleRecaptchaBadge("visible")}),this.store.dispatch(new A.Ph),this.store.dispatch(new V.u7)}ngOnDestroy(){this.isComponentAlive=!1,this.store.dispatch(new A.VJ),setGoogleRecaptchaBadge("hidden")}onBack(){this.store.pipe((0,K.v)(()=>this.isComponentAlive),(0,g.Lt)(M.Mj)).subscribe(t=>{t?this.store.dispatch(new A.LP({returnUrl:t})):window.history.back()})}onSubmitCreateAccount(t){this.reservationOption.captchaOnBoarding?this.verifyCaptcha(t):this.createAccount(t)}createAccount(t){this.store.dispatch(this.isRegisterSSO?new V.Ts(t):new V.UZ(t))}verifyCaptcha(t){this.captchaErorMessage="",this.isVerifyingCaptcha=!0,grecaptcha.enterprise.ready(()=>function(r,o,t,i){return new(t||(t=Promise))(function(p,y){function C(R){try{_(i.next(R))}catch(L){y(L)}}function l(R){try{_(i.throw(R))}catch(L){y(L)}}function _(R){R.done?p(R.value):function n(p){return p instanceof t?p:new t(function(y){y(p)})}(R.value).then(C,l)}_((i=i.apply(r,o||[])).next())})}(this,void 0,void 0,function*(){try{const i=yield grecaptcha.enterprise.execute(this.reservationOption.captchaSiteKey,{action:Ge.n.RegisterAction}),n=We.q.create().toString();this.commonService.verifyRecaptchaToken(i,Ge.n.RegisterAction,n).pipe((0,zt.j)(()=>this.isVerifyingCaptcha=!1)).subscribe(p=>{p?this.createAccount(Object.assign(Object.assign({},t),{transactionId:n})):this.captchaErorMessage=this.translate.instant("loginForm.siteDetectBotRestrictedAccess")})}catch(i){this.captchaErorMessage=i.message,this.isVerifyingCaptcha=!1}}))}onCityStateLookup(t){this.store.dispatch(new V.HR(t))}onAddressValidate(t){this.store.dispatch(new V.D$(t))}onZipCodeLookup(t){this.store.dispatch(new V.Vz(t))}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il),e.rXU(Jt.n),e.rXU(U.Ix),e.rXU(g.il),e.rXU(g.il),e.rXU(g.il),e.rXU(z.c$),e.rXU(Me.h),e.rXU(oe.QP))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register-page"]],decls:3,vars:3,consts:[["class","registerbox",3,"reservationOptions","email","username","first","last","lookupAddress","lookupAddressError","pending","errorMessage","isMultiPage","isTeetimeSelected","isGroupTeetimeSelected","isRegisterProcessStarted","isRegisterSSO","captchaErorMessage","back","submittedCreateAccount","addressValidate","cityStateLookup","zipCodeLookup","isRegisterProcessStartedChange",4,"ngIf"],[1,"registerbox",3,"reservationOptions","email","username","first","last","lookupAddress","lookupAddressError","pending","errorMessage","isMultiPage","isTeetimeSelected","isGroupTeetimeSelected","isRegisterProcessStarted","isRegisterSSO","captchaErorMessage","back","submittedCreateAccount","addressValidate","cityStateLookup","zipCodeLookup","isRegisterProcessStartedChange"]],template:function(t,i){1&t&&(e.j41(0,"div"),e.DNE(1,li,16,45,"app-register-form",0),e.nI1(2,"async"),e.k0s()),2&t&&(e.R7$(1),e.Y8G("ngIf",e.bMT(2,1,i.reservationOptions$)))},directives:[T.bT,et],pipes:[T.Jj],styles:[".registerbox[_ngcontent-%COMP%]{height:100%}.registerbox-header[_ngcontent-%COMP%]{margin-bottom:15px}.title[_ngcontent-%COMP%]{margin:0 auto;text-align:center;width:100%;display:flex;max-width:none}.full-width[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:red;max-height:300px;overflow:auto}mat-card[_ngcontent-%COMP%]{max-width:1024px}mat-card-header[_ngcontent-%COMP%]{margin:0 auto;margin-top:10px!important;text-align:center}mat-card-content[_ngcontent-%COMP%]{margin-bottom:0}mat-card-actions[_ngcontent-%COMP%]{padding:12px}mat-card-actions[_ngcontent-%COMP%]:last-child{padding-bottom:12px!important}form[_ngcontent-%COMP%]{padding:0 25px}button[_ngcontent-%COMP%]{width:100%;margin:5px 20px!important}"]}),r})();var se=(()=>{return(r=se||(se={})).RegisterRedirect="[Register] RegisterRedirect",r.UpdateMemberInfo="[Register] UpdateMemberInfo",r.GetDisallowRegistrationsMessage="[Register] GetDisallowRegistrationsMessage",se;var r})();class mi{constructor(){this.type=se.UpdateMemberInfo}}class pi{constructor(){this.type=se.GetDisallowRegistrationsMessage}}function di(r,o){if(1&r&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml"),e.nI1(2,"async")),2&r){const t=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,e.bMT(2,3,t.message$)),e.npT)}}function ui(r,o){if(1&r&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml"),e.nI1(2,"async")),2&r){const t=e.XpG(2);e.Y8G("innerHTML",e.bMT(1,1,e.bMT(2,3,t.messageLogin$)),e.npT)}}function gi(r,o){if(1&r&&(e.DNE(0,ui,3,5,"div",7),e.nI1(1,"async")),2&r){const t=e.XpG();e.Y8G("ngIf",e.bMT(1,1,t.messageLogin$))}}let rt=(()=>{class r{constructor(t,i,n){this.store=t,this.router=i,this.route=n,this.message$=this.store.pipe((0,g.Lt)(M.FZ)),this.messageLogin$=this.store.pipe((0,g.Lt)(M.eT)),this.isNotRegister=!1,this.store.pipe((0,g.Lt)(O.pL)).subscribe(p=>{this.returnUrl=p.state.queryParams.returnUrl?decodeURIComponent(p.state.queryParams.returnUrl):null})}ngOnInit(){this.isNotRegister="true"===(this.route.snapshot.queryParams.notregister||"false"),this.isNotRegister||this.store.dispatch(new pi)}onReturnToLogin(){this.router.navigate(["auth/verify-email"],{queryParams:{returnUrl:this.returnUrl}})}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il),e.rXU(U.Ix),e.rXU(U.nX))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-disallow-register"]],decls:10,vars:7,consts:[[2,"display","flex","flex-direction","column"],[2,"flex-grow","1","padding","30px !important"],[3,"innerHTML",4,"ngIf","ngIfElse"],["default",""],[2,"padding","30px"],["mat-flat-button","","color","accent",2,"width","100%","padding","10px",3,"click"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"]],template:function(t,i){if(1&t&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1),e.DNE(2,di,3,5,"div",2),e.nI1(3,"async"),e.DNE(4,gi,2,3,"ng-template",null,3,e.C5r),e.k0s(),e.j41(6,"mat-card-actions",4)(7,"button",5),e.bIt("click",function(){return i.onReturnToLogin()}),e.EFF(8),e.nI1(9,"translate"),e.k0s()()()),2&t){const n=e.sdS(5);e.R7$(2),e.Y8G("ngIf",e.bMT(3,3,i.message$))("ngIfElse",n),e.R7$(6),e.SpI(" ",e.bMT(9,5,"form.returnToLogin")," ")}},directives:[J.RN,J.m2,T.bT,J.YY,_e.$z],pipes:[Je.$,T.Jj,z.D9],styles:["mat-card[_ngcontent-%COMP%]{max-width:1024px;margin:30px auto}"]}),r})();var f=h(31435);let hi=(()=>{class r{transform(t){return t.replace(/_/g," ")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.EJ8({name:"replaceUnderscore",type:r,pure:!0}),r})();function _i(r,o){if(1&r&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26),e.nrm(3,"img",27),e.nI1(4,"image64"),e.k0s()()()),2&r){const t=e.XpG();e.R7$(3),e.Y8G("src",e.bMT(4,1,t.welcomeScreenBannerImage),e.B4B)}}function Ci(r,o){if(1&r&&(e.j41(0,"div",28)(1,"div",29),e.nrm(2,"img",30),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.logoSrc,e.B4B)}}function vi(r,o){1&r&&(e.j41(0,"div",31),e.EFF(1,"\xa0"),e.k0s())}function bi(r,o){1&r&&(e.j41(0,"p",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"loginForm.welcomeBack"),"! "))}function Ii(r,o){1&r&&(e.j41(0,"p",33),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"loginForm.pleaseSignIn")," "))}function yi(r,o){1&r&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"loginForm.welcomeBack"),"! "))}function Ri(r,o){1&r&&(e.j41(0,"p",35),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"loginForm.pleaseSignIn")," "))}function Ti(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"email.emailAddressInvalid"),"."))}function Ei(r,o){if(1&r&&(e.qex(0),e.j41(1,"p",16),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-form-field",36),e.nrm(5,"input",37),e.nI1(6,"translate"),e.k0s(),e.DNE(7,Ti,3,3,"mat-error",19),e.bVm()),2&r){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"email.email")),e.R7$(3),e.FS9("placeholder",e.bMT(6,5,"email.email")),e.R7$(2),e.Y8G("ngIf",t.formLogin.get("email").hasError("email")||t.formLogin.get("email").hasError("pattern"))}}function Si(r,o){1&r&&(e.j41(0,"p",16),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",36),e.nrm(4,"input",38),e.nI1(5,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,2,"username.username")," "),e.R7$(3),e.FS9("placeholder",e.bMT(5,4,"username.username")))}function wi(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Fi(r,o){if(1&r&&(e.j41(0,"div",39),e.EFF(1),e.nI1(2,"translateTag"),e.nI1(3,"replaceUnderscore"),e.nI1(4,"titlecase"),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,1,e.bMT(3,3,e.bMT(4,5,t.errorMessage.error_description)))," ")}}function Mi(r,o){if(1&r&&(e.j41(0,"div")(1,"p",40),e.EFF(2),e.nI1(3,"async"),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,1,t.captchaErrorMessage$))}}function ki(r,o){1&r&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"loginForm.forgetLogin"),"?"))}const Pi=function(){return["/auth/forgot-password"]};let it=(()=>{class r{constructor(t,i,n,p,y,C,l){this.domSanitizer=t,this.authService=i,this.commonService=n,this.translate=p,this.store=C,this._document=l,this.submitted=new e.bkB,this.submittedForgotPassword=new e.bkB,this.logoSrc="",this.isMobile=!1,this.LoginMethod=q.x,this.isVerifyingCaptcha$=this.store.pipe((0,g.Lt)(M.IF)),this.captchaErrorMessage$=this.store.pipe((0,g.Lt)(M.YY)),y.observe([oe.Rp.Handset]).subscribe(_=>{this.isMobile=_.matches})}set pending(t){t?this.formLogin.disable():this.formLogin.enable()}set email(t){this._email=t,this.formLogin.patchValue({email:t}),this._username=t,this.formLogin.patchValue({userName:t}),t&&sessionStorage.setItem(N.L.username,t.trim().toString())}set username(t){this._username=t,this.formLogin.patchValue({userName:t}),t&&sessionStorage.setItem(N.L.username,t.trim().toString())}get reservationOption(){return this._reservationOption}set reservationOption(t){this._reservationOption=t,this._reservationOption.captchaOnBoarding&&setGoogleRecaptchaBadge("visible"),this.formLogin=new m.gE(t.loginMethod===q.x.Email?{email:new m.MJ(this._email,[m.k0.required,m.k0.email,m.k0.pattern(fe.R.Email)]),password:new m.MJ("",m.k0.required)}:{userName:new m.MJ(this._username,m.k0.required),password:new m.MJ("",m.k0.required)})}ngOnInit(){const t=sessionStorage.getItem(N.L.username);if(t){const i=this.reservationOption.loginMethod;i===q.x.Email?this.formLogin.patchValue({email:t}):i===q.x.Username&&this.formLogin.patchValue({userName:t}),this.formLogin.updateValueAndValidity()}}ngOnDestroy(){setGoogleRecaptchaBadge("hidden")}onClickSignIn(){if(this.reservationOption.captchaOnBoarding)try{this.store.dispatch(new S.Y),this.verifyCaptcha()}catch(t){this.store.dispatch(new f.oX(t.message))}else this.submit()}verifyCaptcha(){grecaptcha.enterprise.ready(()=>function(r,o,t,i){return new(t||(t=Promise))(function(p,y){function C(R){try{_(i.next(R))}catch(L){y(L)}}function l(R){try{_(i.throw(R))}catch(L){y(L)}}function _(R){R.done?p(R.value):function n(p){return p instanceof t?p:new t(function(y){y(p)})}(R.value).then(C,l)}_((i=i.apply(r,o||[])).next())})}(this,void 0,void 0,function*(){try{const t=yield grecaptcha.enterprise.execute(this.reservationOption.captchaSiteKey,{action:Ge.n.LoginAction}),i=We.q.create().toString();this.commonService.verifyRecaptchaToken(t,Ge.n.LoginAction,i).subscribe(n=>{n?this.submit(i):this.store.dispatch(new f.oX(this.translate.instant("loginForm.siteDetectBotRestrictedAccess")))})}catch(t){this.store.dispatch(new f.oX(t.message))}}))}ngAfterViewInit(){this.getWelcomeScreenBannerImage(),setTimeout(()=>this.setScrollTo())}setScrollTo(){let t=document.getElementById("page-wrapper");t||(t=this._document.getElementById("#page-wrapper")),null==t||t.scrollTo({top:-1}),null==t||t.scrollIntoView({block:"start"})}submit(t){this.formLogin.valid&&this.submitted.emit(Object.assign(Object.assign({},this.formLogin.value),{transactionId:t}))}getWelcomeScreenBannerImage(){this.authService.getWelcomeScreenBannerImage().pipe((0,xe.s)(1)).subscribe(t=>{this.welcomeScreenBannerImage=t,this.logoSrc="assets/images/cps_logo_large_transparent.png"})}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(ze.up),e.rXU(he),e.rXU(Me.h),e.rXU(z.c$),e.rXU(oe.QP),e.rXU(g.il),e.rXU(T.qQ))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-login-form"]],inputs:{pending:"pending",errorMessage:"errorMessage",email:"email",username:"username",reservationOption:"reservationOption"},outputs:{submitted:"submitted",submittedForgotPassword:"submittedForgotPassword"},decls:39,vars:35,consts:[[1,"container"],["class","img-container",4,"ngIf","ngIfElse"],["logo",""],[1,"login-form","right-side"],["style","margin-top: 1vh",4,"ngIf"],[1,"right-side-container"],[2,"margin-bottom","30px"],["class","title-text","style","color: #656363",4,"ngIf"],["class","title-text",4,"ngIf"],["class","title-text text-center","style","color: #656363",4,"ngIf"],["class","title-text text-center",4,"ngIf"],[2,"padding-top","0px"],[3,"formGroup","ngSubmit"],[2,"margin-bottom","2em"],[4,"ngIf","ngIfElse"],["usernameForm",""],[2,"margin-bottom","5px"],["appearance","outline"],["matInput","","type","password","name","password","formControlName","password","appAutofocus","","autofocus","",3,"placeholder"],[4,"ngIf"],["class","error-message","style","margin-top: 2em; margin-bottom: -2em",4,"ngIf"],["type","submit","mat-raised-button","","color","accent",1,"event-wrapper",2,"width","100%","padding","10px",3,"disabled","click"],[1,"text-center",2,"color","#b6b6b6"],["routerLinkActive","router-link-active",2,"cursor","pointer","color","var(--primary-color)",3,"routerLink"],[1,"img-container"],[1,"img"],[1,"img-content"],[3,"src"],[1,"logo-side"],[1,"logo-side-container"],[1,"logoimg",3,"src"],[2,"margin-top","1vh"],[1,"title-text",2,"color","#656363"],[1,"title-text"],[1,"title-text","text-center",2,"color","#656363"],[1,"title-text","text-center"],["appearance","none"],["matInput","","name","email","formControlName","email","type","email","readonly","",3,"placeholder"],["matInput","","name","username","formControlName","userName","readonly","",3,"placeholder"],[1,"error-message",2,"margin-top","2em","margin-bottom","-2em"],[1,"mat-error"]],template:function(t,i){if(1&t&&(e.j41(0,"div",0),e.DNE(1,_i,5,3,"div",1),e.DNE(2,Ci,3,1,"ng-template",null,2,e.C5r),e.j41(4,"div",3),e.DNE(5,vi,2,0,"div",4),e.j41(6,"div",5)(7,"div",6),e.DNE(8,bi,3,3,"p",7),e.DNE(9,Ii,3,3,"p",8),e.DNE(10,yi,3,3,"p",9),e.DNE(11,Ri,3,3,"p",10),e.k0s(),e.j41(12,"div",11)(13,"form",12),e.bIt("ngSubmit",function(){return i.submit()}),e.j41(14,"div",13),e.DNE(15,Ei,8,7,"ng-container",14),e.DNE(16,Si,6,6,"ng-template",null,15,e.C5r),e.j41(18,"p",16),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"mat-form-field",17),e.nrm(22,"input",18),e.nI1(23,"translate"),e.DNE(24,wi,3,3,"mat-error",19),e.k0s(),e.DNE(25,Fi,5,7,"div",20),e.k0s(),e.DNE(26,Mi,4,3,"div",19),e.nI1(27,"async"),e.j41(28,"div")(29,"button",21),e.bIt("click",function(){return i.onClickSignIn()}),e.nI1(30,"async"),e.EFF(31),e.nI1(32,"uppercase"),e.nI1(33,"translate"),e.k0s(),e.j41(34,"p",22),e.DNE(35,ki,3,3,"span",19),e.j41(36,"a",23),e.EFF(37),e.nI1(38,"translate"),e.k0s()()()()()()()()),2&t){const n=e.sdS(3),p=e.sdS(17);e.R7$(1),e.Y8G("ngIf",i.welcomeScreenBannerImage)("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",i.isMobile),e.R7$(3),e.Y8G("ngIf",!i.isMobile),e.R7$(1),e.Y8G("ngIf",!i.isMobile),e.R7$(1),e.Y8G("ngIf",i.isMobile),e.R7$(1),e.Y8G("ngIf",i.isMobile),e.R7$(2),e.Y8G("formGroup",i.formLogin),e.R7$(2),e.Y8G("ngIf",null==i.formLogin?null:i.formLogin.get("email"))("ngIfElse",p),e.R7$(4),e.SpI(" ",e.bMT(20,20,"password.password")," "),e.R7$(3),e.FS9("placeholder",e.bMT(23,22,"password.password")),e.R7$(2),e.Y8G("ngIf",i.formLogin.get("password").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.errorMessage),e.R7$(1),e.Y8G("ngIf",e.bMT(27,24,i.captchaErrorMessage$)),e.R7$(3),e.Y8G("disabled",!i.formLogin.valid||e.bMT(30,26,i.isVerifyingCaptcha$)),e.R7$(2),e.SpI(" ",e.bMT(32,28,e.bMT(33,30,"header.signIn"))," "),e.R7$(4),e.Y8G("ngIf",!i.isMobile),e.R7$(1),e.Y8G("routerLink",e.lJ4(34,Pi)),e.R7$(1),e.SpI(" ",e.bMT(38,32,"password.passwordRecovery"),"")}},directives:[T.bT,m.qT,m.cb,m.j4,Q.rl,Te.fg,m.me,m.BC,m.JD,Q.TL,Oe,_e.$z,U.$T,U.wQ],pipes:[Ae.A,z.D9,Ye.x,hi,T.PV,T.Jj,T.Pc],styles:[".page-content{padding:0!important}.right-side-container[_ngcontent-%COMP%]{max-width:350px;margin:0 auto;margin-top:10vh}.right-side[_ngcontent-%COMP%]{width:60%;float:right;background-color:#fff;min-height:calc(100vh - 8em)}.logo-side-container[_ngcontent-%COMP%]{max-width:150px;margin:0 auto;margin-top:calc(50vh - 8em);padding-right:262px}.logo-side[_ngcontent-%COMP%]{width:40%;float:left;min-height:calc(100vh - 10em)}.title-text[_ngcontent-%COMP%]{font-size:30px;font-weight:700;margin-top:0;margin-bottom:0}button[_ngcontent-%COMP%]{border-radius:8px;font-weight:700;width:100%;padding:5px;margin-bottom:10px}.logoimg[_ngcontent-%COMP%]{height:60px}  .login-form .mat-form-field-appearance-outline .mat-form-field-outline{color:#ccc!important;opacity:.5!important;border-width:thin;border-radius:.5em!important}  .login-form .mat-form-field-outline-start{border-radius:8px 0 0 8px!important;min-width:28px!important}  .login-form .mat-form-field-outline-end{border-radius:0 8px 8px 0!important}.mat-input-element[_ngcontent-%COMP%]{font-size:14px!important;height:100%}.mat-input-element[_ngcontent-%COMP%]:read-only{cursor:default;padding-left:.8em;color:#67757c}  .login-form .mat-form-field-appearance-outline .mat-form-field-infix{padding:.8em 0!important;margin-top:-.5em}@media screen and (max-width: 768px){.logo-side[_ngcontent-%COMP%]{display:none}.right-side[_ngcontent-%COMP%]{width:100%}.right-side-container[_ngcontent-%COMP%]{margin-top:10vh}.img-container[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 480px){.right-side-container[_ngcontent-%COMP%]{width:100%;margin-top:5vh;padding:10px}.title-text[_ngcontent-%COMP%]{font-size:26px}.img-container[_ngcontent-%COMP%]{display:none}}  .login-form .mat-form-field-wrapper{margin-bottom:-1em!important}.error-message[_ngcontent-%COMP%]{color:#e91e63;font-size:75%!important;padding:0 1em}.img-container[_ngcontent-%COMP%]{height:calc(100vh - 8em);position:relative;width:40%;float:left}.img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]{display:contents}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}"]}),r})(),ot=(()=>{class r{constructor(t){this.store=t,this.pending$=this.store.pipe((0,g.Lt)(M.i$)),this.error$=this.store.pipe((0,g.Lt)(M.X2)),this.email$=this.store.pipe((0,g.Lt)(O.kb)),this.username$=this.store.pipe((0,g.Lt)(O.GG)),this.reservationOption$=this.store.pipe((0,g.Lt)(B.N3))}onPopState(){this.store.dispatch(new S.OG)}ngOnInit(){this.store.dispatch(new A.Ph),this.store.dispatch(new f.yx)}ngOnDestroy(){this.store.dispatch(new A.VJ)}onSubmitted(t){this.store.dispatch(new S.az(t))}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-login-page"]],hostBindings:function(t,i){1&t&&e.bIt("popstate",function(p){return i.onPopState(p)},!1,e.tSv)},decls:6,vars:15,consts:[[3,"reservationOption","email","username","pending","errorMessage","submitted"]],template:function(t,i){1&t&&(e.j41(0,"app-login-form",0),e.bIt("submitted",function(p){return i.onSubmitted(p)}),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.k0s()),2&t&&e.Y8G("reservationOption",e.bMT(1,5,i.reservationOption$))("email",e.bMT(2,7,i.email$))("username",e.bMT(3,9,i.username$))("pending",e.bMT(4,11,i.pending$))("errorMessage",e.bMT(5,13,i.error$))},directives:[it],pipes:[T.Jj],encapsulation:2}),r})();const $i=function(){return{number:10}};function xi(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.i5U(2,1,"form.minLength",e.lJ4(4,$i))," "))}function Oi(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.requireUpperLowerLetter")," "))}function Ai(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.requireNumeric")," "))}function Gi(r,o){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.requireSpecialChar")," "))}function Li(r,o){if(1&r&&(e.DNE(0,Oi,3,3,"div",8),e.DNE(1,Ai,3,3,"div",8),e.DNE(2,Gi,3,3,"div",8)),2&r){const t=e.XpG(2);let i,n,p;e.Y8G("ngIf",!(null!=(i=t.form.get("registerPassword").getError("requirePattern"))&&i.alphabetLower&&null!=(i=t.form.get("registerPassword").getError("requirePattern"))&&i.alphabetUpper)),e.R7$(1),e.Y8G("ngIf",!(null!=(n=t.form.get("registerPassword").getError("requirePattern"))&&n.numeric)),e.R7$(1),e.Y8G("ngIf",!(null!=(p=t.form.get("registerPassword").getError("requirePattern"))&&p.specialChar))}}function Ui(r,o){if(1&r&&(e.j41(0,"mat-error",11),e.DNE(1,xi,3,5,"div",8),e.DNE(2,Li,3,3,"ng-template",12),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",t.form.get("registerPassword").hasError("minlength")),e.R7$(1),e.Y8G("ngIf",t.form.get("registerPassword").hasError("requirePattern"))}}function Ni(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"password.passwordNotMatch")))}function Di(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"password.passwordNotMatch")))}let nt=(()=>{class r{constructor(t){this.submitted=new e.bkB,this.form=t.group({registerPassword:["",[m.k0.required,m.k0.minLength(10),Le.x.validatePattern]],registerConfirmPassword:["",[m.k0.required,m.k0.minLength(10)]]},{validator:Le.x.equalValueValidator("registerPassword","registerConfirmPassword")})}get encryptedEmail(){return this._encryptedEmail}set encryptedEmail(t){this._encryptedEmail=t,this.email=b.H.decodeBase64(t)}get encryptedUsername(){return this._encryptedUsername}set encryptedUsername(t){this._encryptedUsername=t,this.username=b.H.decodeBase64(t)}submit(){this.form.valid&&this.submitted.emit({email:this.email,encryptedEmail:this.encryptedEmail,newPassword:this.form.controls.registerPassword.value,confirmPassword:this.form.controls.registerConfirmPassword.value,url:window.location.href,encryptedUsername:this.encryptedUsername})}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(m.ok))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-reset-password-form"]],inputs:{encryptedEmail:"encryptedEmail",encryptedUsername:"encryptedUsername"},outputs:{submitted:"submitted"},decls:44,vars:30,consts:[[1,"reset-password-box"],[1,"full-width"],["colspan","2"],["matInput","","disabled","true",3,"placeholder","value"],[3,"formGroup","ngSubmit"],["type","password","matInput","","formControlName","registerPassword","required","",3,"placeholder"],["class","password-error","style","top: -1em; padding: 0;",4,"ngIf"],["type","password","matInput","","formControlName","registerConfirmPassword","required","",3,"placeholder"],[4,"ngIf"],["colspan","2",1,"content-center"],["mat-raised-button","","color","accent",1,"mr-5",3,"disabled"],[1,"password-error",2,"top","-1em","padding","0"],[3,"ngIf"]],template:function(t,i){1&t&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"mat-card-subtitle"),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"mat-card-header")(9,"mat-card-title"),e.EFF(10),e.nI1(11,"translate"),e.k0s()(),e.j41(12,"mat-card-content")(13,"table",1)(14,"tr")(15,"td",2)(16,"mat-form-field",1),e.nrm(17,"input",3),e.nI1(18,"translate"),e.k0s()()()()(),e.j41(19,"mat-card-header")(20,"mat-card-title"),e.EFF(21),e.nI1(22,"translate"),e.k0s()(),e.j41(23,"mat-card-content")(24,"form",4),e.bIt("ngSubmit",function(){return i.submit()}),e.j41(25,"table",1)(26,"tr")(27,"td",2)(28,"mat-form-field",1),e.nrm(29,"input",5),e.nI1(30,"translate"),e.k0s(),e.DNE(31,Ui,3,2,"mat-error",6),e.k0s()(),e.j41(32,"tr")(33,"td",2)(34,"mat-form-field",1),e.nrm(35,"input",7),e.nI1(36,"translate"),e.DNE(37,Ni,3,3,"mat-error",8),e.DNE(38,Di,3,3,"mat-error",8),e.k0s()()(),e.j41(39,"tr")(40,"td",9)(41,"button",10),e.EFF(42),e.nI1(43,"translate"),e.k0s()()()()()()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,14,"resetPasswordForm.setupPassword")),e.R7$(3),e.SpI("",e.bMT(7,16,"resetPasswordForm.enterCustomerEmail"),"."),e.R7$(4),e.JRh(e.bMT(11,18,"resetPasswordForm.accountInformation")),e.R7$(7),e.FS9("placeholder",e.bMT(18,20,i.username?"resetPasswordForm.customerUsername":"resetPasswordForm.customerEmail")),e.Y8G("value",i.email||i.username),e.R7$(4),e.JRh(e.bMT(22,22,"resetPasswordForm.enterNewPassword")),e.R7$(3),e.Y8G("formGroup",i.form),e.R7$(5),e.FS9("placeholder",e.bMT(30,24,"password.password")),e.R7$(2),e.Y8G("ngIf",!i.form.get("registerPassword").valid),e.R7$(4),e.FS9("placeholder",e.bMT(36,26,"password.confirmPassword")),e.R7$(2),e.Y8G("ngIf",i.form.get("registerConfirmPassword").hasError("minlength")),e.R7$(1),e.Y8G("ngIf",i.form.get("registerConfirmPassword").hasError("equalValue")),e.R7$(3),e.Y8G("disabled",!i.form.valid),e.R7$(1),e.SpI(" ",e.bMT(43,28,"form.submit")," "))},directives:[J.RN,J.MM,J.dh,J.Lc,J.m2,Q.rl,Te.fg,m.qT,m.cb,m.j4,m.me,m.BC,m.JD,m.YS,T.bT,Q.TL,_e.$z],pipes:[z.D9],styles:[".reset-password-box[_ngcontent-%COMP%]{max-width:450px;margin:20px auto 0;padding:20px}.full-width[_ngcontent-%COMP%]{width:100%}.mr-5[_ngcontent-%COMP%]{margin-right:5px}.error-message[_ngcontent-%COMP%]{color:red}"]}),r})(),st=(()=>{class r{constructor(t,i){this.store=t,this.oauthService=i,this.reservationOptions$=this.store.pipe((0,g.Lt)(B.N3)),this.encryptedEmail$=this.store.pipe((0,g.Lt)(M.Wm)),this.encryptedUsername$=this.store.pipe((0,g.Lt)(M.QL))}ngOnInit(){this.store.dispatch(new A.Ph),this.oauthService.configure(Xe.a),this.oauthService.loadDiscoveryDocument(),this.reservationOptions$.subscribe(t=>{if(t){const i=decodeURIComponent(window.location.href);this.store.dispatch(new Ie.hh({url:i,username:b.H.getQueryParamFromMalformedURL(i,x.u.Username),email:b.H.getQueryParamFromMalformedURL(i,x.u.Email)}))}})}ngOnDestroy(){this.store.dispatch(new A.VJ)}onSubmit(t){this.store.dispatch(new Ie.RO(t))}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il),e.rXU(Re.TC))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-reset-password-page"]],decls:3,vars:6,consts:[[3,"encryptedEmail","encryptedUsername","submitted"]],template:function(t,i){1&t&&(e.j41(0,"app-reset-password-form",0),e.bIt("submitted",function(p){return i.onSubmit(p)}),e.nI1(1,"async"),e.nI1(2,"async"),e.k0s()),2&t&&e.Y8G("encryptedEmail",e.bMT(1,2,i.encryptedEmail$))("encryptedUsername",e.bMT(2,4,i.encryptedUsername$))},directives:[nt],pipes:[T.Jj],encapsulation:2}),r})(),at=(()=>{class r{constructor(t,i,n){this.authService=t,this.store=i,this._renderer2=n}ngOnInit(){let t=window.location.hash;t||(t=window.location.search),t&&(t.includes("&state=facebook")?this.authService.facebookAuthorizedCallback():t.includes("&state=google")?(this.addScriptToCloseGoogleSignInPopup(window.location.href),this.authService.googleAuthorizedCallback()):t.includes("state=idme")?this.authService.idmeAuthorizedCallback():t.includes("cpssso")?this.authService.cpsssoAuthorizeCallback():this.authService.appleAuthorizedCallback(),t.includes("&user=")&&this.store.dispatch(new mi))}addScriptToCloseGoogleSignInPopup(t){const i=this._renderer2.createElement("script");i.text=`\n    const successUrl = "${t}";\n\n    // Communicate with the parent window\n    if (window.opener) {\n      window.opener.location.href = successUrl; // Redirect the parent window\n      window.close(); // Close the popup\n    } else {\n      // Fallback: If there's no parent window, just redirect within the popup\n      window.location.href = successUrl;\n    }\n    `,this._renderer2.appendChild(document.body,i)}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(Ve.H),e.rXU(g.il),e.rXU(e.sFG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-redirect"]],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})();const ji=["emailInput"],Vi=["usernameInput"];function Bi(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.JRh(e.bMT(2,1,"form.required")))}function Hi(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"email.emailAddressInvalid"),"."))}function Yi(r,o){if(1&r&&(e.qex(0),e.j41(1,"p",11),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-form-field",12),e.nrm(5,"input",19,20),e.nI1(7,"translate"),e.DNE(8,Bi,3,3,"mat-error",14),e.DNE(9,Hi,3,3,"mat-error",14),e.k0s(),e.bVm()),2&r){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,5,"email.email")),e.R7$(3),e.FS9("placeholder",e.bMT(7,7,"email.email")),e.Y8G("readonly",t.isEmailReadOnly),e.R7$(3),e.Y8G("ngIf",t.formGuestCheckout.get("email").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formGuestCheckout.get("email").hasError("email")||t.formGuestCheckout.get("email").hasError("pattern"))}}function qi(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"form.required")," "))}function Xi(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"username.usernameInvalid"),". "))}function zi(r,o){if(1&r&&(e.j41(0,"p",11),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"mat-form-field",12),e.nrm(4,"input",21,10),e.nI1(6,"translate"),e.DNE(7,qi,3,3,"mat-error",14),e.DNE(8,Xi,3,3,"mat-error",14),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,5,"username.username")," "),e.R7$(3),e.FS9("placeholder",e.bMT(6,7,"username.username")),e.Y8G("readonly",t.isUsernameReadOnly),e.R7$(3),e.Y8G("ngIf",t.formGuestCheckout.get("username").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formGuestCheckout.get("username").hasError("username"))}}function Ji(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"form.required")," "))}function Ki(r,o){1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(1),e.SpI("",e.bMT(2,1,"form.required")," "))}function Qi(r,o){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translateTag"),e.k0s()),2&r){const t=o.$implicit;e.R7$(1),e.SpI(" ",e.i5U(2,1,t,"error")," ")}}function Wi(r,o){if(1&r&&(e.j41(0,"p",24),e.DNE(1,Qi,3,4,"span",25),e.k0s()),2&r){const t=o.$implicit;e.R7$(1),e.Y8G("ngForOf",t)}}function Zi(r,o){if(1&r&&(e.j41(0,"div",22),e.DNE(1,Wi,2,1,"p",23),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.modelError)}}let ct=(()=>{class r{constructor(t,i){this.fb=t,this._document=i,this.isAlive=!0,this.LoginMethod=q.x,this.isEmailReadOnly=!1,this.isUsernameReadOnly=!1,this.modelError=[],this.back=new e.bkB,this.submittedGuestCheckout=new e.bkB}get reservationOptions(){return this._reservationOptions}set reservationOptions(t){t&&(this._reservationOptions=t,this.initForm(),this.applyRequiredFormControls(),setTimeout(()=>this.setScrollTo(),100))}set email(t){t&&(this.formGuestCheckout.patchValue({email:t}),this.isEmailReadOnly=!0)}set username(t){t&&(this.formGuestCheckout.patchValue({username:t}),this.isUsernameReadOnly=!0)}set first(t){t&&this.formGuestCheckout.patchValue({firstName:t})}set last(t){t&&this.formGuestCheckout.patchValue({lastName:t})}set pending(t){t?this.formGuestCheckout.disable():this.formGuestCheckout.enable()}set errorMessage(t){if(t){const i=[];if(t instanceof Error)i.push([t.message]);else for(const n in t)i.push(t[n]);this.modelError=i}}submitGuestCheckout(){this.formGuestCheckout.valid&&(this.modelError=[],this.submittedGuestCheckout.emit(this.formGuestCheckout.value))}onInputFirstName(t){t.target.value=t.target.value.replace(/(?:^|\s)\S/g,i=>i.toUpperCase())}onInputLastName(t){t.target.value=t.target.value.replace(/(?:^|\s)\S/g,i=>i.toUpperCase())}ngOnDestroy(){this.isAlive=!1}ngAfterViewInit(){this.inputClearErrorMessage()}setScrollTo(){let t=document.getElementById("page-wrapper");t||(t=this._document.getElementById("#page-wrapper")),null==t||t.scrollTo({top:-1}),null==t||t.scrollIntoView({block:"start"})}initForm(){this.formGuestCheckout=this.fb.group({firstName:[""],lastName:[""]}),this._reservationOptions.loginMethod===q.x.Email?this.formGuestCheckout.addControl("email",new m.MJ("",[m.k0.email,m.k0.required,m.k0.pattern(fe.R.Email)])):this.formGuestCheckout.addControl("username",new m.MJ("",[m.k0.required]))}applyRequiredFormControls(){this.formGuestCheckout.controls.firstName.setValidators(m.k0.required),this.formGuestCheckout.controls.lastName.setValidators(m.k0.required),this.formGuestCheckout.updateValueAndValidity()}inputClearErrorMessage(){var t;this.inputSource=(0,ke.R)(this.reservationOptions.loginMethod===q.x.Email?this.emailInput.nativeElement:this.usernameInput.nativeElement,"keydown"),null===(t=this.inputSource)||void 0===t||t.pipe((0,K.v)(()=>this.isAlive),(0,te.p)(()=>this.modelError.length>0)).subscribe(()=>this.modelError=[])}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(m.ok),e.rXU(T.qQ))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-guest-form"]],viewQuery:function(t,i){if(1&t&&(e.GBs(ji,5),e.GBs(Vi,5)),2&t){let n;e.mGM(n=e.lsd())&&(i.emailInput=n.first),e.mGM(n=e.lsd())&&(i.usernameInput=n.first)}},inputs:{reservationOptions:"reservationOptions",email:"email",username:"username",first:"first",last:"last",pending:"pending",errorMessage:"errorMessage"},outputs:{back:"back",submittedGuestCheckout:"submittedGuestCheckout"},decls:38,vars:31,consts:[[1,"container"],[1,"guest-form","right-side"],[1,"right-side-container"],[2,"margin-bottom","20px"],[1,"title-text"],[1,"title-text",2,"color","#656363","font-size","16px"],[2,"padding-top","0px"],[3,"formGroup"],[2,"margin-bottom","3em"],[4,"ngIf","ngIfElse"],["usernameInput",""],[2,"margin-bottom","5px"],["appearance","outline"],["matInput","","formControlName","firstName","required","",3,"placeholder","input"],[4,"ngIf"],["matInput","","formControlName","lastName","required","",3,"placeholder","input"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","accent",1,"event-wrapper",3,"click"],["appAutofocus","","matInput","","formControlName","email","required","","autofocus","",3,"placeholder","readonly"],["emailInput",""],["appAutofocus","","matInput","","formControlName","username","required","","autofocus","",3,"placeholder","readonly"],[1,"error-message"],["style","margin-top: 0rem",4,"ngFor","ngForOf"],[2,"margin-top","0rem"],[4,"ngFor","ngForOf"]],template:function(t,i){if(1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"p",5),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"div",6)(11,"form",7)(12,"div",8),e.DNE(13,Yi,10,9,"ng-container",9),e.DNE(14,zi,9,9,"ng-template",null,10,e.C5r),e.j41(16,"p",11),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"mat-form-field",12)(20,"input",13),e.bIt("input",function(p){return i.onInputFirstName(p)}),e.nI1(21,"translate"),e.k0s(),e.DNE(22,Ji,3,3,"mat-error",14),e.k0s(),e.j41(23,"p",11),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"mat-form-field",12)(27,"input",15),e.bIt("input",function(p){return i.onInputLastName(p)}),e.nI1(28,"translate"),e.k0s(),e.DNE(29,Ki,3,3,"mat-error",14),e.k0s()(),e.j41(30,"div",8),e.DNE(31,Zi,2,1,"div",16),e.j41(32,"button",17),e.bIt("click",function(){return i.submitGuestCheckout()}),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.j41(35,"button",18),e.bIt("click",function(){return i.back.emit()}),e.EFF(36),e.nI1(37,"translate"),e.k0s()()()()()()()),2&t){const n=e.sdS(15);e.R7$(5),e.JRh(e.bMT(6,15,"guestForm.checkoutAsGuest")),e.R7$(3),e.SpI(" ",e.bMT(9,17,"guestForm.needMoreDetails"),". "),e.R7$(3),e.Y8G("formGroup",i.formGuestCheckout),e.R7$(2),e.Y8G("ngIf",(null==i.reservationOptions?null:i.reservationOptions.loginMethod)===i.LoginMethod.Email)("ngIfElse",n),e.R7$(4),e.JRh(e.bMT(18,19,"name.firstName")),e.R7$(3),e.FS9("placeholder",e.bMT(21,21,"name.firstName")),e.R7$(2),e.Y8G("ngIf",i.formGuestCheckout.get("firstName").hasError("required")),e.R7$(2),e.JRh(e.bMT(25,23,"name.lastName")),e.R7$(3),e.FS9("placeholder",e.bMT(28,25,"name.lastName")),e.R7$(2),e.Y8G("ngIf",i.formGuestCheckout.get("lastName").hasError("required")),e.R7$(2),e.Y8G("ngIf",i.modelError.length>0),e.R7$(1),e.Y8G("disabled",!i.formGuestCheckout.valid),e.R7$(1),e.SpI(" ",e.bMT(34,27,"guestForm.guestCheckout")," "),e.R7$(3),e.SpI(" ",e.bMT(37,29,"form.back")," ")}},directives:[m.qT,m.cb,m.j4,T.bT,Q.rl,Te.fg,m.me,Oe,m.BC,m.JD,m.YS,Q.TL,T.Sq,_e.$z],pipes:[z.D9,Ye.x],styles:[".page-content{padding:0!important}.right-side-container[_ngcontent-%COMP%]{max-width:350px;margin:0 auto;margin-top:4vh}.right-side[_ngcontent-%COMP%]{width:60%;float:right;background-color:#fff;min-height:100vh}.title-text[_ngcontent-%COMP%]{font-size:30px;font-weight:700;margin-top:0;margin-bottom:0}button[_ngcontent-%COMP%]{border-radius:8px;font-weight:700;width:100%;padding:5px;margin-bottom:10px}  .guest-form .mat-form-field-appearance-outline .mat-form-field-outline{color:#ccc!important;opacity:.5!important;border-width:thin;border-radius:.5em!important}  .guest-form .mat-form-field-outline-start{border-radius:8px 0 0 8px!important;min-width:28px!important}  .guest-form .mat-form-field-outline-end{border-radius:0 8px 8px 0!important}.mat-input-element[_ngcontent-%COMP%]{font-size:14px!important;height:100%}.mat-input-element[_ngcontent-%COMP%]:read-only{cursor:default;padding-left:.8em;color:#67757c}  .guest-form .mat-form-field-appearance-outline .mat-form-field-infix{padding:.8em 0!important;margin-top:-.5em}@media screen and (max-width: 768px){.right-side[_ngcontent-%COMP%]{width:100%}.right-side-container[_ngcontent-%COMP%]{margin-top:10vh}}@media screen and (max-width: 480px){.right-side-container[_ngcontent-%COMP%]{width:100%;margin-top:5vh;padding:10px}.title-text[_ngcontent-%COMP%]{font-size:26px}}  .guest-form .mat-form-field-wrapper{margin-bottom:-1em!important}.error-message[_ngcontent-%COMP%]{color:#e91e63;font-size:75%!important;padding:0 1em}  .guest-form .mat-icon-button{left:8px}ul#strengthBar[_ngcontent-%COMP%]{display:inline;list-style:none;margin:0 0 0 15px;padding:0;vertical-align:2px}"]}),r})();var D=h(56672),Ce=h(88627);function eo(r,o){if(1&r&&(e.j41(0,"div",4)(1,"div",5)(2,"div",6),e.nrm(3,"img",7),e.nI1(4,"image64"),e.k0s()()()),2&r){const t=e.XpG();e.R7$(3),e.Y8G("src",e.bMT(4,1,t.welcomeScreenBannerImage),e.B4B)}}function to(r,o){if(1&r&&(e.j41(0,"div",8)(1,"div",9),e.nrm(2,"img",10),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.logoSrc,e.B4B)}}function ro(r,o){if(1&r){const t=e.RV6();e.j41(0,"app-guest-form",11),e.bIt("back",function(n){return e.eBV(t),e.XpG().onBack(n)})("submittedGuestCheckout",function(n){return e.eBV(t),e.XpG().onSubmitGuestCheckout(n)}),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("reservationOptions",e.bMT(1,7,t.reservationOptions$))("email",e.bMT(2,9,t.email$))("username",e.bMT(3,11,t.username$))("first",e.bMT(4,13,t.first$))("last",e.bMT(5,15,t.last$))("pending",e.bMT(6,17,t.pending$))("errorMessage",e.bMT(7,19,t.error$))}}let lt=(()=>{class r{constructor(t,i,n,p,y,C){this.store=t,this.storeConfiguration=i,this.storeSearchTeetime=n,this.storeTeetime=p,this.authService=y,this.pending$=this.store.pipe((0,g.Lt)(M.wJ)),this.error$=this.store.pipe((0,g.Lt)(M.$h)),this.email$=this.store.pipe((0,g.Lt)(M.z)),this.username$=this.store.pipe((0,g.Lt)(M.lA)),this.first$=this.store.pipe((0,g.Lt)(M.rL)),this.last$=this.store.pipe((0,g.Lt)(M.Dd)),this.reservationOptions$=this.storeConfiguration.pipe((0,g.Lt)(B.N3)),this.isTeetimeSelected$=this.storeSearchTeetime.pipe((0,g.Lt)(De.JT),(0,d.T)(l=>null!==l.selectedTeeSheetId)),this.isGroupTeetimeSelected$=this.storeTeetime.pipe((0,g.Lt)(je.bI),(0,d.T)(l=>null!==l.groupBookings.selectedTeeTimes)),this.isMobile=!1,C.observe([oe.Rp.Handset]).subscribe(l=>{this.isMobile=l.matches})}ngOnInit(){this.store.dispatch(new A.Ph)}ngOnDestroy(){this.store.dispatch(new A.VJ)}ngAfterViewInit(){this.getWelcomeScreenBannerImage()}onBack(){this.store.dispatch(new D.ZD)}onSubmitGuestCheckout(t){this.store.dispatch(new D.of({player:this.mapToPlayer(t),isGuestCheckout:!0}))}mapToPlayer(t){return{acct:"0",firstName:t.firstName,lastName:t.lastName,classCode:Ce.B.DEFAULT_CLASS_CODE,golferId:0,playerId:0,dependentId:0,email:t.email,username:t.username,encryptedEmail:null,storeId:0,isIncludeRider:!1,fullName:t.firstName+" "+t.lastName,isAdded:!1,isGuestOf:!1}}getWelcomeScreenBannerImage(){this.authService.getWelcomeScreenBannerImage().pipe((0,xe.s)(1)).subscribe(t=>{this.welcomeScreenBannerImage=t,this.logoSrc="assets/images/cps_logo_large_transparent.png"})}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il),e.rXU(g.il),e.rXU(g.il),e.rXU(g.il),e.rXU(he),e.rXU(oe.QP))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-guest-checkout-page"]],decls:9,vars:11,consts:[[1,"guest-page"],["class","img-container",4,"ngIf","ngIfElse"],["logo",""],["class","registerbox",3,"reservationOptions","email","username","first","last","pending","errorMessage","back","submittedGuestCheckout",4,"ngIf"],[1,"img-container"],[1,"img"],[1,"img-content"],[3,"src"],[1,"logo-side"],[1,"logo-side-container"],[1,"logoimg",3,"src"],[1,"registerbox",3,"reservationOptions","email","username","first","last","pending","errorMessage","back","submittedGuestCheckout"]],template:function(t,i){if(1&t&&(e.j41(0,"div",0),e.DNE(1,eo,5,3,"div",1),e.DNE(2,to,3,1,"ng-template",null,2,e.C5r),e.DNE(4,ro,8,21,"app-guest-form",3),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.k0s()),2&t){const n=e.sdS(3);e.R7$(1),e.Y8G("ngIf",i.welcomeScreenBannerImage)("ngIfElse",n),e.R7$(3),e.Y8G("ngIf",e.bMT(5,3,i.reservationOptions$)&&e.bMT(6,5,i.reservationOptions$).enableGuestCheckout&&(e.bMT(7,7,i.isTeetimeSelected$)||e.bMT(8,9,i.isGroupTeetimeSelected$)))}},directives:[T.bT,ct],pipes:[Ae.A,T.Jj],styles:[".page-content{padding:0!important}.logo-side-container[_ngcontent-%COMP%]{max-width:150px;margin:0 auto;margin-top:calc(50vh - 8em);padding-right:262px}.logo-side[_ngcontent-%COMP%]{width:40%;float:left;min-height:calc(100vh - 10em)}.title-text[_ngcontent-%COMP%]{font-size:30px;font-weight:700;margin-top:0;margin-bottom:0}button[_ngcontent-%COMP%]{border-radius:8px;font-weight:700;width:100%;padding:5px;margin-bottom:10px}.iconbtn[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:3px;width:30px;height:30px}.logoimg[_ngcontent-%COMP%]{height:60px}  .guest-page .mat-form-field-appearance-outline .mat-form-field-outline{color:#ccc!important;opacity:.5!important;border-width:thin;border-radius:.5em!important}  .guest-page .mat-form-field-outline-start{border-radius:8px 0 0 8px!important;min-width:28px!important}  .guest-page .mat-form-field-outline-end{border-radius:0 8px 8px 0!important}.mat-input-element[_ngcontent-%COMP%]{font-size:14px!important;height:100%}  .guest-page .mat-form-field-appearance-outline .mat-form-field-infix{padding:.8em 0!important;margin-top:-.5em}@media screen and (max-width: 768px){.logo-side[_ngcontent-%COMP%], .img-container[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 480px){.title-text[_ngcontent-%COMP%]{font-size:26px}}  .guest-page .mat-form-field-wrapper{margin-bottom:-1em!important}  .guest-page .mat-icon-button{left:8px}ul#strengthBar[_ngcontent-%COMP%]{display:inline;list-style:none;margin:0 0 0 15px;padding:0;vertical-align:2px}.point[_ngcontent-%COMP%]:last{margin:0!important}.point[_ngcontent-%COMP%]{background:#ddd;border-radius:2px;display:inline-block;height:5px;margin-right:1px;width:20px}.img-container[_ngcontent-%COMP%]{height:calc(100vh - 8em);position:relative;width:40%;float:left}.img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]{display:contents}.img[_ngcontent-%COMP%]   .img-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}"]}),r})();var mt=h(71731);function io(r,o){if(1&r&&(e.j41(0,"h1"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.SpI("You are now buddy with ",t.golferName,"")}}function oo(r,o){1&r&&(e.j41(0,"h1"),e.EFF(1," Processing... "),e.k0s())}let pt=(()=>{class r{constructor(t){this.store=t,this.isProcessing=!0,this.golferName="",this.golferAcct="",this.buddyAcct="",this.buddyEmail="",this.isAcceptBuddySuccess$=this.store.pipe((0,g.Lt)(O.Ij))}ngOnInit(){const t=decodeURIComponent(window.location.href);this.golferName=b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"golferName")),this.golferAcct=b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"golferAcct")),this.golferPlayerId=+b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"golferPlayerId")),this.golferDependentId=+b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"golferDependentId")),this.buddyAcct=b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"buddyAcct")),this.buddyPlayerId=+b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"buddyPlayerId")),this.buddyDependentId=+b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"buddyDependentId")),this.buddyEmail=b.H.decodeBase64(b.H.getQueryParamFromMalformedURL(t,"buddyEmail")),this.store.dispatch(new mt.s7({acceptRequestBuddyLink:"",buddy:{buddyAcct:this.buddyAcct,buddyPlayerId:this.buddyPlayerId,buddyDependentId:this.buddyDependentId,buddyEmail:this.buddyEmail,acct:this.golferAcct,playerId:this.golferPlayerId,dependentId:this.golferDependentId},userToBeBuddy:{buddyAcct:this.golferAcct,buddyPlayerId:this.golferPlayerId,buddyDependentId:this.golferDependentId,acct:this.buddyAcct,playerId:this.buddyPlayerId,dependentId:this.buddyDependentId}}))}}return r.\u0275fac=function(t){return new(t||r)(e.rXU(g.il))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-accept-buddy-page"]],decls:6,vars:4,consts:[[1,"card-container","text-center"],[4,"ngIf","ngIfElse"],["loading",""]],template:function(t,i){if(1&t&&(e.j41(0,"mat-card",0)(1,"mat-card-content"),e.DNE(2,io,2,1,"h1",1),e.nI1(3,"async"),e.DNE(4,oo,2,0,"ng-template",null,2,e.C5r),e.k0s()()),2&t){const n=e.sdS(5);e.R7$(2),e.Y8G("ngIf",e.bMT(3,2,i.isAcceptBuddySuccess$))("ngIfElse",n)}},directives:[J.RN,J.m2,T.bT],pipes:[T.Jj],styles:[".card-container[_ngcontent-%COMP%]{height:96%;display:flex;justify-content:center;align-items:center}"]}),r})(),qe=(()=>{class r{constructor(t,i){this.authService=t,this.router=i}canActivate(t){if(this.authService.hasValidAccessToken()){const i=t.queryParams.returnUrl;if(i){const[n,p]=i.split("?"),y=null==p?void 0:p.split("&").reduce((C,l)=>{const _=l.split("=");return C[_[0]]=_[1],C},{});return this.router.navigate([n],{queryParams:y}),!1}return this.router.navigate(["/"]),!1}return!0}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(Re.TC),e.KVO(U.Ix))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const no=[{path:"login",component:ot,canActivate:[qe]},{path:"forgot-password",component:Qe},{path:"verify-email",component:Ke,canActivate:[qe]},{path:"register",component:tt,canActivate:[qe]},{path:"disallow-register",component:rt},{path:"reset-password",component:st},{path:"redirect",component:at},{path:"guest",component:lt},{path:"accept-buddy",component:pt}];let so=(()=>{class r{}return r.components=[tt,rt,ot,it,st,nt,Qe,Ke,at,et,ct,lt,pt],r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({providers:[T.vh],imports:[[U.iI.forChild(no)],U.iI]}),r})(),ao=(()=>{class r{constructor(t,i){this.http=t,this.baseConfigService=i,this.baseUrl=ee.c.onlineApi,this.baseConfigService.isReady?this.baseUrl=this.baseConfigService.serverSettings.onlineApi:this.baseConfigService.settingsLoaded$.subscribe(n=>this.baseUrl=this.baseConfigService.serverSettings.onlineApi)}forgotPassword(t){return this.http.post(`${this.baseUrl}/forgotpassword`,t).pipe((0,d.T)(i=>i))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(pe.Qq),e.KVO(ue.t))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var k=h(95845),ve=h(72958),co=h(81679),dt=h(52663),Ue=h(6475),we=h(25600),lo=h(1500),mo=h(95705);let po=(()=>{class r{constructor(t){this.store=t,this.isStart=!1,this.tick=60*N.L.LockedTeesheetsTimeoutInMinutes}start(){this.isStart||(this.isStart=!0,(0,mo.Y)(1e3*this.tick).pipe((0,K.v)(()=>this.isStart),(0,d.T)(()=>this.store.dispatch(new A.T4))).subscribe())}stop(){!this.isStart||(this.isStart=!1)}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(g.il))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const uo=[S.qy.VerifyEmail,S.qy.ForgotPassword,S.qy.Login],go=[f.Nx.LoadUserInfoFailure,f.Nx.LoginFailure,f.Nx.LoginWithCaptchaFailure,f.Nx.VerifyEmailSuccess,f.Nx.VerifyEmailFailure,f.Nx.VerifyEmailReturnGuest,f.Nx.ForgotPasswordSuccess,f.Nx.ForgotPasswordFailure,f.Nx.VerifyTeetimesAfterLoginSuccess,f.Nx.VerifyTeetimesAfterLoginFailure,f.Nx.VerifyTeetimesAfterExternalLoginSuccess];let ho=(()=>{class r{constructor(t,i,n,p,y,C,l,_,R,L,I,E,H){this.actions$=t,this.authService=i,this.forgotPasswordService=n,this.router=p,this.oauthService=y,this.dialog=C,this.store=l,this.storeAuth=_,this.sessionService=R,this.timerService=L,this.commonService=I,this.customRouterService=E,this.translate=H,this.showSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...uo),(0,d.T)(()=>new Y.f9))),this.hideSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...go),(0,d.T)(()=>new Y.wg))),this.hideSpinnerAfterLoadUserInfoSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.LoadUserInfoSuccess),(0,d.T)(()=>{let s=!1;const c=decodeURIComponent(this.router.url),v=this.sessionService.getItem(N.L.LockedTeesheetIds),u=v?v.value:null;return null!==u&&0!==u.length||!c.includes("?id")?u&&u.length>0&&(s=!0):b.H.getQueryParamFromMalformedURL(c,x.u.Id)&&(s=!0),s}),(0,te.p)(s=>!s),(0,d.T)(()=>new Y.wg))),this.registerRedirect$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(se.RegisterRedirect),(0,w.M)(()=>this.router.navigate(["auth/register"]))),{dispatch:!1}),this.idMeMessage$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.IdMeLoginMessage),(0,j.Z)(()=>this.authService.getIdMeMessageLogin().pipe((0,d.T)(s=>new f.Bc(s)),(0,P.W)(s=>(0,F.of)(new f.Kw(s))))))),this.verifyEmail$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.VerifyEmail),(0,d.T)(s=>s.payload),(0,j.Z)(s=>this.authService.verifyUser(s).pipe((0,d.T)(c=>c.location?new S.M7(c.location):c.isGuest?new f.IW({email:c.model.email,username:c.model.username,first:c.first,last:c.last,message:c.message}):c.isFoundUser?new f.PA(c):new f.uT({error:null,email:s.email,username:s.username,message:null})),(0,P.W)(c=>(0,F.of)(new f.uT({error:c,email:s.email,username:s.username,message:null}))))))),this.redirectToOnlineOptionWeb$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.RedirectToOnlineOptionWeb),(0,w.M)(s=>window.location.href=s.payload)),{dispatch:!1}),this.redirectToGuestCheckout$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.RedirectToGuestCheckout),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,w.M)(([[s,c],v])=>{if(v.allowNewCustomerRegistration)if(v.requireCreditCardOnFileForRegistration)if(c.state.queryParams.returnUrl){let u=decodeURIComponent(c.state.queryParams.returnUrl);u.includes("teetime/user-agreement?id=")?u=u.replace("teetime/user-agreement","teetime/require-credit-card"):u.includes("teetime/checkout?id=")?u=u.replace("teetime/checkout","teetime/require-credit-card"):u.includes("teetime/group-booking/player-count")?u=u.replace("teetime/group-booking/player-count","teetime/require-credit-card"):u.includes("teetime/group-booking")?u=u.replace("teetime/group-booking","teetime/require-credit-card"):u.includes("search-teetime")&&(u=u.replace("search-teetime","teetime/require-credit-card")),this.router.navigate(["auth/guest"],{queryParams:{returnUrl:u}})}else this.router.navigate(["auth/guest"],{queryParams:{returnUrl:"teetime/require-credit-card"}});else this.router.navigate(["auth/guest"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}});else this.router.navigate(["auth/disallow-register"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}})})),{dispatch:!1}),this.verifyEmailSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyEmailSuccess),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,w.M)(([s,c])=>{this.router.navigate(["auth/login"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}})})),{dispatch:!1}),this.verifyEmailFailure$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyEmailFailure),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,w.M)(([[s,c],v])=>{if(v.allowNewCustomerRegistration)if(v.requireCreditCardOnFileForRegistration)if(c.state.queryParams.returnUrl){let u=decodeURIComponent(c.state.queryParams.returnUrl);u.includes("teetime/user-agreement?id=")?u=u.replace("teetime/user-agreement","teetime/require-credit-card"):u.includes("teetime/checkout?id=")?u=u.replace("teetime/checkout","teetime/require-credit-card"):u.includes("teetime/group-booking/player-count")?u=u.replace("teetime/group-booking/player-count","teetime/require-credit-card"):u.includes("teetime/group-booking")?u=u.replace("teetime/group-booking","teetime/require-credit-card"):u.includes("search-teetime")&&(u=u.replace("search-teetime","teetime/require-credit-card")),this.router.navigate(["auth/register"],{queryParams:{returnUrl:u}})}else this.router.navigate(["auth/register"],{queryParams:{returnUrl:"teetime/require-credit-card"}});else this.router.navigate(["auth/register"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}});else this.router.navigate(["auth/disallow-register"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}})})),{dispatch:!1}),this.verifyEmailReturnGuest$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyEmailReturnGuest),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,w.M)(([[s,c],v])=>{this.router.navigate(v.allowNewCustomerRegistration?["auth/register"]:["auth/disallow-register"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}})})),{dispatch:!1}),this.signUp$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.SignUp),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,w.M)(([[s,c],v])=>{this.router.navigate(v&&v.allowNewCustomerRegistration?["auth/register"]:["auth/disallow-register"],{queryParams:{returnUrl:c.state.queryParams.returnUrl?decodeURIComponent(c.state.queryParams.returnUrl):null}})})),{dispatch:!1}),this.login$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.Login),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,d.T)(([s,c])=>{var v;return{cred:s.payload,captchaOnBoarding:null!==(v=null==c?void 0:c.captchaOnBoarding)&&void 0!==v&&v}}),(0,ye.p)(s=>{const c=s.cred.transactionId?new pe.Lr({"x-transaction-id":s.cred.transactionId.toString()||""}):new pe.Lr;return this.oauthService.fetchTokenUsingPasswordFlow(s.cred.userName||s.cred.email,s.cred.password,c).then(v=>s.captchaOnBoarding?new f.Du(v):new f.b9(v)).catch(v=>s.captchaOnBoarding?new f.en(v):new f.kb(v))}))),this.loginFailure$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.LoginFailure,f.Nx.LoginWithCaptchaFailure),(0,d.T)(s=>s.payload),(0,w.M)(s=>{s.message&&s.tag&&"idme"===s.tag.toLowerCase()&&this.router.navigate(["auth/disallow-register"])})),{dispatch:!1}),this.clearDataAfterLoginSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyTeetimesAfterLoginSuccess),(0,ve.H)(()=>{const s=this.sessionService.getItem(N.L.LockedTeesheetIds);return s&&s.isExpired?[new ce.fS,new ce.Fx]:[new ce.Fx]}))),this.redirectAfterLoginSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyTeetimesAfterLoginSuccess),(0,k.E)(this.store.pipe((0,g.Lt)(O.ci)),this.store.pipe((0,g.Lt)(B.N3))),(0,w.M)(([s,c,v])=>{const u=decodeURIComponent(this.router.url),me=this.sessionService.getItem(N.L.LockedTeesheetIds),X=me&&me.isExpired;if(!u.includes("search-teetime?id=")||X||c)if(u.includes("search-teetime?Date=")||u.includes("search-teetime?CourseId=")||u.includes("search-teetime?Player=")||u.includes("search-teetime?Hole=")){const ie=b.H.getQueryParamFromMalformedURL(u,x.u.Date),W=b.H.getQueryParamFromMalformedURL(u,x.u.CourseId),$=b.H.getQueryParamFromMalformedURL(u,x.u.Player),de=b.H.getQueryParamFromMalformedURL(u,x.u.Hole);let Z={};ie&&(Z=Object.assign(Object.assign({},Z),{Date:ie})),W&&(Z=Object.assign(Object.assign({},Z),{CourseId:W})),$&&(Z=Object.assign(Object.assign({},Z),{Player:$})),de&&(Z=Object.assign(Object.assign({},Z),{Hole:de})),null!==Z?this.router.navigate(["search-teetime"],{queryParams:Z}):this.router.navigate(["search-teetime"])}else if(u.includes("returnUrl=")){const ie=u.lastIndexOf("returnUrl=")+10;let W=u.substr(ie);if(W.includes("?")){const $=W.indexOf("?");W=W.substr(0,$)}if(u.includes("teetime/checkout?id="))this.customRouterService.navigate("teetime/checkout",{queryParams:{id:b.H.getQueryParamFromMalformedURL(u,"id"),holes:b.H.getQueryParamFromMalformedURL(u,x.u.Holes),numberOfPlayer:b.H.getQueryParamFromMalformedURL(u,x.u.NumberOfPlayer),loginAfterBookTeeTime:"true"},replaceUrl:!0});else if(u.includes("teetime/pre-checkout?id="))this.customRouterService.navigate("teetime/pre-checkout",{queryParams:{id:b.H.getQueryParamFromMalformedURL(u,"id"),holes:b.H.getQueryParamFromMalformedURL(u,x.u.Holes),numberOfPlayer:b.H.getQueryParamFromMalformedURL(u,x.u.NumberOfPlayer)},replaceUrl:!0});else if(u.includes("teetime/require-credit-card?id="))this.customRouterService.navigate("teetime/require-credit-card",{queryParams:{id:b.H.getQueryParamFromMalformedURL(u,"id"),holes:b.H.getQueryParamFromMalformedURL(u,x.u.Holes),numberOfPlayer:b.H.getQueryParamFromMalformedURL(u,x.u.NumberOfPlayer)},replaceUrl:!0});else if(u.includes("teetime/user-agreement?id="))this.customRouterService.navigate("teetime/user-agreement",{queryParams:{id:b.H.getQueryParamFromMalformedURL(u,"id"),holes:b.H.getQueryParamFromMalformedURL(u,x.u.Holes),numberOfPlayer:b.H.getQueryParamFromMalformedURL(u,x.u.NumberOfPlayer),loginAfterBookTeeTime:"true"},replaceUrl:!0});else if(u.includes("teetime/user-agreement"))this.customRouterService.navigate("teetime/user-agreement",{queryParams:{loginAfterBookTeeTime:"true"},replaceUrl:!0});else if(u.includes("teetime/group-booking/player-count"))this.customRouterService.navigate("teetime/group-booking/player-count",{queryParams:{loginAfterBookTeeTime:"true"},replaceUrl:!0});else if(u.includes("teetime/checkout-groupbooking"))this.customRouterService.navigate("teetime/checkout-groupbooking",{queryParams:{loginAfterBookTeeTime:"true"},replaceUrl:!0});else if(u.includes(ne.C.AcceptBuddyRoute))this.customRouterService.navigate(ne.C.AcceptBuddyRoute,{queryParams:{golferName:b.H.getQueryParamFromMalformedURL(u,"golferName"),golferAcct:b.H.getQueryParamFromMalformedURL(u,"golferAcct"),golferPlayerId:b.H.getQueryParamFromMalformedURL(u,"golferPlayerId"),buddyAcct:b.H.getQueryParamFromMalformedURL(u,"buddyAcct"),buddyPlayerId:b.H.getQueryParamFromMalformedURL(u,"buddyPlayerId"),buddyDependentId:b.H.getQueryParamFromMalformedURL(u,"buddyDependentId"),buddyEmail:b.H.getQueryParamFromMalformedURL(u,"buddyEmail")},replaceUrl:!0});else{const $=b.H.getQueryParamFromMalformedURL(u,x.u.ReservId);this.customRouterService.navigate(W,$?{replaceUrl:!0,queryParams:{reservId:$}}:{replaceUrl:!0})}}else this.customRouterService.navigate(v.requireCreditCardOnFileForRegistration?"teetime/pre-checkout":"search-teetime");else this.customRouterService.navigate("teetime/checkout",{queryParams:{id:b.H.getQueryParamFromMalformedURL(u,"id"),holes:b.H.getQueryParamFromMalformedURL(u,x.u.Holes),numberOfPlayer:b.H.getQueryParamFromMalformedURL(u,x.u.NumberOfPlayer)},replaceUrl:!0})})),{dispatch:!1}),this.redirectAfterExternalLoginSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyTeetimesAfterExternalLoginSuccess),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,w.M)(([s,c])=>{this.commonService.getAllCreditCardOnFile(c.isUseIBXTokenization).pipe((0,d.T)(v=>{const u=decodeURIComponent(this.router.url),me=this.sessionService.getItem(N.L.LockedTeesheetIds),X=me?me.value:null,ie=null!==X&&"object"==typeof X&&X.length>0?X[0]:null,W=null!==X&&X.length>1;if(this.store.dispatch(new ce.m),u.includes("teetime?id=")){const $=u.substring(u.lastIndexOf("?id=")+4);this.customRouterService.navigate(c.requireCreditCardOnFileForRegistration&&0===v.length?"teetime/require-credit-card":"teetime/checkout",{queryParams:{id:$}})}else if(null!==ie&&ie>0){const $=c.requireCreditCardOnFileForRegistration&&0===v.length?"teetime/require-credit-card":W?"teetime/group-booking":c.isEnableEndUserAgreement?"teetime/user-agreement":"teetime/checkout";W?u.includes("state=")?this.store.dispatch(new co.jX):this.customRouterService.navigate($):this.customRouterService.navigate($,{queryParams:{id:ie}})}else this.router.navigate([c.requireCreditCardOnFileForRegistration&&0===v.length?"teetime/require-credit-card":ne.C.SearchTeeTimeRoute])})).subscribe()})),{dispatch:!1}),this.getUserInformation$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.LoadUserInfoSuccess),(0,d.T)(s=>s.payload),(0,j.Z)(s=>this.authService.getUserInformation(s.sub,s.player_id||0,s.dependent_id||0).pipe((0,ve.H)(c=>[new f.VD(c),new S.v_(c)]),(0,P.W)(c=>(0,F.of)(new f.m1(c))))))),this.getLocalUserInfo$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(A.XG.GetLocalUserInfo),(0,d.T)(s=>s.payload),(0,j.Z)(s=>this.authService.getUserInformation(s.sub,s.player_id||0,s.dependent_id||0).pipe((0,d.T)(c=>new f.VD(c)),(0,P.W)(c=>(0,F.of)(new f.m1(c))))))),this.loadUserInfo$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.LoginSuccess,f.Nx.LoginWithCaptchaSuccess),(0,w.M)(()=>{localStorage.setItem("authEvent",JSON.stringify({event:"login",timestamp:Date.now()}))}),(0,ae.n)(()=>(0,lo.H)(this.oauthService.loadUserProfile()).pipe((0,d.T)(s=>new f.hY(s)),(0,P.W)(s=>(0,F.of)(new f.Mv(s))))))),this.forgotPassword$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.ForgotPassword),(0,k.E)(this.storeAuth.pipe((0,g.Lt)(O.GG))),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,d.T)(([[s,c],v])=>(!c&&v.loginMethod===q.x.Username&&(c=sessionStorage.getItem(N.L.username)),c?{username:c,emailAddress:s.payload.email,url:s.payload.url}:Object.assign(Object.assign({},s.payload),{emailAddress:s.payload.email}))),(0,j.Z)(s=>this.forgotPasswordService.forgotPassword(s).pipe((0,ae.n)(c=>[new f.cu(c),new f.qV(`${this.translate.instant("auth.loginInformationSentEmail")}. ${this.translate.instant("auth.checkYourEmailForLogin")}.`)]),(0,P.W)(c=>(0,F.of)(new f.NJ(c))))))),this.forgotPasswordNotifymessage$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.ForgotPasswordNotify),(0,d.T)(s=>s.payload),(0,w.M)(s=>{this.dialog.open(ge.z,{data:{header:this.translate.instant("password.passwordRecovery"),details:s}}).afterClosed().subscribe(v=>{this.router.navigate(["auth/verify-email"])})})),{dispatch:!1}),this.loginTimerStart$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(A.XG.LoginTimerStart),(0,w.M)(()=>this.timerService.start())),{dispatch:!1}),this.loginTimerStop$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(A.XG.LoginTimerStop),(0,w.M)(()=>this.timerService.stop())),{dispatch:!1}),this.autoCheckLoginTimeouted$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(A.XG.AutoCheckLoginTimeouted),(0,k.E)(this.storeAuth.select(O.ah)),(0,k.E)(this.storeAuth.select(O.ci)),(0,d.T)(([[s,c],v])=>({loginExpireAt:c,loginTimeouted:v})),(0,te.p)(s=>!s.loginTimeouted&&s.loginExpireAt&&s.loginExpireAt<=new Date),(0,ve.H)(()=>[new ce.fS,new A.qz]))),this.verifyTeetime$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.VerifyTeetime),(0,d.T)(s=>({teeSheetIds:[s.payload.teetimeId],email:null,action:Ce.B.PRODUCT_NAME,sessionId:this.sessionService.getItemValue(N.L.SessionId,null),golferId:0,classCode:null,numberOfPlayer:s.payload.numberOfPlayer})),(0,ae.n)(s=>this.commonService.lockTeetime(s).pipe((0,d.T)(c=>new f._3(c)),(0,P.W)(c=>(0,F.of)(new f.VT(c))))))),this.verifyTeetimeSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyTeetimeSuccess),(0,d.T)(s=>s.payload),(0,te.p)(s=>!!s),(0,ye.p)(s=>this.dialog.open(ge.z,{data:{header:this.translate.instant("dialog.attention"),details:s}}).afterClosed()),(0,w.M)(()=>this.router.navigate([ne.C.SearchTeeTimeRoute]))),{dispatch:!1}),this.verifyTeetimesAfterLogin$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.VerifyTeetimesAfterLogin),(0,k.E)(this.store.pipe((0,g.Lt)(O.$2))),(0,k.E)(this.store.pipe((0,g.Lt)(O.GM))),(0,k.E)(this.storeAuth.pipe((0,g.Lt)(O.wz))),(0,d.T)(([[[,s],c],v])=>{const u=decodeURIComponent(this.router.url),me=this.sessionService.getItem(N.L.LockedTeesheetIds);let X=me?me.value:null;if((null===X||0===X.length)&&u.includes("?id")){const $=b.H.getQueryParamFromMalformedURL(u,x.u.Id);$&&(X=[+$])}const ie=JSON.parse(localStorage.getItem(we.H.THIRD_PARTY_ID));if(X&&X.length>1){const $=this.sessionService.getItem(N.L.LockedFilterGroupBooking),de={searchDate:(c=null!=c?c:$.value).searchDate,holes:c.holes,numberOfPlayer:c.preferedGroupSize,groupBookingNumberOfPlayer:c.numberOfPlayer,courseIds:[c.courseId],searchTimeType:c.teetimeType,classCode:Ce.B.DEFAULT_CLASS_CODE,isUseCapacityPricing:!1,teeSheetSearchView:c.teeSheetSearchView};return Object.assign(Object.assign({},de),{selectedTeeSheetIds:X,classCode:v?v.classCode:de.classCode,searchType:Ue.nX.Group_Bookings,memberStoreId:v?v.store_id:Ce.B.DEFAULT_STORE_ID,thirdPartyId:ie,memberGroupIds:v&&v.member_group_ids?v.member_group_ids.split(",").map(Mo=>+Mo):null})}{const $=this.sessionService.getItem(N.L.SelectedCourse);return Object.assign(Object.assign({},s),{selectedTeeSheetIds:X,courseIds:0===s.courseIds.length?null==$?void 0:$.value:s.courseIds,classCode:v?v.classCode:s.classCode,memberStoreId:v?v.store_id:Ce.B.DEFAULT_STORE_ID,memberGroupIds:v&&v.member_group_ids?v.member_group_ids.split(",").map(Z=>+Z):null,searchType:Ue.nX.Search,thirdPartyId:ie})}}),(0,j.Z)(s=>s.selectedTeeSheetIds&&0!==s.selectedTeeSheetIds.length&&s.classCode?this.commonService.verifyTeetimesAfterLogin(s).pipe((0,d.T)(c=>c.success?s.thirdPartyId>0?new f.pO(c):new f.cC(c):new f.xd({error:new Error(c.message),isGroupBooking:s.searchType===Ue.nX.Group_Bookings})),(0,P.W)(c=>(0,F.of)(new f.xd({error:c,isGroupBooking:s.searchType===Ue.nX.Group_Bookings})))):(0,F.of)(new f.cC(null))))),this.verifyTeetimesAfterLoginFailure$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.VerifyTeetimesAfterLoginFailure),(0,d.T)(s=>s.payload),(0,te.p)(s=>s&&s.error),(0,ye.p)(s=>{let c=s.error.message;if(!c){const{teeSheetIds:v,classCode:u}=s.error;v&&v&&v.length>1&&(c=v[1]),!c&&u&&u&&u.length>1&&(c=u[1])}return c&&this.dialog.open(ge.z,{data:{header:this.translate.instant("dialog.attention"),styledDetails:c}}).afterClosed(),(0,F.of)(this.customRouterService.navigate(s.isGroupBooking?ne.C.GroupBookingRoute:ne.C.SearchTeeTimeRoute))})),{dispatch:!1}),this.forgotPasswordFailure$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.ForgotPasswordFailure),(0,d.T)(s=>s.payload),(0,w.M)(s=>{const c=s&&s.messages&&s.messages.length>0?s.messages[0]:s||this.translate.instant("auth.couldNotSendForgotPasswordEmail");this.dialog.open(ge.z,{data:{header:this.translate.instant("dialog.attention"),details:c}})})),{dispatch:!1}),this.revokeTokenSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.RevokeTokenSuccess),(0,d.T)(s=>s.payload?s.payload:"/"),(0,w.M)(()=>this.oauthService.logOut(!0)),(0,w.M)(()=>{localStorage.clear(),this.sessionService.setItem(N.L.DefaultLanguage,this.translate.currentLang)}),(0,w.M)(s=>{window.location.href=s})),{dispatch:!1}),this.revokeTokenFailure$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.RevokeTokenFailure),(0,d.T)(s=>s.payload),(0,w.M)(s=>{let c="";s.error?c=s.error:Object.values(s).forEach(v=>{c+=v[0]+"\n"}),this.dialog.open(ge.z,{data:{header:this.translate.instant("dialog.attention"),details:c}})})),{dispatch:!1}),this.updateHitCount$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(A.XG.UpdateHitCount),(0,d.T)(s=>s.payload),(0,ae.n)(s=>this.authService.updateHitCount(s).pipe((0,d.T)(()=>new f.Dk(s),(0,P.W)(c=>(0,F.of)(new f.gO(c))))))))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(a.En),e.KVO(he),e.KVO(ao),e.KVO(U.Ix),e.KVO(Re.TC),e.KVO(Ne.bZ),e.KVO(g.il),e.KVO(g.il),e.KVO(Be.Q),e.KVO(po),e.KVO(Me.h),e.KVO(dt.E),e.KVO(z.c$))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac}),r})();var G=h(16308);let ut=(()=>{class r{constructor(t,i){this.http=t,this.baseConfigService=i,this.onlineResBaseUrl=ee.c.onlineApi,this.baseConfigService.isReady?this.onlineResBaseUrl=this.baseConfigService.serverSettings.onlineApi:this.baseConfigService.settingsLoaded$.subscribe(()=>{this.onlineResBaseUrl=this.baseConfigService.serverSettings.onlineApi})}register(t){return this.http.post(`${this.onlineResBaseUrl}/register`,t).pipe((0,d.T)(i=>i))}updateMemberStoreId(t){return this.http.post(`${this.onlineResBaseUrl}/UpdateMemberInfo`,t).pipe((0,d.T)(i=>i))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(pe.Qq),e.KVO(ue.t))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac}),r})();const fo=[V.w6.Register,V.w6.AddressValidate,V.w6.ZipCodeLookup,V.w6.CityStateLookup,se.GetDisallowRegistrationsMessage],_o=[f.Nx.RegisterFailure,G.Rz.AddressValidateSuccess,G.Rz.AddressValidateFailure,G.Rz.ZipCodeLookupSuccess,G.Rz.ZipCodeLookupFailure,G.Rz.CityStateLookupFailure,G.Rz.CityStateLookupSuccess,G.Rz.GetDisallowRegistrationsMessageSuccess,G.Rz.GetDisallowRegistrationsMessageFailure];let Co=(()=>{class r{constructor(t,i,n,p,y,C){this.actions$=t,this.authService=i,this.commonService=n,this.baseConfigService=p,this.store=y,this.registerService=C,this.showSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...fo),(0,d.T)(()=>new Y.f9))),this.hideSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(..._o),(0,d.T)(()=>new Y.wg))),this.register$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(V.w6.Register),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,d.T)(([l,_])=>Object.assign(Object.assign({},l.payload),{storeId:_.enableAssignNewAccountToStore?_.assignNewAccountToStore:1})),(0,j.Z)(l=>this.authService.register(Object.assign(Object.assign({},l),{courseId:this.baseConfigService.serverSettings.courseId})).pipe((0,d.T)(_=>new f.px(Object.assign(Object.assign({},_),{password:l.registerPassword}))),(0,P.W)(_=>(0,F.of)(new f.iD({error:_}))))))),this.registerSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.RegisterSuccess),(0,d.T)(l=>l.payload),(0,ve.H)(l=>[new S.az({userName:l.username,email:l.email,password:l.password})]))),this.registerSSO$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(V.w6.RegisterSSO),(0,d.T)(l=>l.payload),(0,j.Z)(l=>this.authService.registerSSO(Object.assign(Object.assign({},l),{username:l.email})).pipe((0,d.T)(()=>new f.k4),(0,P.W)(_=>(0,F.of)(new f.lD({error:_}))))))),this.registerSSOSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.RegisterSSOSuccess),(0,k.E)(this.store.pipe((0,g.Lt)(M.Mj))),(0,d.T)(([,l])=>l),(0,w.M)(l=>{window.location.href=l})),{dispatch:!1}),this.addressValidate$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(V.w6.AddressValidate),(0,d.T)(l=>l.payload),(0,ae.n)(l=>this.commonService.addressValidate(l).pipe((0,d.T)(_=>new G.WK(_)),(0,P.W)(_=>(0,F.of)(new G.Zm(_))))))),this.zipCodeLookup$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(V.w6.ZipCodeLookup),(0,d.T)(l=>l.payload),(0,ae.n)(l=>this.commonService.zipCodeLookup(l).pipe((0,d.T)(_=>new G.SB(_)),(0,P.W)(_=>(0,F.of)(new G.b6(_))))))),this.cityStateLookup$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(V.w6.CityStateLookup),(0,d.T)(l=>l.payload),(0,ae.n)(l=>this.commonService.cityStateLookup(l).pipe((0,d.T)(_=>new G.c$(_)),(0,P.W)(_=>(0,F.of)(new G.Td(_))))))),this.updateMemerInfo$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(se.UpdateMemberInfo),(0,k.E)(this.store.pipe((0,g.Lt)(O.pF))),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,te.p)(([[l,_],R])=>!!_&&!!R),(0,d.T)(([[l,_],R])=>({acct:_,storeId:R.enableAssignNewAccountToStore?R.assignNewAccountToStore:Ce.B.DEFAULT_STORE_ID})),(0,j.Z)(l=>this.registerService.updateMemberStoreId(l).pipe((0,d.T)(()=>new G.lu({storeId:l.storeId})),(0,P.W)(_=>(0,F.of)(new G.ag(_))))))),this.getDisallowRegistrationsMessage$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(se.GetDisallowRegistrationsMessage),(0,j.Z)(()=>this.commonService.getDisallowRegistrationsMessage().pipe((0,d.T)(l=>new G.Sj(l)),(0,P.W)(l=>(0,F.of)(new G.TE(l))))))),this.validatePhoneNumer$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(V.w6.ValidatePhoneNumber),(0,d.T)(l=>l.payload),(0,ae.n)(l=>this.commonService.validatePhoneNumber(l).pipe((0,d.T)(_=>new G.BB(_)),(0,P.W)(_=>(0,F.of)(new G.iB(_)))))))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(a.En),e.KVO(he),e.KVO(Me.h),e.KVO(ue.t),e.KVO(g.il),e.KVO(ut))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac}),r})(),vo=(()=>{class r{constructor(t,i){this.http=t,this.baseConfigService=i,this.baseUrl=ee.c.onlineApi,this.baseConfigService.isReady?this.baseUrl=this.baseConfigService.serverSettings.onlineApi:this.baseConfigService.settingsLoaded$.subscribe(n=>this.baseUrl=this.baseConfigService.serverSettings.onlineApi)}resisterGuest(t){return this.http.post(`${this.baseUrl}/Register`,t).pipe((0,d.T)(i=>{localStorage.setItem(we.H.GUEST_TOKEN,i.content.encryptedEmail)}))}convertGuest(t){return this.http.post(`${this.baseUrl}/ConvertGuest`,t).pipe((0,d.T)(i=>i))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(pe.Qq),e.KVO(ue.t))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var bo=h(45931);const Io=[D.aN.Verify,D.aN.Convert],yo=[D.aN.VerifyFailure,D.aN.RegisterSuccess,f.Nx.RegisterFailure,D.aN.ConvertFailure];let Ro=(()=>{class r{constructor(t,i,n,p,y,C){this.actions$=t,this.authService=i,this.guestService=n,this.baseConfigService=p,this.router=y,this.store=C,this.showSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...Io),(0,d.T)(()=>new Y.f9))),this.hideSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...yo),(0,d.T)(()=>new Y.wg))),this.cancel$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(D.aN.Cancel),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,w.M)(([l,_])=>{if(_.state.queryParams.returnUrl){const R=decodeURIComponent(_.state.queryParams.returnUrl);this.router.navigate(["auth/verify-email"],{queryParams:{returnUrl:R}})}else this.router.navigate(["/"])})),{dispatch:!1}),this.verifyEmail$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(D.aN.Verify),(0,d.T)(l=>l.payload),(0,j.Z)(l=>this.authService.verifyUser({email:l.player.email,username:l.player.username}).pipe((0,d.T)(_=>_.email?_.isGuest?new f.IW({email:_.model.email,username:_.model.username,first:_.first,last:_.last,message:_.message}):new f.PA(_):new D.UZ(l.player)),(0,P.W)(_=>(0,F.of)(404===_.status?new D.UZ(l.player):new D.UI({error:_}))))))),this.guestCheckout$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(D.aN.Register),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,d.T)(([l,_])=>{const R=Object.assign({},l.payload);return R&&(R.pullExisting=!0,R.isGuest=!0,R.courseId=this.baseConfigService.serverSettings.courseId,R.storeId=_.enableAssignNewAccountToStore?_.assignNewAccountToStore:Ce.B.DEFAULT_STORE_ID,R.registerPassword=Array(16+Math.round(16*Math.random())).fill("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").map(L=>L[Math.floor(Math.random()*L.length)]).join("")),R}),(0,j.Z)(l=>this.guestService.resisterGuest(l).pipe((0,ve.H)(()=>[new D.px,new f.px({email:l.email,password:l.registerPassword,username:l.username})]),(0,P.W)(_=>(0,F.of)(new f.iD({error:_}))))))),this.convertGuest$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(D.aN.Convert),(0,d.T)(l=>{const _=localStorage.getItem(we.H.GUEST_TOKEN);return{password:l.payload.password,confirmPassword:l.payload.confirmPassword,email:l.payload.email,username:l.payload.username,encryptedEmail:_}}),(0,j.Z)(l=>this.guestService.convertGuest(l).pipe((0,d.T)(_=>_.status===bo.o.Success?new D.$s(Object.assign(Object.assign({},_),{username:l.username||l.email,password:l.password})):new D.wm({error:_})),(0,P.W)(_=>(0,F.of)(new D.wm(_))))))),this.convertGuestSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(D.aN.ConvertSuccess),(0,ve.H)(l=>{localStorage.removeItem(we.H.GUEST_TOKEN);const _=JSON.parse(localStorage.getItem(we.H.ID_TOKEN_CLAIMS_OBJ));return _&&(_.sub=l.payload.data.acct,_.player_id=l.payload.data.playerId,localStorage.setItem(we.H.ID_TOKEN_CLAIMS_OBJ,JSON.stringify(_))),[new Y.wg,new S.Vz({username:l.payload.username,password:l.payload.password})]})))}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(a.En),e.KVO(he),e.KVO(vo),e.KVO(ue.t),e.KVO(U.Ix),e.KVO(g.il))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac}),r})();var le=h(68288),To=h(91348),Fe=(()=>{return(r=Fe||(Fe={}))[r.Success=0]="Success",r[r.NotFound=-1]="NotFound",r[r.Failed=-2]="Failed",Fe;var r})();const Eo=[S.qy.FetchToken],So=[f.Nx.FetchTokenFailure,f.Nx.LoadUserInfoFailure];let wo=(()=>{class r{constructor(t,i,n,p,y,C,l,_,R,L){this.actions$=t,this.router=i,this.authExternalService=n,this.sessionService=p,this.store=y,this.oauthService=C,this.commonService=l,this.customRouterService=_,this.dialog=R,this.translate=L,this.showSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...Eo),(0,d.T)(()=>new Y.f9))),this.hideSpinner=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(...So),(0,d.T)(()=>new Y.wg))),this.fetchToken$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.FetchToken),(0,k.E)(this.store.pipe((0,g.Lt)(B.N3))),(0,d.T)(([I,E])=>{var H;return Object.assign(Object.assign({},I.payload),{captchaOnBoarding:null!==(H=null==E?void 0:E.captchaOnBoarding)&&void 0!==H&&H,storeId:E&&E.enableAssignNewAccountToStore?E.assignNewAccountToStore:1})}),(0,j.Z)(I=>this.authExternalService.connectToken(I).pipe((0,ve.H)(E=>I.captchaOnBoarding?[new f.Dz,new f.Xu(E)]:[new f.Xu(E)]),(0,P.W)(E=>I.captchaOnBoarding?(0,F.of)(new f.oX,new f.QA(E)):(0,F.of)(new f.QA(E))))))),this.fetchUserInfo$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.FetchTokenSuccess),(0,j.Z)(()=>this.authExternalService.connectUserInfo().pipe((0,d.T)(I=>new f.hY(I)),(0,P.W)(I=>(0,F.of)(new f.Mv(I))))))),this.fetchUserFail$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.FetchTokenFailure),(0,k.E)(this.store.pipe((0,g.Lt)(O.pL))),(0,d.T)(([I,E])=>{const H=I.payload;return H.message&&H.error_description&&"New user registrations are not allowed."===H.error_description?(this.router.navigate(["auth/disallow-register"]),{type:"[No Action]"}):H.message&&H.error_description&&H.tag?(this.router.navigate(["auth/disallow-register"],{queryParams:{notregister:!0,returnUrl:E.state.queryParams.returnUrl?decodeURIComponent(E.state.queryParams.returnUrl):null}}),{type:"[No Action]"}):new To.w9({header:this.translate.instant("thirdParty.idmeAuthenticationFailed"),details:H.error_description,result:ne.C.VerifyEmailRoute})}))),this.fetchInternalToken=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(S.qy.FetchInternalToken),(0,d.T)(I=>I.payload),(0,ye.p)(I=>this.oauthService.fetchTokenUsingPasswordFlow(I.username,I.password).then(E=>new f.wS(E)).catch(E=>new f.Hk(E))))),this.updateHitCountSuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(f.Nx.UpdateHitCountSuccess),(0,d.T)(I=>I.payload),(0,w.M)(I=>{this.sessionService.setItem(N.L.HitCountInfo,I),this.sessionService.removeItem(N.L.affiliateId),window.location.href=window.location.origin})),{dispatch:!1}),this.verifyAcceptBuddy$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(mt.SV.VerifyAcceptBuddy),(0,d.T)(I=>I.payload),(0,j.Z)(I=>this.commonService.verifyAcceptBuddy(I).pipe((0,d.T)(E=>{switch(E){case Fe.Success:return new le.rE(I);case Fe.NotFound:return new le.nP;case Fe.Failed:return new le.sg({messages:[this.translate.instant("popup.invalidAcceptedBuddy").replace(".","")]})}}),(0,P.W)(E=>(0,F.of)(new le.sg(E))))))),this.verifyAcceptBuddySuccess$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(le.Km.VerifyAcceptBuddySuccess),(0,d.T)(I=>I.payload),(0,j.Z)(I=>this.commonService.addBuddy(I).pipe((0,d.T)(E=>new le.CB(E)),(0,P.W)(E=>(0,F.of)(new le.sg(E))))))),this.verifyAcceptBuddyFailed$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(le.Km.VerifyAcceptBuddyFailed),(0,k.E)(this.store.pipe((0,g.Lt)(O.r2))),(0,te.p)(([,I])=>!I&&null!==window.location.search),(0,w.M)(()=>{const I=window.location.search;this.customRouterService.navigate("auth/verify-email",{queryParams:{returnUrl:decodeURIComponent(`${ne.C.AcceptBuddyRoute}${I}`)}})})),{dispatch:!1}),this.acceptBuddyFailed$=(0,a.EH)(()=>this.actions$.pipe((0,a.gp)(le.Km.AcceptBuddyFailed),(0,d.T)(I=>I.payload),(0,te.p)(I=>I&&I.messages&&I.messages.length>0),(0,ye.p)(I=>this.dialog.open(ge.z,{data:{header:this.translate.instant("dialog.attention"),details:`${I.messages[0]}.`}}).afterClosed()),(0,d.T)(()=>this.router.navigate(["search-teetime"]))),{dispatch:!1})}}return r.\u0275fac=function(t){return new(t||r)(e.KVO(a.En),e.KVO(U.Ix),e.KVO(Ve.H),e.KVO(Be.Q),e.KVO(g.il),e.KVO(Re.TC),e.KVO(Me.h),e.KVO(dt.E),e.KVO(Ne.bZ),e.KVO(z.c$))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac}),r})(),Fo=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({providers:[ut],imports:[[be.G,T.MD,m.X1,so,g.md.forFeature("auth",M.gz),a.Vm.forFeature([ho,Co,Ro,Ct,wo]),z.h]]}),r})()},96410:(gt,Pe,h)=>{h.d(Pe,{c:()=>be});var be=(()=>{return(ee=be||(be={}))[ee.MDY=1]="MDY",ee[ee.DMY=2]="DMY",ee[ee.YMD=3]="YMD",be;var ee})()}}]);