"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[567],{21796:(A,b,i)=>{i.d(b,{I:()=>l});var t=i(63815);let l=(()=>{class p{static getValidationErrorMessage(_){const o=[];for(const D in _)_.hasOwnProperty(D)&&o.push(..._[D]);return o}static getErrorMessage(_){let o="An unexpected error occurred.";return _ instanceof Error?o=_.message:"string"==typeof _?o=_:"object"==typeof _&&(o=_.error_description||_.error||o),o}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},37179:(A,b,i)=>{i.d(b,{z:()=>e});var t=i(75403),l=i(92348),p=i(43754),T=i(75137),_=i(29182),o=i(71885),D=i(62444),y=i(73987),F=i(52870),S=i(95705),x=i(83841),d=i(36392),a=i(63815),u=i(18583),M=i(12896),c=i(20811),m=i(14234),g=i(29608),h=i(75764);const P=["isResSuccess"],R=["cctoken"],O=["cardtype"],U=["cardmasked"];function L(s,n){1&s&&(a.j41(0,"div",17)(1,"div",18),a.nrm(2,"div",19),a.j41(3,"div",20),a.nrm(4,"div",21)(5,"div",21)(6,"div",21),a.k0s()()())}function E(s,n){1&s&&(a.j41(0,"button",22),a.EFF(1),a.nI1(2,"translate"),a.k0s()),2&s&&(a.Y8G("mat-dialog-close",!0),a.R7$(1),a.SpI(" ",a.bMT(2,2,"form.next")," "))}function f(s,n){1&s&&(a.j41(0,"button",23),a.EFF(1),a.nI1(2,"translate"),a.k0s()),2&s&&(a.R7$(1),a.SpI(" ",a.bMT(2,1,"form.cancel")," "))}const r=function(s){return{"footer-action":s}};let e=(()=>{class s{constructor(C,v,I,$,j){this.store=C,this.sanitizer=v,this.zone=I,this.baseConfigService=$,this.dialogRef=j,this.isUseCardOnFile=!1,this.isLoadingIframeContent=!0,this.ibxUrl$=(0,d.z)([this.store.pipe((0,t.Lt)(_.N3)),this.store.pipe((0,t.Lt)(T.pF)),this.store.pipe((0,t.Lt)(T.ag)),this.store.pipe((0,t.Lt)(T.Td))]).pipe((0,F.T)(([B,k,N,K])=>{this.isUseCardOnFile=B.isUseCreditCardOnFile;let W=`${this.baseConfigService.serverSettings.onlineApi.replace("onlinereservation","ibx")}/IBXResponse/${l.c.siteName}`;W+=`?customeracct=${K||N&&+N>0?"":k}&playerid=${N}`;const G=o.O.EncodeUriComponentLowercase(W),H=o.O.EncodeUriComponentLowercase(B.ibxMerchantToken);return this.sanitizer.bypassSecurityTrustResourceUrl(`${B.urlGenerateJSToken}/?redirecturl=${G}&merchanttoken=${H}`)})),this.isComponentAlive=!0,this.detectSuccessResponse(),this.isMobile=this.baseConfigService.serverSettings.isMobile}ngOnDestroy(){this.isComponentAlive=!1}onIframeLoaded(){this.isLoadingIframeContent=!1}detectSuccessResponse(){let C=!1;(0,S.Y)(1e3).pipe((0,D.v)(()=>this.isComponentAlive),(0,x.M)(()=>{console.log(" ********************** "),this.zone.run(()=>{"true"===this.isResSuccessInputRef.nativeElement.value&&setTimeout(()=>{!this.isUseCardOnFile&&!C&&(this.store.dispatch(new y.Dh({cc:{token:this.cctokenInputRef.nativeElement.value,cardNumber:`**** **** **** ${this.cardmaskedInputRef.nativeElement.value}`,cardHolder:null,expireMM:null,expireYY:null,address:null,postalCode:null,refInfo:null,cvv:null,cardType:this.cardtypeInputRef.nativeElement.value,cardMasked:this.cardmaskedInputRef.nativeElement.value}})),C=!0),this.dialogRef.close(!0)},1e3)})})).subscribe()}}return s.\u0275fac=function(C){return new(C||s)(a.rXU(t.il),a.rXU(u.up),a.rXU(a.SKi),a.rXU(p.t),a.rXU(M.CP))},s.\u0275cmp=a.VBU({type:s,selectors:[["app-ibx-dialog"]],viewQuery:function(C,v){if(1&C&&(a.GBs(P,5),a.GBs(R,5),a.GBs(O,5),a.GBs(U,5)),2&C){let I;a.mGM(I=a.lsd())&&(v.isResSuccessInputRef=I.first),a.mGM(I=a.lsd())&&(v.cctokenInputRef=I.first),a.mGM(I=a.lsd())&&(v.cardtypeInputRef=I.first),a.mGM(I=a.lsd())&&(v.cardmaskedInputRef=I.first)}},decls:22,vars:14,consts:[["mat-dialog-title",""],[1,"mat-typography"],["class","ph-item","style","min-height: 500px",4,"ngIf"],[2,"width","100%","margin","auto","border","none","min-height","500px",3,"src","load"],["type","hidden","id","cctoken","name","cctoken","value",""],["cctoken",""],["type","hidden","id","cardmasked","name","cardmasked","value",""],["cardmasked",""],["type","hidden","id","ccexpiredate","name","ccexpiredate","value",""],["type","hidden","id","cardtype","name","cardtype","value",""],["cardtype",""],["type","hidden","id","customeracct","name","customeracct","value",""],["type","hidden","name","IsResSuccess","id","IsResSuccess","value","false"],["isResSuccess",""],["align","end",3,"ngClass"],["mat-button","",3,"mat-dialog-close",4,"ngIf"],["mat-button","","mat-dialog-close","",4,"ngIf"],[1,"ph-item",2,"min-height","500px"],[1,"ph-col-12"],[1,"ph-picture"],[1,"ph-row"],[1,"ph-col-12","big"],["mat-button","",3,"mat-dialog-close"],["mat-button","","mat-dialog-close",""]],template:function(C,v){if(1&C&&(a.j41(0,"div")(1,"h2",0),a.EFF(2),a.nI1(3,"translate"),a.k0s(),a.j41(4,"mat-dialog-content",1),a.DNE(5,L,7,0,"div",2),a.j41(6,"div")(7,"iframe",3),a.bIt("load",function(){return v.onIframeLoaded()}),a.nI1(8,"async"),a.k0s()(),a.nrm(9,"input",4,5)(11,"input",6,7)(13,"input",8)(14,"input",9,10)(16,"input",11)(17,"input",12,13),a.k0s(),a.j41(19,"mat-dialog-actions",14),a.DNE(20,E,3,4,"button",15),a.DNE(21,f,3,3,"button",16),a.k0s()()),2&C){const I=a.sdS(18);a.R7$(2),a.JRh(a.bMT(3,8,"payment.enterCreditCardInformation")),a.R7$(3),a.Y8G("ngIf",v.isLoadingIframeContent),a.R7$(2),a.xc7("display",v.isLoadingIframeContent?"none":"block"),a.Y8G("src",a.bMT(8,10,v.ibxUrl$),a.f$h),a.R7$(12),a.Y8G("ngClass",a.eq3(12,r,v.isMobile)),a.R7$(1),a.Y8G("ngIf","true"===I.value),a.R7$(1),a.Y8G("ngIf","false"===I.value||"Cancel"===I.value)}},directives:[M.BI,M.Yi,c.bT,M.E7,c.YU,m.PW,g.$z,M.tx],pipes:[h.D9,c.Jj],styles:[".mat-dialog-content[_ngcontent-%COMP%]{overflow:hidden}"]}),s})()},18048:(A,b,i)=>{i.d(b,{V:()=>M});var t=i(63815),l=i(30519),p=i(65825),T=i(8752),_=i(75403),o=i(75137),D=i(62444),y=i(3126),F=i(83124),S=i(50513),x=i(5696),d=i(83756),a=i(29608),u=i(75764);let M=(()=>{class c{constructor(g,h){this.fb=g,this.store=h,this.applyCreditCard=new t.bkB,this.createToken=new t.bkB,this.cancel=new t.bkB,this.isComponentAlive=!0,this.creditCardLengthForExpinaryInput=T.E.CreditCardLengthForExpinaryInput,this.isDependentUser$=this.store.pipe((0,_.Lt)(o.vI)),this.displayCardExpire="",this.initCreditCardForm()}ngOnDestroy(){this.isComponentAlive=!1}initCreditCardForm(){this.form=this.fb.group({cardNumber:[null,l.k0.required],cardHolder:[null,l.k0.required],expire:["",[l.k0.required,l.k0.maxLength(this.creditCardLengthForExpinaryInput)]],cvv:[null,[l.k0.required,l.k0.minLength(3),l.k0.maxLength(4)]]},{validator:p.c.monthValidator("expire")}),this.form.get("expire").valueChanges.pipe((0,D.v)(()=>this.isComponentAlive)).subscribe(g=>{this.displayCardExpire=g.replace(/\s/g,"").replace("/","")})}submit(){if(!this.form.valid)return;const g=Object.assign(Object.assign({},this.form.value),{expireMM:this.form.controls.expire.value.substr(0,2),expireYY:this.form.controls.expire.value.substr(5,2)}),h=this.form.controls.expire.value.toString();g&&(!g.expireYY||0===g.expireYY.length)&&h&&5===h.length&&(g.expireYY=this.form.controls.expire.value.substr(3,2)),this.forceCardOnFile||this.form.controls.isSaveCardOnFile.value?this.createToken.emit(g):this.applyCreditCard.emit(g)}}return c.\u0275fac=function(g){return new(g||c)(t.rXU(l.ok),t.rXU(_.il))},c.\u0275cmp=t.VBU({type:c,selectors:[["app-creditcard-form"]],inputs:{forceCardOnFile:"forceCardOnFile",isGuest:"isGuest"},outputs:{applyCreditCard:"applyCreditCard",createToken:"createToken",cancel:"cancel"},decls:42,vars:37,consts:[[1,"credit-card-container"],[2,"height","100%"],[2,"height","100%",3,"formGroup","ngSubmit"],[2,"display","flex","flex-direction","column","row-gap","32px","padding","32px 0 16px 0","height","100%"],[3,"name","number","cvc","expiry"],[2,"display","flex","flex-direction","column"],["appearance","outline",1,"full-with"],["type","text","matInput","","formControlName","cardHolder",3,"placeholder"],["matInput","","id","cc-number","type","tel","autocomplete","cc-number","formControlName","cardNumber","ccNumber","",3,"placeholder"],[2,"display","flex","column-gap","1rem"],["id","cc-exp-date","matInput","","type","tel","autocomplete","cc-exp","formControlName","expire","ccExp","",3,"placeholder","maxlength"],["id","cc-cvc","matInput","","type","tel","autocomplete","off","ccCVC","","formControlName","cvv","minlength","3","maxlength","4",3,"placeholder"],[2,"flex-grow","1"],[2,"display","flex"],["mat-button","",2,"flex","1",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"mr-5",2,"flex","1",3,"disabled"]],template:function(g,h){1&g&&(t.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"form",2),t.bIt("ngSubmit",function(){return h.submit()}),t.j41(3,"div",3)(4,"div"),t.nrm(5,"ng-credit-card",4),t.k0s(),t.j41(6,"div",5)(7,"div")(8,"mat-form-field",6)(9,"mat-label"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.nrm(12,"input",7),t.nI1(13,"translate"),t.k0s()(),t.j41(14,"div")(15,"mat-form-field",6)(16,"mat-label"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",8),t.nI1(20,"translate"),t.k0s()(),t.j41(21,"div",9)(22,"mat-form-field",6)(23,"mat-label"),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.nrm(26,"input",10),t.nI1(27,"translate"),t.k0s(),t.j41(28,"mat-form-field",6)(29,"mat-label"),t.EFF(30),t.nI1(31,"translate"),t.k0s(),t.nrm(32,"input",11),t.nI1(33,"translate"),t.k0s()()(),t.nrm(34,"div",12),t.j41(35,"div",13)(36,"button",14),t.bIt("click",function(){return h.cancel.emit()}),t.EFF(37),t.nI1(38,"translate"),t.k0s(),t.j41(39,"button",15),t.EFF(40),t.nI1(41,"translate"),t.k0s()()()()()()),2&g&&(t.R7$(2),t.Y8G("formGroup",h.form),t.R7$(3),t.Y8G("name",null==h.form?null:h.form.controls.cardHolder.value)("number",null==h.form?null:h.form.controls.cardNumber.value)("cvc",null==h.form?null:h.form.controls.cvv.value)("expiry",h.displayCardExpire),t.R7$(5),t.JRh(t.bMT(11,17,"payment.cardHolder")),t.R7$(2),t.FS9("placeholder",t.bMT(13,19,"payment.cardHolder")),t.R7$(5),t.JRh(t.bMT(18,21,"payment.cardNumber")),t.R7$(2),t.FS9("placeholder",t.bMT(20,23,"payment.cardNumber")),t.R7$(5),t.JRh(t.bMT(25,25,"payment.cardExpire")),t.R7$(2),t.FS9("placeholder",t.bMT(27,27,"payment.cardExpire")),t.Y8G("maxlength",h.creditCardLengthForExpinaryInput),t.R7$(4),t.JRh(t.bMT(31,29,"payment.CVV")),t.R7$(2),t.FS9("placeholder",t.bMT(33,31,"payment.CVV")),t.R7$(5),t.SpI(" ",t.bMT(38,33,"form.cancel")," "),t.R7$(2),t.Y8G("disabled",!h.form.valid),t.R7$(1),t.SpI(" ",t.bMT(41,35,"form.submit")," "))},directives:[y.RN,y.m2,l.qT,l.cb,l.j4,F.Y,S.rl,S.nJ,x.fg,l.me,l.BC,l.JD,d.Cf,d.QQ,l.tU,d.Zp,l.xh,a.$z],pipes:[u.D9],styles:[".credit-card-container[_ngcontent-%COMP%]{max-width:450px;margin:0 auto;padding:20px;overflow-y:auto;height:70vh}@media (max-width: 460px){.credit-card-container[_ngcontent-%COMP%]{height:100%;padding-bottom:25px!important}}  .credit-card-container .mat-form-field-appearance-outline .mat-form-field-infix{padding:.8em 0!important;margin-top:0}"]}),c})()},85940:(A,b,i)=>{i.d(b,{i:()=>a});var t=i(75137),l=i(29182),p=i(75403),T=i(43754),_=i(73987),o=i(83841),D=i(62444),y=i(63815),F=i(12896),S=i(18048),x=i(95216),d=i(75764);let a=(()=>{class u{constructor(c,m,g){this.store=c,this.dialogRef=m,this.baseConfigurationService=g,this.totalCards=null,this.reservationOptions$=this.store.pipe((0,p.Lt)(l.N3)),this.creditCardResponseMessage$=this.store.pipe((0,p.Lt)(t._F)),this.creditCardSuccess$=this.store.pipe((0,p.Lt)(t.Ty)),this.isLoading$=this.store.pipe((0,p.Lt)(t.n5)),this.isMobile=!1,this.isComponentAlive=!0}ngOnInit(){this.isMobile=this.baseConfigurationService.serverSettings.isMobile}ngOnDestroy(){this.isComponentAlive=!1}ngAfterViewInit(){this.store.pipe((0,p.Lt)(t.sw),(0,o.M)(c=>{this.totalCards=null===this.totalCards?c:this.totalCards,c>this.totalCards&&this.dialogRef.close()}),(0,D.v)(()=>this.isComponentAlive)).subscribe(),this.store.pipe((0,p.Lt)(t.et),(0,o.M)(c=>{c&&(this.store.dispatch(new _.Zb),this.dialogRef.close())}),(0,D.v)(()=>this.isComponentAlive)).subscribe()}onClickBack(){this.dialogRef.close()}onApplyCreditCard(c){this.store.dispatch(new _.QJ({cc:c})),this.dialogRef.close()}onCreateToken(c){this.store.dispatch(new _.w0(c))}}return u.\u0275fac=function(c){return new(c||u)(y.rXU(p.il),y.rXU(F.CP),y.rXU(T.t))},u.\u0275cmp=y.VBU({type:u,selectors:[["app-credit-card-on-file-dialog"]],decls:9,vars:7,consts:[["mat-dialog-title",""],[3,"forceCardOnFile","createToken","applyCreditCard","cancel"],["bdOpacity","0.9","bdColor","rgba(51,51,51,0.4)","size","default","color","#fff","type","ball-scale-pulse","fullScreen","false"],[2,"font-size","15px","color","white"]],template:function(c,m){1&c&&(y.j41(0,"h2",0),y.EFF(1),y.nI1(2,"translate"),y.k0s(),y.j41(3,"app-creditcard-form",1),y.bIt("createToken",function(h){return m.onCreateToken(h)})("applyCreditCard",function(h){return m.onApplyCreditCard(h)})("cancel",function(){return m.onClickBack()}),y.k0s(),y.j41(4,"div")(5,"ngx-spinner",2)(6,"p",3),y.EFF(7),y.nI1(8,"translate"),y.k0s()()()),2&c&&(y.R7$(1),y.JRh(y.bMT(2,3,"payment.creditCardOnFile")),y.R7$(2),y.Y8G("forceCardOnFile",!0),y.R7$(4),y.SpI("",y.bMT(8,5,"loading.loading"),"..."))},directives:[F.BI,S.V,x.et],pipes:[d.D9],encapsulation:2}),u})()},65825:(A,b,i)=>{i.d(b,{c:()=>t});class t{static monthValidator(p){return T=>{const _=T.controls[p];if(_.dirty){const o=+_.value.substring(0,2);_.setErrors(o>0&&o<13?null:{invalidMonth:"Your month is invalid."})}return null}}}},71885:(A,b,i)=>{i.d(b,{O:()=>p});var t=i(84573),l=i(63815);let p=(()=>{class T{constructor(){}static isDynamicPrice(o){return!!(o&&o.auctionId&&o.auctionId>0&&o.auction&&o.auction.auctionType===t.Y.DynamicPrice)}static EncodeUriComponentLowercase(o){return encodeURIComponent(o).replace("%2B","%2b").replace("%2C","%2c").replace("%2F","%2f").replace("%3A","%3a").replace("%3B","%3b").replace("%3D","%3d").replace("%3F","%3f")}}return T.\u0275fac=function(o){return new(o||T)},T.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},91263:(A,b,i)=>{i.d(b,{H:()=>L});var t=i(43754),l=i(46396),p=i(52870),T=i(51004);let _=(()=>{class E extends T.r{static create(r,e=null){return e&&!r?Object.assign({},e):new E(r,null!=e?e:this.defaultValue).value}}return E.defaultValue={code:"",description:"",percentDiscount:null,amountDiscount:null,couponType:null,applyAllCategory:!1,expiredate:null,couponNote:"",isRestrictByDayAndTime:!1,restrictType:null,isAppliedOnlinePackage:!1,applyForClassCode:[],applyForItemCategoryId:[],applyForProductCode:[],applyForCourseId:[],isPackageDiscount:!1,applyForPackageCode:[],isAppliedToGreenFee:!1,isAppliedToCartFee:!1,isCouponValid:!1,validateMessage:""},E})();var o=i(88627),D=i(6475),y=i(47778),F=i(36132),S=i(27457),x=i(75403),d=i(29182),a=i(36392),u=i(46566),M=i(97670),c=i(47945),m=i(40686),g=i(33925);class h extends T.r{static create(f,r=null){if(r&&!f)return Object.assign({},r);const e=Object.assign(Object.assign({},f),{shItemPrices:(null==f?void 0:f.shItemPrices)?f.shItemPrices.map(n=>g.f.create(n)):[],shItemPricesGroup:(null==f?void 0:f.shItemPricesGroup)?f.shItemPricesGroup.map(n=>m.O.create(n)):[],summaryDetail:c._.create(null==f?void 0:f.summaryDetail,c._.defaultValue),advancedBookingFee:M.t.create(null==f?void 0:f.advancedBookingFee)});return new h(e,null!=r?r:this.defaultValue).value}}h.defaultValue={teeSheetId:0,startTime:new Date,courseTimeId:0,startingTee:0,crossOverTeeSheetId:null,crossOverCourseName:"",isSingleCrossOver:!1,participants:0,courseId:0,courseDate:new Date,teeTypeId:0,course1Id:null,course2Id:null,course3Id:null,holes:0,defaultHoles:null,siteId:0,courseName:"",courseNameIncludeCrossOver:"",shItemPrices:[],shItemPricesGroup:[],holesDisplay:"",playersDisplay:"",minPlayer:0,maxPlayer:0,availableParticipantNo:[],summaryDetail:null,playersRateCode:[],isIncludeCartPriceInPreview:!1,crossOverInfo:"",playerNames:[],blockTexts:[],isShowCartDetail:!1,isIncludeCartPriceDisplay:!1,bookingNotes:[],defaultClassCode:"",transactionId:null,advancedBookingFee:null};let P=(()=>{class E extends T.r{static create(r,e=null){if(e&&!r)return Object.assign({},e);const s=Object.assign(Object.assign({},r),{teetimes:(null==r?void 0:r.teetimes)?r.teetimes.map(C=>F.B.create(C)):[]});return new E(s,null!=e?e:this.defaultValue).value}}return E.defaultValue={teetimes:[],transactionId:null},E})();class R extends T.r{static create(f,r=null){if(r&&!f)return Object.assign({},r);const e=Object.assign(Object.assign({},f),{fromDate:new Date(f.fromDate),toDate:new Date(f.toDate),fromTime:new Date(f.fromTime),toTime:new Date(f.toTime)});return new R(e,null!=r?r:this.defaultValue).value}}R.defaultValue={cartRestrictionId:0,fromDate:new Date,toDate:new Date,fromTime:new Date,toTime:new Date,courseId:0,courseName:"",days:[],holes:[]};var O=i(63815);const U=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let L=(()=>{class E extends S.s{constructor(r,e,s){super(r,e,s),this.http=r,this.baseConfigService=e,this.store=s,this.courseOptions=[],(0,a.z)([this.store.pipe((0,x.Lt)(d.ei))]).pipe((0,p.T)(([n])=>{this.courseOptions=n})).subscribe()}getTeeSheet(r){let e=new l.Nl;return e=e.append("teeSheetId",r.teesheetId.toString()),e=e.append("holes",r.holes.toString()),e=e.append("numberOfPlayer",r.numberOfPlayer.toString()),e=e.append("classCode",r.classCode),e=e.append("defaultOnlineRate","N"),r.courseIds&&(e=e.append("courseIds",r.courseIds.join(","))),e=e.append("isUseCapacityPricing",r.isUseCapacityPricing.toString()),e=e.append("memberStoreId",r.memberStoreId.toString()),r.thirdPartyId&&(e=e.append("thirdPartyId",r.thirdPartyId.toString())),r.memberGroupIds&&(e=e.append("memberGroupIds",r.memberGroupIds.join(","))),this.http.get(`${this.baseUrl}/TeeTime`,{params:e}).pipe((0,p.T)(s=>(s.isIncludeCart=s&&s.shItemPrices.length>0&&s.shItemPrices.some(n=>n.shItemCode.toLowerCase().includes("cart")),F.B.create(s))))}reserveTeeTime(r){return this.http.post(`${this.baseUrl}/ReserveTeeTimes`,r).pipe((0,p.T)(e=>e))}getLastPlayingPartners(r,e,s){let n=new l.Nl({encoder:new D.dc});return n=n.append("golferId",r.toString()),n=n.append("pageSize",e.toString()),n=n.append("currentPage",s.toString()),this.http.get(`${this.baseUrl}/GetLastPlayingPartners`,{params:n}).pipe((0,p.T)(C=>(C.items.map(v=>v.isAdded=!1),C)))}getTeeSheetNotes(r,e){if(!r||0===r.length)return(0,u.$)(()=>new Error("Required courseIds"));let s=new l.Nl({encoder:new D.dc});if(s=s.append("courseIds",r),e){const n=new Date(e.toString());s=s.append("courseDate",n.toUTCString())}return this.http.get(`${this.baseUrl}/TeeSheetNotes`,{params:s}).pipe(n=>n)}getCoupon(r){let e=new l.Nl({encoder:new D.dc});return e=e.append("couponCode",r.couponCode),e=e.append("courseId",`${r.courseId}`),e=e.append("classcode",r.classCode),r.greenFeeCodes&&r.greenFeeCodes.length>0&&(e=e.append("greenFeeCodes",r.greenFeeCodes)),r.cartFeeCodes&&r.cartFeeCodes.length>0&&(e=e.append("cartFeeCodes",r.cartFeeCodes)),r.packageCodes&&r.packageCodes.length>0&&(console.warn(r.packageCodes),e=e.append("packageCodes",r.packageCodes)),e=e.append("teeTime",`${r.teeTime}`),this.http.get(`${this.baseUrl}/ApplyCoupon`,{params:e}).pipe((0,p.T)(s=>_.create(s)))}getCourses(){return this.http.get(`${this.baseUrl}/OnlineCourses`).pipe((0,p.T)(r=>r&&r.length>0?r.map(e=>y.b.create(e)):[]))}getSiteInfo(r){return this.http.get(`${this.baseUrl}/SiteInfo/${r}`).pipe(e=>e)}createWriteInPlayer(r){return this.http.post(`${this.baseUrl}/Register`,r).pipe((0,p.T)(e=>{if(!e.isSuccess)return Object.assign(Object.assign({},e),{content:null});const{content:s}=e,n={acct:s.acct||null,firstName:s.first||null,lastName:s.last||null,classCode:s.classCode||null,golferId:s.golferId||0,playerId:s.playerId||0,dependentId:s.dependentId||0,email:s.email||null,storeId:s.storeId||o.B.DEFAULT_STORE_ID,fullName:s.fullName||null,isWriteIn:r.isWriteIn||!1};return Object.assign(Object.assign({},e),{content:n})}))}editWriteInPlayer(r){return this.http.post(`${this.baseUrl}/EditWriteInPlayer`,r).pipe((0,p.T)(e=>e))}calculateTeetimePrices(r){return this.http.post(`${this.baseUrl}/TeeTimePricesCalculation`,r).pipe((0,p.T)(e=>{const s=h.create(e);return this.courseOptions.find(C=>C.courseId===s.courseId),s.shItemPricesGroup.forEach(C=>{C.displayPrice=C.applyCouponToSubTotal?C.priceBeforeDiscount:C.price}),s}))}calculateGroupBookingsTeeTimePrices(r){return this.http.post(`${this.baseUrl}/TeeTimePricesCalculationGroupBookings`,r).pipe((0,p.T)(e=>P.create(e)))}cancelBooking(r){return this.http.post(`${this.baseUrl}/CancelReservation`,r).pipe(e=>e)}getBookingRuleModels(r,e){if(!e||0===e.length)return(0,u.$)(()=>new Error("Required courseIds"));let s=new l.Nl;return s=s.append("classcode",r),s=s.append("courseIds",e.join(",")),this.http.get(`${this.baseUrl}/BookingRuleModels`,{params:s}).pipe(n=>n)}checkAdvanceBookingRule(r){let e=new l.Nl;return e=e.append("golferId",r.golferId.toString()),e=e.append("classCode",r.classCode.toString()),e=e.append("teesheetIds",r.teesheetIds.join(",")),this.http.get(`${this.baseUrl}/CheckAdvanceBookingRules`,{params:e}).pipe(s=>s)}getMemberInfoChange(r,e){let s=new l.Nl;return s=e&&e.length>0?s.append("userName",e):s.append("email",r),this.http.get(`${this.baseUrl}/MemberInfoChange`,{params:s}).pipe(n=>n)}createReservationNotes(r){return this.http.post(`${this.baseUrl}/ReservationNotes`,r).pipe(e=>e)}checkBookingLimit(r,e,s,n,C=!1){let v=new l.Nl;return v=v.append("golferId",e),v=v.append("teesheetId",s),v=v.append("IsBuddy",C),r&&(v=v.append("acct",r)),n&&(v=v.append("MemberClass",n)),this.http.get(`${this.baseUrl}/CheckBookingLimit`,{params:v}).pipe(I=>I)}getAvailableCrossOverPlayer(r){let e=new l.Nl;return e=e.append("teesheetId",r.teeSheetId),e=e.append("crossOverTeeSheetId",r.crossOverTeeSheetId),e=e.append("holes",r.holes),this.http.get(`${this.baseUrl}/PlayerCrossOverAvailable`,{params:e}).pipe((0,p.T)(s=>s))}checkCartRestriction(r,e,s){let n=new l.Nl;return n=n.append("courseId",r),n=n.append("date",e.toString()),n=n.append("day",U[new Date(e).getDay()]),n=n.append("hole",s),this.http.get(`${this.baseUrl}/CheckCartRestriction`,{params:n}).pipe(C=>C)}getCartRestrictionsRange(r,e,s){let n=new l.Nl;return n=n.append("courseId",r),n=n.append("day",U[new Date(e).getDay()]),n=n.append("hole",s),this.http.get(`${this.baseUrl}/GetCartRestrictionsRange`,{params:n}).pipe((0,p.T)(C=>C.map(v=>R.create(v))))}}return E.\u0275fac=function(r){return new(r||E)(O.KVO(l.Qq),O.KVO(t.t),O.KVO(x.il))},E.\u0275prov=O.jDH({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},38169:(A,b,i)=>{i.d(b,{Ay:()=>T});var t=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,l=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,p=/[^-+\dA-Z]/g;function T(d,a,u,M){if(1===arguments.length&&"string"==typeof d&&!/\d/.test(d)&&(a=d,d=void 0),(d=d||0===d?d:new Date)instanceof Date||(d=new Date(d)),isNaN(d))throw TypeError("Invalid date");var c=(a=String(_[a]||a||_.default)).slice(0,4);("UTC:"===c||"GMT:"===c)&&(a=a.slice(4),u=!0,"GMT:"===c&&(M=!0));var m=function(){return u?"getUTC":"get"},g=function(){return d[m()+"Date"]()},h=function(){return d[m()+"Day"]()},P=function(){return d[m()+"Month"]()},R=function(){return d[m()+"FullYear"]()},O=function(){return d[m()+"Hours"]()},U=function(){return d[m()+"Minutes"]()},L=function(){return d[m()+"Seconds"]()},E=function(){return d[m()+"Milliseconds"]()},f=function(){return u?0:d.getTimezoneOffset()},r=function(){return F(d)},s={d:function(){return g()},dd:function(){return D(g())},ddd:function(){return o.dayNames[h()]},DDD:function(){return y({y:R(),m:P(),d:g(),_:m(),dayName:o.dayNames[h()],short:!0})},dddd:function(){return o.dayNames[h()+7]},DDDD:function(){return y({y:R(),m:P(),d:g(),_:m(),dayName:o.dayNames[h()+7]})},m:function(){return P()+1},mm:function(){return D(P()+1)},mmm:function(){return o.monthNames[P()]},mmmm:function(){return o.monthNames[P()+12]},yy:function(){return String(R()).slice(2)},yyyy:function(){return D(R(),4)},h:function(){return O()%12||12},hh:function(){return D(O()%12||12)},H:function(){return O()},HH:function(){return D(O())},M:function(){return U()},MM:function(){return D(U())},s:function(){return L()},ss:function(){return D(L())},l:function(){return D(E(),3)},L:function(){return D(Math.floor(E()/10))},t:function(){return O()<12?o.timeNames[0]:o.timeNames[1]},tt:function(){return O()<12?o.timeNames[2]:o.timeNames[3]},T:function(){return O()<12?o.timeNames[4]:o.timeNames[5]},TT:function(){return O()<12?o.timeNames[6]:o.timeNames[7]},Z:function(){return M?"GMT":u?"UTC":x(d)},o:function(){return(f()>0?"-":"+")+D(100*Math.floor(Math.abs(f())/60)+Math.abs(f())%60,4)},p:function(){return(f()>0?"-":"+")+D(Math.floor(Math.abs(f())/60),2)+":"+D(Math.floor(Math.abs(f())%60),2)},S:function(){return["th","st","nd","rd"][g()%10>3?0:(g()%100-g()%10!=10)*g()%10]},W:function(){return r()},WW:function(){return D(r())},N:function(){return S(d)}};return a.replace(t,function(n){return n in s?s[n]():n.slice(1,n.length-1)})}var _={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},D=function(a){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(a).padStart(u,"0")},y=function(a){var u=a.y,M=a.m,c=a.d,m=a._,g=a.dayName,h=a.short,P=void 0!==h&&h,R=new Date,O=new Date;O.setDate(O[m+"Date"]()-1);var U=new Date;return U.setDate(U[m+"Date"]()+1),R[m+"FullYear"]()===u&&R[m+"Month"]()===M&&R[m+"Date"]()===c?P?"Tdy":"Today":O[m+"FullYear"]()===u&&O[m+"Month"]()===M&&O[m+"Date"]()===c?P?"Ysd":"Yesterday":U[m+"FullYear"]()===u&&U[m+"Month"]()===M&&U[m+"Date"]()===c?P?"Tmw":"Tomorrow":g},F=function(a){var u=new Date(a.getFullYear(),a.getMonth(),a.getDate());u.setDate(u.getDate()-(u.getDay()+6)%7+3);var M=new Date(u.getFullYear(),0,4);M.setDate(M.getDate()-(M.getDay()+6)%7+3);var c=u.getTimezoneOffset()-M.getTimezoneOffset();return u.setHours(u.getHours()-c),1+Math.floor((u-M)/6048e5)},S=function(a){var u=a.getDay();return 0===u&&(u=7),u},x=function(a){return(String(a).match(l)||[""]).pop().replace(p,"").replace(/GMT\+0000/g,"UTC")}}}]);