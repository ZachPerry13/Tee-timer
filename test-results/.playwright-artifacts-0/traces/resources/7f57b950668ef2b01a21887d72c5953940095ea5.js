"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[682],{8752:(C,m,s)=>{s.d(m,{E:()=>o});let o=(()=>{class r{}return r.CreditCardLengthForExpinaryInput=7,r.CreateHostedTokenizeURL="hp/api/HostedTokenize/CreateHostedTokenize",r.RefreshGracePeriod=60,r})()},45737:(C,m,s)=>{s.d(m,{o:()=>o});var o=(()=>{return(r=o||(o={}))[r.Amount=0]="Amount",r[r.Percentage=1]="Percentage",o;var r})()},61682:(C,m,s)=>{s.d(m,{Q:()=>o});var o=(()=>{return(r=o||(o={})).messageDetail="messageDetail",r.messageKey="messageKey",r.messageType="messageType",r.messageTypeId="messageTypeId",o;var r})()},96536:(C,m,s)=>{s.d(m,{S:()=>o});var o=(()=>{return(r=o||(o={}))[r.Hours12=1]="Hours12",r[r.Hours24=2]="Hours24",o;var r})()},97670:(C,m,s)=>{s.d(m,{t:()=>r});var o=s(51004);let r=(()=>{class c extends o.r{static create(d,n=null){return n&&!d?Object.assign({},n):new c(d,null!=n?n:this.defaultValue).value}}return c.defaultValue={bookingFeePrice:0,isPerTeeTime:!1,bookingFeeDescription:"",bookingFeeName:"",bookingFeePriceNotIncludeTax:0,taxCode:"",classCode:""},c})()},47778:(C,m,s)=>{s.d(m,{b:()=>r});var o=s(51004);let r=(()=>{class c extends o.r{static create(d,n=null){if(n&&!d)return Object.assign({},n);const p=Object.assign(Object.assign({},d),{courseName:d.isSetOnlineCourseName&&d.onlineCourseName?d.onlineCourseName:d.courseName});return new c(p,null!=n?n:this.defaultValue).value}}return c.defaultValue={courseId:0,courseName:"",siteId:0,courseTypeId:0,teeSheetTypeId:0,courseColor:0,courseLogo:"",order:0,guid:"",courseNumber:0,isDisable9Hole:!1,isDisable18Hole:!1,courseCode:"",homeCourseStoreId:0,isDefaultSelected:!1,isEnableGroupBookings:!1,limitGroupSearchResults:0,groupBookingBetweenTeeTime:0,groupBookingSizeOption:0,minGroupBookingPlayerLimit:0,maxGroupBookingPlayerLimit:0,classCode:"",isSetOnlineCourseName:!1,onlineCourseName:"",storeId:0},c})()},47945:(C,m,s)=>{s.d(m,{_:()=>r});var o=s(51004);let r=(()=>{class c extends o.r{static create(d,n=null){return n&&!d?Object.assign({},n):new c(d,this.defaultValue).value}}return c.defaultValue={subTotal:0,totalTax:0,total:0,couponDiscount:0,totalDueNow:0,totalDueAtCourse:0,totalAdvancedBookingFee:0,totalSurcharge:0,totalSurchargeNoTax:0,surchargePercent:0},c})()},40686:(C,m,s)=>{s.d(m,{O:()=>r});var o=s(51004);let r=(()=>{class c extends o.r{static create(d,n=null){return n&&!d?Object.assign({},n):new c(d,null!=n?n:this.defaultValue).value}}return c.defaultValue={qty:0,itemCode:"",itemDesc:"",price:0,taxInclusivePrice:0,isTaxInclusive:!1,taxAmount:0,extendedPrice:0,packageName:"",displayPrice:0,shItemCode:"",priceBeforeDiscount:0,applyCouponToSubTotal:!1},c})()},33925:(C,m,s)=>{s.d(m,{f:()=>P});var o=s(51004),r=s(9381);class c extends o.r{static create(n,p=null){return p&&!n?Object.assign({},p):new c(n,null!=p?p:this.defaultValue).value}}c.defaultValue={active:!0,categoryId:0,description:"",discontinued:!1,endTime:new Date,fullDesc:"",golfType:0,imageName:"",isCoupon:!1,isFreeShipping:!1,isOnline:!1,isPeriodTime:!1,isStoreTaxInclusive:!1,isTaxInclusive:!1,itemCode:"",packageCode:"",packageId:0,packageItemId:0,packageName:"",qty:0,recurringPayment:0,retailPrice:0,smallImageName:"",startTime:new Date,storeId:0,storePrice:null,storeTaxCode:"",taxCode:0,taxInclusivePrice:0,totalPriceByUser:!1,unitPrice:0,useStorePrice:!1};class P extends o.r{static create(n,p=null){if(p&&!n)return Object.assign({},p);const y=Object.assign(Object.assign({},n),{packageItems:(null==n?void 0:n.packageItems)?n.packageItems.map(k=>c.create(k)):[]});return new P(y,null!=p?p:this.defaultValue).value}}P.defaultValue={shItemCode:"",itemCode:"",itemDesc:"",priceRateWizard:null,price:0,displayPrice:0,displayPriceBeforeDiscount:0,taxInclusivePrice:0,isTaxInclusive:!1,taxCode:"N/A",packageId:0,packageName:"",packageItems:[],isPackageIncludedCart:!1,isPackageIncludedHalfCart:!1,isPackageIncludedCaddie:!1,isPackageIncludedClub:!1,isPackageIncludedGreenFee:!1,participantNo:0,priceBeforeDiscount:0,taxInclusivePriceBeforeDiscount:0,capacityPrice:null,capacityStartPrice:null,isDynamicPriceItem:!1,priceType:r.F.Unknown,priceTypeName:""}},36132:(C,m,s)=>{s.d(m,{B:()=>T});var o=s(33925),r=s(45737),c=s(84573),P=s(51004);class d extends P.r{static create(u,h=null){if(h&&!u)return Object.assign({},h);const O=Object.assign({},u);return new d(O,null!=h?h:this.defaultValue).value}}d.defaultValue={auctionId:0,auctionType:c.Y.None,auctionPrice:0,auctionGreenFeePrice:0,auctionCartFeePrice:0,auctionMinGolfer:0,auctionIsForceCart:!1,auctionDiscountType:r.o.Amount,auctionNotes:null,auctionIsInventoryPackage:!1,auctionPackageCodes:null,auctionValuePackages:[],allowGFDiscount:!1};var n=s(40686),p=s(47945),y=s(97670);class T extends P.r{static create(u,h=null){if(h&&!u)return Object.assign({},h);const O=Object.assign(Object.assign({},u),{auction:(null==u?void 0:u.auction)?d.create(u.auction):null,shItemPrices:(null==u?void 0:u.shItemPrices)?u.shItemPrices.map(v=>o.f.create(v)):[],shItemPricesGroup:(null==u?void 0:u.shItemPricesGroup)?u.shItemPricesGroup.map(v=>n.O.create(v)):[],summaryDetail:p._.create(null==u?void 0:u.summaryDetail,p._.defaultValue),advancedBookingFees:(null==u?void 0:u.advancedBookingFees)?u.advancedBookingFees.map(v=>y.t.create(v)):[]});return new T(O,null!=h?h:this.defaultValue).value}}T.defaultValue={numberOfParticipants:0,teetimeType:"",dayOfWeek:"",isIncludeCart:!1,availableParticipantNo:[],teeSheetId:0,startTime:new Date,courseTimeId:0,startingTee:0,crossOverTeeSheetId:null,crossOverCourseName:"",isSingleCrossOver:!1,is9HoleOnly:!1,is18HoleOnly:!1,participants:0,courseId:0,courseDate:new Date,defaultRateCode:"",defaultRateCodeByCourseTime:"",auctionId:null,teeTypeId:0,isCrossOverOnly:!1,course1Id:null,course2Id:null,course3Id:null,holes:0,defaultHoles:null,changeCrossOverTeeSheetId:null,siteId:0,shItemPrices:[],shItemPricesGroup:[],courseName:"",courseNameIncludeCrossOver:"",holesDisplay:"",playersDisplay:"",minPlayer:0,maxPlayer:0,summaryDetail:null,auction:null,playersRateCode:[],selectedValuePackageCode:"",isNotAllowSingleBooking:!1,isNotAllowTwosomeBooking:!1,isNotAllowThreesomeBooking:!1,capacityPricingId:0,isIncludeCartPriceInPreview:!1,isShowSeparateGreenCartFee:!1,crossOverInfo:"",sessionGuid:null,isHideTeeTimePrice:!1,isShowNotesDynamicPrice:!1,notesDynamicPrice:"",isConseccutiveTeeTime:!1,playerNames:[],blockTexts:[],availableSlot:0,isDisableTeeTimeForShowTabbedTeeSheetView:!1,isTeeSheetViewMode:!1,blockGroupId:null,blockText:"",defaultRateByBlocking:"",defaultCartByBlocking:0,isForceRateByBlocking:!1,isDailyDeal:!1,isDiscountTeeTime:!1,isShowCartDetail:!1,isIncludeCartPriceDisplay:!1,packageItem:null,teeSheetPrice:0,cartFeePrice:0,teeSheetDiscountPrice:0,displayCartFee:"",displaySpecialPrice:"",isDynamicPrice:!1,advancedBookingFees:[],advancedBookingFee:null,isSelected:!1,isLocked:!1,isContain9HoleItems:!1,isContain18HoleItems:!1,defaultClassCode:"R",isDisabled9Hole:!1,isDisabled18Hole:!1,bookingNotes:[],allowNumberOfGolfers:[],teeSuffix:"",transactionId:null,courseTimeParticipants:0,isTeeSheetIncludeTax:!1,isCartRestrict9Hole:!1,isCartRestrict18Hole:!1}},27457:(C,m,s)=>{s.d(m,{s:()=>N});var o=s(46396),r=s(75403),c=s(62444),P=s(29182),d=s(52870),n=s(92348),p=s(43754),y=s(69628),T=s(45737),k=s(36132),u=s(61682),h=s(36392),O=s(46566),b=(()=>{return(l=b||(b={}))[l.None=0]="None",l[l.GreenFee=1]="GreenFee",l[l.HalfCart=2]="HalfCart",l[l.FullCart=3]="FullCart",l[l.OneCaddie=4]="OneCaddie",l[l.TwoCaddies=5]="TwoCaddies",l[l.ThreeCaddies=6]="ThreeCaddies",l[l.FourCaddies=7]="FourCaddies",l[l.DoubleCaddies=8]="DoubleCaddies",l[l.ClubRental=9]="ClubRental",l[l.PremiumClubRental=10]="PremiumClubRental",b;var l})(),v=s(63815);let N=(()=>{class l{constructor(e,i,a){this.http=e,this.baseConfigService=i,this.store=a,this.baseUrl=n.c.onlineApi,this.baseRefUrl=n.c.referencesApi,this.isAlive=!0,this.baseConfigService.isReady?this.baseUrl=this.baseConfigService.serverSettings.onlineApi:this.baseConfigService.settingsLoaded$.subscribe(()=>this.baseUrl=this.baseConfigService.serverSettings.onlineApi),(0,h.z)([this.store.pipe((0,r.Lt)(P.N3)),this.store.pipe((0,r.Lt)(P.JX))]).pipe((0,d.T)(([t,I])=>{this.reservationOptions=t,this.allRules=I}),(0,c.v)(()=>this.isAlive)).subscribe(),this.moneyFormatter=new Intl.NumberFormat("en-US",{style:"currency",currency:this.reservationOptions?this.reservationOptions.currencyCode:"USD",minimumFractionDigits:2})}ngOnDestroy(){this.isAlive=!1}searchTeetimes(e){if(!e.courseIds||0===e.courseIds.length)return(0,O.$)(()=>new Error("Required courseIds"));let i=new o.Nl;if(i=i.append("searchDate",new Date(e.searchDate).toDateString()),i=i.append("holes",e.holes.toString()),i=i.append("numberOfPlayer",e.numberOfPlayer.toString()),e.courseIds&&(i=i.append("courseIds",e.courseIds.join(","))),i=i.append("searchTimeType",e.searchTimeType.toString()),e.hasOwnProperty("teeOffTime")&&e.teeOffTime&&e.teeOffTime.isChangeTeeOffTime){let a=Math.floor(e.teeOffTime.teeOffTimeMin),t=Math.floor(e.teeOffTime.teeOffTimeMax);a=Math.max(0,a),t=Math.max(0,t),a=Math.min(23,a),t=Math.min(23,t),i=i.append("teeOffTimeMin",a.toString()),i=i.append("teeOffTimeMax",t.toString()),i=i.append("isChangeTeeOffTime",e.teeOffTime.isChangeTeeOffTime.toString())}return e.teeSheetSearchView&&(i=i.append("teeSheetSearchView",e.teeSheetSearchView.toString())),i=i.append("classCode",e.classCode),i=i.append("defaultOnlineRate","N"),i=i.append("isUseCapacityPricing",e.isUseCapacityPricing.toString()),i=i.append("memberStoreId",e.memberStoreId.toString()),i=i.append("searchType",e.searchType.toString()),e.thirdPartyId&&(i=i.append("thirdPartyId",e.thirdPartyId.toString())),e.groupBookingNumberOfPlayer&&(i=i.append("groupBookingNumberOfPlayer",e.groupBookingNumberOfPlayer.toString())),e.memberGroupIds&&(i=i.append("memberGroupIds",e.memberGroupIds.join(","))),this.http.get(`${this.baseUrl}/TeeTimes`,{params:i}).pipe((0,d.T)(a=>{if(!Object.keys(a).includes(u.Q.messageKey)){const t=[];return a.forEach(I=>{const f=k.B.create(I),g=e.holes;f.packageItem=this.getPackageItem(f.shItemPrices,g),f.teeSheetPrice=this.getTeeSheetPrice(f,g,!1),f.cartFeePrice=this.getCartFeePrice(f,g,!1),f.displayCartFee=this.displayCartFee(f),f.isDiscountTeeTime&&(f.teeSheetDiscountPrice=this.getTeeSheetPrice(f,g,!0)),f.isDailyDeal&&this.displaySpecialPrice(f),f.numberOfParticipants=f.courseTimeParticipants,t.push(f)}),t}return a}))}getPackageItem(e,i){if(!e)return null;let a;return 0===i?(a=this.getPackageItemByHole(e,18),a||(a=this.getPackageItemByHole(e,9))):a=this.getPackageItemByHole(e,i),a}getPackageItemByHole(e,i){return e.find(a=>a.shItemCode.includes(y.W.Package)&&a.shItemCode.includes(i.toString()))}getTeeSheetPrice(e,i,a=!1){var t,I;if(!e.shItemPrices)return 0;const f=D=>e.shItemPrices.find(x=>x.shItemCode.toLowerCase().includes(`${y.W.GreenFee.toLowerCase()}${D}`));let g;if(g=0===i?f(18)||f(9):f(i),!g)return e.packageItem?e.packageItem.displayPrice:0;if(g&&g.isDynamicPriceItem){let D=0;return e.isIncludeCartPriceDisplay&&(D=this.getCartFeePrice(e,i,a)),g.displayPrice+D}const B=D=>e.shItemPrices.find(x=>x.shItemCode.toLowerCase().includes(`${y.W.OtherFees.toLowerCase()}${D}`));let F;F=0===i?B(18)||B(9):B(i);let S=0;return S=a?null!==(t=null==g?void 0:g.displayPriceBeforeDiscount)&&void 0!==t?t:S:null!==(I=null==g?void 0:g.displayPrice)&&void 0!==I?I:S,F&&(S+=F.displayPrice),e.isIncludeCartPriceDisplay&&(S+=this.getCartFeePrice(e,i,a)),S}getCartFeePrice(e,i,a=!1){if(!e.shItemPrices)return 0;let t;if(0===i?(t=this.findCartItemPrice(e,"18","online"),t||(t=this.findCartItemPrice(e,"18")),t||(t=this.findCartItemPrice(e,"9","online")),t||(t=this.findCartItemPrice(e,"9")),t=t||this.getPackageFullCart(e,18)||this.getPackageFullCart(e,9)):(t=this.findCartItemPrice(e,i.toString(),"online"),t||(t=this.findCartItemPrice(e,i.toString())),t=t||this.getPackageFullCart(e,i)),!t)return 0;const I=t.isTaxInclusive||e.isIncludeTaxForCartFee;return a?I?0!==t.taxInclusivePriceBeforeDiscount?t.taxInclusivePriceBeforeDiscount:t.taxInclusivePrice:0!==t.priceBeforeDiscount?t.priceBeforeDiscount:t.price:I?t.taxInclusivePrice:t.price}findCartItemPrice(e,i,a=""){const t=`cart${i}${a}`;return e.shItemPrices.find(I=>I.shItemCode.toLowerCase().includes(t)&&!e[`isDisabled${i}Hole`])}displayCartFee(e){if(e.isDailyDeal){if(!e.auction.auctionIsForceCart)return"WALKING RATE";if(e.isIncludeCartPriceInPreview&&e.isShowSeparateGreenCartFee)return`CART RATE ${this.moneyFormatter.format(e.cartFeePrice)}`;if(e.isIncludeCartPriceInPreview)return"CART INCLUDED"}else{if(e.isIncludeCartPriceInPreview&&e.isShowSeparateGreenCartFee)return`CART RATE ${this.moneyFormatter.format(e.cartFeePrice)}`;if(e.isIncludeCartPriceInPreview)return"CART INCLUDED"}}displaySpecialPrice(e){e.auction?this.displayAuctionPrice(e):this.displayRegularPrice(e)}displayAuctionPrice(e){const{auctionDiscountType:i,auctionGreenFeePrice:a,allowGFDiscount:t}=e.auction;e.displaySpecialPrice=t?i===T.o.Amount?`$${a.toFixed(2)}`:`${a.toFixed()}%`:""}displayRegularPrice(e){const i=e.teeSheetDiscountPrice;e.displaySpecialPrice=`${(0!==i?100*(i-e.teeSheetPrice)/i:0).toFixed()}%`}getPackageFullCart(e,i){const a=e.shItemPrices.find(t=>!!(t.shItemCode.toLowerCase().includes(`package${i}`)&&t.isDynamicPriceItem&&t.isPackageIncludedGreenFee)&&t.packageItems.some(I=>I.golfType===b.FullCart));if(a){const t=a.packageItems.find(I=>I.golfType===b.FullCart);a.taxInclusivePrice=t.taxInclusivePrice,a.price=t.unitPrice}return a}}return l.\u0275fac=function(e){return new(e||l)(v.KVO(o.Qq),v.KVO(p.t),v.KVO(r.il))},l.\u0275prov=v.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);