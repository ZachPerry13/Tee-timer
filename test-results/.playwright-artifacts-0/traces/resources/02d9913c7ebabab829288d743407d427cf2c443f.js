"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[507],{52663:(ee,R,a)=>{a.d(R,{E:()=>F});var s=a(3016),o=a(43754),C=a(63815),w=a(72102);let F=(()=>{class T{constructor(u,r){this.router=u,this.baseConfigurationService=r,this.pagesMobileLayoutDefault=["search-teetime"],this.pagesMobileLayout=[`teetime/${s.WD}`,"teetime/reservation",`teetime/${s.r1}`,`teetime/${s.pD}`,`teetime/${s.cT}`],this.pagesMobileLayout.push(...this.pagesMobileLayoutDefault)}navigate(u,r){this.baseConfigurationService.serverSettings.isMobile&&this.pagesMobileLayout.some(S=>S.toLowerCase()===u.toLowerCase())&&(u=this.pagesMobileLayoutDefault.some(S=>S.toLowerCase()===u.toLowerCase())?`m/${u}/default`:`m/${u}`),this.router.navigate([u],r)}}return T.\u0275fac=function(u){return new(u||T)(C.KVO(w.Ix),C.KVO(o.t))},T.\u0275prov=C.jDH({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},32713:(ee,R,a)=>{a.d(R,{vd:()=>yt,OM:()=>Q,Pj:()=>st,iC:()=>j,K5:()=>Je,EL:()=>St,OW:()=>xe,$q:()=>Mt,kq:()=>Le,nD:()=>lt,lX:()=>ct,j9:()=>ot,Py:()=>rt,Rt:()=>Ue,bZ:()=>pt,Se:()=>at,gw:()=>dt,ts:()=>Ot,xO:()=>z,MB:()=>Ke,zQ:()=>v,ai:()=>Tt,UR:()=>J,$J:()=>Y,ux:()=>Z,lP:()=>X,PJ:()=>Ae,JC:()=>U,jb:()=>B,Cj:()=>He,G_:()=>Ne,FE:()=>Re,$2:()=>We,gz:()=>ve,A3:()=>ut,BS:()=>Qe,uT:()=>et,mW:()=>tt,tx:()=>ft,rw:()=>mt,JZ:()=>ht,WS:()=>Ye,CX:()=>we,JT:()=>d,pw:()=>Xe,vo:()=>Ze,mL:()=>qe});var s=a(75403),o=a(58202);const C={options:null,shRules:[],courseOptions:[],depositByCourseOptions:[]};var r=a(82260),S=a(74e3),c=a(31451);const E=(0,S.p)({selectId:e=>e.courseId,sortComparer:!1}),te=E.getInitialState({}),_=(0,S.p)({selectId:e=>e.courseId,sortComparer:!1}),ne=_.getInitialState({});var $=a(48473),x=a(84573),P=a(74259),ae=a(10958),m=a(58969);const y=(0,S.p)({selectId:e=>e.teeSheetId,sortComparer:!1}),K=y.getInitialState({selectedTeeSheetId:null,selectedValuePackageCode:null,teeSheetNote:null,isSearchTeeTimeSuccess:!1,isSearchingTeeTime:!1,noTeeTimeMessage:null,teeTimesPaging:null,lockedTeeTimesResult:null,isContainSmartCardTeeTime:!1});function L(e,t,n){return e.filter(l=>new Date(l.startTime)>=t&&new Date(l.startTime)<=n)||[]}function re(e,t){const n=new ae.f;if(!e||0===e.length)return n;const l=e.filter(N=>N.auctionId&&N.auctionId>0&&N.auction&&N.auction.auctionType!==x.Y.DynamicPrice);n.dailyDealData=new m.v(l,1,t);const V=new Date(e[0].startTime);let f=P.H.getMorningTimeRanges(V),b=f[0],D=f[1];const bt=L(e,b,D);n.morningData=new m.v(bt,1,t),f=P.H.getNoonTimeRanges(V),b=f[0],D=f[1];const Dt=L(e,b,D);n.noonData=new m.v(Dt,1,t),f=P.H.getAfternoonTimeRanges(V),b=f[0],D=f[1];const Pt=L(e,b,D);return n.afternoonData=new m.v(Pt,1,t),n}var k=a(27011);const fe={teesheetNotes:[],heroWindow:null,isLoading:!1,isShrink:!1,isEnableHeroWindow:!1,heroWindowContentType:k.I.Text,isOpenedHeroWindow:!1},Pe={refreshGracePeriod:0,nextRefreshTeeTime:null};var I=a(79415),je=a(25203),M=(()=>{return(e=M||(M={})).Normal="Normal",e.Special="Special",M;var e})();const ve={informationCells:function ie(e=ne,t){return t.type===c.To.GetInformationCellsSuccess?_.setAll(t.payload,e):e},courses:function se(e=te,t){return t.type===c.To.GetCoursesSuccess?E.setAll(t.payload,e):e},teetimeFilter:r.Ff,status:function oe(e=K,t){switch(t.type){case o.cW.ClearTeeTimesCache:return y.removeAll(e);case o.cW.SearchTeetimes:return y.removeAll(e),Object.assign(Object.assign({},K),{isSearchingTeeTime:!0});case c.To.SearchTeetimesSuccess:return y.addMany(t.payload,Object.assign(Object.assign({},e),{isSearchTeeTimeSuccess:!0,isSearchingTeeTime:!1}));case c.To.SearchTeetimesNoContent:return Object.assign(Object.assign({},e),{isSearchTeeTimeSuccess:!0,isSearchingTeeTime:!1,noTeeTimeMessage:t.payload});case c.To.SearchTeetimesFailure:return Object.assign(Object.assign({},e),{isSearchTeeTimeSuccess:!0,isSearchingTeeTime:!1});case o.cW.SetSelectTeeSheet:case o.cW.SelectTeeSheet:return Object.assign(Object.assign({},e),{selectedTeeSheetId:t.payload.teesheetId});case o.cW.SelectValuePackage:return Object.assign(Object.assign({},e),{selectedValuePackageCode:t.payload.valuePackageCode});case c.To.UnLockTeetimesSuccess:return Object.assign(Object.assign({},e),{selectedTeeSheetId:null,selectedValuePackageCode:null});case c.To.GetTeeSheetNoteSuccess:return Object.assign(Object.assign({},e),{teeSheetNote:t.payload});case c.To.CalculateTeeTimePricesSuccess:return y.updateOne(t.payload,Object.assign(Object.assign({},e),{isContainSmartCardTeeTime:t.payload.changes.shItemPrices.some(n=>n.isSmartCard)}));case c.To.AddTeeTimesPaging:return Object.assign(Object.assign({},e),{teeTimesPaging:re(t.payload.teesheets,t.payload.pageSize)});case o.cW.SetDailyDealPageNo:{const n=new m.v(e.teeTimesPaging.dailyDealData.source,t.payload,e.teeTimesPaging.dailyDealData.pageSize);return Object.assign(Object.assign({},e),{teeTimesPaging:Object.assign(Object.assign({},e.teeTimesPaging),{dailyDealData:Object.assign({},n)})})}case o.cW.SetMorningPageNo:{const n=new m.v(e.teeTimesPaging.morningData.source,t.payload,e.teeTimesPaging.morningData.pageSize);return Object.assign(Object.assign({},e),{teeTimesPaging:Object.assign(Object.assign({},e.teeTimesPaging),{morningData:Object.assign({},n)})})}case o.cW.SetNoonPageNo:{const n=new m.v(e.teeTimesPaging.noonData.source,t.payload,e.teeTimesPaging.noonData.pageSize);return Object.assign(Object.assign({},e),{teeTimesPaging:Object.assign(Object.assign({},e.teeTimesPaging),{noonData:Object.assign({},n)})})}case o.cW.SetAfternoonPageNo:{const n=new m.v(e.teeTimesPaging.afternoonData.source,t.payload,e.teeTimesPaging.afternoonData.pageSize);return Object.assign(Object.assign({},e),{teeTimesPaging:Object.assign(Object.assign({},e.teeTimesPaging),{afternoonData:Object.assign({},n)})})}case c.To.LockTeetimesSuccess:return Object.assign(Object.assign({},e),{lockedTeeTimesResult:t.payload});case c.To.UnLockTeetimesSuccess:return Object.assign(Object.assign({},e),{lockedTeeTimesResult:null});default:return e}},teetimeNote:function Se(e=fe,t){var n;switch(t.type){case o.cW.ShrinkTeeSheetNotes:return Object.assign(Object.assign({},e),{isShrink:t.payload.isShrink});case o.cW.FetchTeeSheetNotes:return Object.assign(Object.assign({},e),{isLoading:!0,isShrink:!1});case c.To.FetchTeeSheetNotesSuccess:return Object.assign(Object.assign({},e),{teesheetNotes:null===(n=t.payload.teesheetNotes)||void 0===n?void 0:n.map(i=>Object.assign(Object.assign({},i),{isHeroWindow:!1})),isLoading:!1});case c.To.FetchTeeSheetNotesFailure:return Object.assign(Object.assign({},e),{isLoading:!1});case c.To.GetHeroWindowText:return Object.assign(Object.assign({},e),{heroWindow:t.payload,isEnableHeroWindow:!0,heroWindowContentType:k.I.Text});case c.To.GetHeroWindowImageSuccess:return Object.assign(Object.assign({},e),{heroWindow:t.payload,isEnableHeroWindow:!0,heroWindowContentType:k.I.Image});case o.cW.SetOpenedHeroWindow:return Object.assign(Object.assign({},e),{isOpenedHeroWindow:t.payload});default:return e}},options:function w(e=C,t){return t.type===o.cW.GetReservationOptionsInConfigModuleSuccess?{options:t.payload.reservationOptions,shRules:t.payload.shRules,courseOptions:t.payload.courseOptions,depositByCourseOptions:t.payload.depositByCourseOptions}:e},refreshScheduler:function Ie(e=Pe,t){switch(t.type){case o.cW.SetRefreshGracePeriod:return Object.assign(Object.assign({},e),{refreshGracePeriod:t.payload});case o.cW.UpdateNextRefreshTeeTime:return Object.assign(Object.assign({},e),{nextRefreshTeeTime:t.payload});default:return e}},hitCount:$.F},h=(0,s.UX)("searchTeeTime"),g=(0,s.Mz)(h,e=>e.teetimeFilter),We=(0,s.Mz)(g,r.vD),J=(0,s.Mz)(g,r.in),B=(0,s.Mz)(g,r.T_),Ae=(0,s.Mz)(J,e=>e.numberOfPlayer),Ne=(0,s.Mz)(g,r.SN),Re=(0,s.Mz)(g,r.z0),X=(0,s.Mz)(g,r.ZY),U=(0,s.Mz)(g,r.NV),we=(0,s.Mz)(g,r.$o),Fe=((0,s.Mz)(g,r.vc),(0,s.Mz)(g,r.pf)),Y=(0,s.Mz)(g,r.Fp),Z=(0,s.Mz)(g,r.In),He=(0,s.Mz)(g,r.i6),Ee=((0,s.Mz)(U,Fe,Y,(e,t,n)=>e===t?n:0),(0,s.Mz)(U,Z,(e,t)=>1===e?t:0),(0,s.Mz)(h,e=>e.courses)),{selectAll:Q}=E.getSelectors(Ee),_e=(0,s.Mz)(h,e=>e.informationCells),{selectAll:Le}=_.getSelectors(_e),ke=(0,s.Mz)(h,e=>e.hitCount),Be=(0,s.Mz)(ke,$.X),d=((0,s.Mz)(Be,e=>e?e.affiliateId:null),(0,s.Mz)(h,e=>e.status)),q=(0,s.Mz)(d,e=>e.selectedTeeSheetId),Ue=(0,s.Mz)(q,e=>null!=e),Ge=(0,s.Mz)(d,e=>e.selectedValuePackageCode),z=(0,s.Mz)(d,e=>e.isSearchTeeTimeSuccess),Ve=(0,s.Mz)(d,e=>e.noTeeTimeMessage),{selectEntities:$e,selectAll:j}=((0,s.Mz)(d,e=>e.lockedTeeTimesResult),y.getSelectors(d)),xe=(0,s.Mz)(j,e=>e.filter(t=>t.auctionId&&t.auctionId>0&&t.auction&&t.auction.auctionType!==x.Y.DynamicPrice)),v=(0,s.Mz)($e,q,Ge,(e,t,n)=>{const l=Object.assign({},t&&e[t]);return l&&n&&(l.selectedValuePackageCode=n),l&&l.startTime&&(l.dayOfWeek=P.H.getDayOfWeek(l.startTime)),l&&(l.teetimeType=l.auctionId>0?M.Special:M.Normal),l}),Ke=(0,s.Mz)(d,e=>e.isSearchingTeeTime),Je=(0,s.Mz)(Q,e=>0!==e.length&&e.every(t=>!t.isDefaultSelected)),p=((0,s.Mz)(d,e=>e.isContainSmartCardTeeTime),(0,s.Mz)(h,e=>e.teetimeNote)),Xe=(0,s.Mz)(p,e=>e.teesheetNotes),Ye=(0,s.Mz)(p,e=>e.isShrink),Ze=(0,s.Mz)(p,e=>e.isLoading),Qe=(0,s.Mz)(p,e=>e.heroWindow),qe=(0,s.Mz)(p,e=>e.isEnableHeroWindow),et=(0,s.Mz)(p,e=>e.heroWindowContentType),tt=(0,s.Mz)(p,e=>e.isOpenedHeroWindow),W=(0,s.Mz)(h,e=>e.options),O=(0,s.Mz)(W,e=>e.options),st=(0,s.Mz)(W,e=>e.shRules),G=(0,s.Mz)(W,e=>e.courseOptions),nt=(0,s.Mz)(W,e=>e.depositByCourseOptions),it=(0,s.Mz)(h,e=>e.refreshScheduler),at=(0,s.Mz)(it,e=>e.nextRefreshTeeTime),rt=(0,s.Mz)(G,B,(e,t)=>!(e&&e.length>0&&!e.filter(i=>t.includes(i.courseId)).some(i=>i.holeSelectionType===I.t.EnableBoth9And18Holes||i.holeSelectionType===I.t.EnableOnly9Holes)&&e.filter(i=>t.includes(i.courseId)).length===t.length)),ot=(0,s.Mz)(G,B,(e,t)=>!(e&&e.length>0&&!e.filter(i=>t.includes(i.courseId)).some(i=>i.holeSelectionType===I.t.EnableBoth9And18Holes||i.holeSelectionType===I.t.EnableOnly18Holes)&&e.filter(i=>t.includes(i.courseId)).length===t.length)),ct=(0,s.Mz)(j,z,(e,t)=>!(!t||e&&!(e.length<=0))),lt=(0,s.Mz)(j,X,z,(e,t,n)=>!!(9!==t&&n&&e&&e.length>0&&e.some(i=>i.crossOverTeeSheetId&&i.crossOverTeeSheetId>0&&(i.crossOverCourseName&&i.crossOverCourseName.length>0||i.isSingleCrossOver)))),gt=(0,s.Mz)(G,v,(e,t)=>t&&e&&e.length>0&&e.some(n=>n.courseId===t.courseId)?e.filter(n=>n.courseId===t.courseId).shift():null),ut=(0,s.Mz)(O,gt,(e,t)=>!!(e&&e.isEnableEndUserAgreement&&(e.endUserAgreementConfiguration===je.L.Global||t&&(t.endUserAgreementTitle&&t.endUserAgreementTitle.length>0||t.endUserAgreementContent&&t.endUserAgreementContent.length>0)))),dt=(0,s.Mz)(z,Ve,(e,t)=>e&&t&&t.messageDetail&&t.messageDetail.length>0?t.messageDetail:null),Tt=(0,s.Mz)(O,e=>e?e.standardBookingTimeout:5),mt=((0,s.Mz)(O,e=>e?e.groupBookingTimeout:10),(0,s.Mz)(O,e=>!!e&&e.requireCreditCardOnFileForRegistration)),ht=(0,s.Mz)(O,e=>!!e&&e.requireCreditCardOnFileForReservation),ft=(0,s.Mz)(O,e=>!!e&&e.requireCreditCardOnFileByMemberClassForReservation),A=(0,s.Mz)(d,e=>e.teeTimesPaging),St=(0,s.Mz)(A,e=>e&&e.dailyDealData),pt=(0,s.Mz)(A,e=>e&&e.morningData),Ot=(0,s.Mz)(A,e=>e&&e.noonData),yt=(0,s.Mz)(A,e=>e&&e.afternoonData),Ct=(0,s.Mz)(v,nt,(e,t)=>{let n=null;return e&&e.courseId&&e.dayOfWeek&&e.teetimeType&&t&&(n=t.filter(i=>i.courseId===e.courseId&&i.dayOfWeek===e.dayOfWeek&&i.teeTimeType===e.teetimeType)),n}),Mt=(0,s.Mz)(O,v,Ct,(e,t,n)=>n&&n.length>0?n[0].amount:e&&e.requireDepositAtCheckout&&t?t.auctionId&&t.auctionId>0?e.dailyDealDepositAmount:e.totalDepositAmount:0)}}]);